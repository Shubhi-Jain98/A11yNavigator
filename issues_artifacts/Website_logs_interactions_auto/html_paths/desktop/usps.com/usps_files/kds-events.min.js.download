(()=>{"use strict";var t=function(){this.FromKargoAd=!1,this.KrakenBidID=null,this.PegasusBidContext=null,this.PegasusBidID=null,this.UTMID=null,this.UTMSource=null,this.UTMMedium=null,this.UTMCampaign=null,this.UTMSourcePlatform=null,this.UTMTerm=null,this.UTMContent=null,this.UTMCreativeFormat=null,this.UTMMarketingTactic=null,this.KargoSource=null,this.KrakenBidID=e("krg_imp_id"),this.KrakenBidID&&this.KrakenBidID.length<=38&&this.KrakenBidID.length>=36||(this.KrakenBidID=null),this.PegasusBidContext=e("krg_ctx"),this.PegasusBidContext||(this.PegasusBidContext=e("krg_p_ctx")),this.PegasusBidID=e("krg_p_id"),(this.KrakenBidID||this.PegasusBidContext||this.PegasusBidID)&&(this.FromKargoAd=!0),this.UTMSource=e("utm_source"),this.UTMSource&&"kargo"==this.UTMSource.toLowerCase()&&(this.FromKargoAd=!0),e("krg_src")&&(this.FromKargoAd=!0),this.KargoSource=e("krg_src"),this.UTMID=e("utm_id"),this.UTMMedium=e("utm_medium"),this.UTMCampaign=e("utm_campaign"),this.UTMSourcePlatform=e("utm_source_platform"),this.UTMTerm=e("utm_term"),this.UTMContent=e("utm_content"),this.UTMCreativeFormat=e("utm_creative_format"),this.UTMMarketingTactic=e("utm_marketing_tactic")};function e(t){var e=new URLSearchParams(window.location.search);if(e.get(t))return e.get(t);var i=new RegExp("".concat(t,"=([\\w-=]+)"));if(window.location.hash.includes(t)){var n=window.location.hash.match(i);if(n)return n[1]}return null}var i=function(){return i=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)},n="krg_px_kds_data",r=604800,o={enabled:!0,trackerURL:"https://kds-pixel.kargo.com/api/v1",QSVTime:5,QSVAttributionTimeout:1800,QSVCustomImageTrackers:[]},a=function(){function e(t,e,n,r,a,s){this.storage=t,this.privacy=e,this.partnerID=n,this.sessionID=r,this.inIFrame=s,this.config=o,this.data={kimp:null,FromKargoAd:!1,UTMID:null,UTMSource:null,UTMMedium:null,UTMCampaign:null,UTMSourcePlatform:null,UTMTerm:null,UTMContent:null,UTMCreativeFormat:null,UTMMarketingTactic:null,KargoSource:null,bidTimestamp:null,QSVTrackerHasFired:!1},this.viewTimeCallCounter=1,this.config=i(i({},this.config),a),this.inIFrame?this.track("iframe",{}):(this.updateData(),this.track("init",{}),this.initViewTimeTracker(),this.initQSV())}return e.prototype.newPayload=function(t,e){return e.view_id=this.sessionID,this.data.FromKargoAd&&(e.from_kargo_ad=this.data.FromKargoAd),this.data.UTMID&&(e.utm_id=this.data.UTMID),this.data.UTMSource&&(e.utm_source=this.data.UTMSource),this.data.UTMMedium&&(e.utm_medium=this.data.UTMMedium),this.data.UTMCampaign&&(e.utm_campaign=this.data.UTMCampaign),this.data.UTMSourcePlatform&&(e.utm_source_platform=this.data.UTMSourcePlatform),this.data.UTMTerm&&(e.utm_term=this.data.UTMTerm),this.data.UTMContent&&(e.utm_content=this.data.UTMContent),this.data.UTMCreativeFormat&&(e.utm_creative_format=this.data.UTMCreativeFormat),this.data.UTMMarketingTactic&&(e.utm_marketing_tactic=this.data.UTMMarketingTactic),this.data.KargoSource&&(e.kargo_source=this.data.KargoSource),{partner_id:this.partnerID,client_id:this.storage.getClientID(),kimp:this.data.kimp,event:t,params:e,client_referer:document.referrer,meta:"",page_url:window.location.href}},e.prototype.getCurrentTimestamp=function(){return Math.round(Date.now()/1e3)},e.prototype.newErrorPayload=function(t,e){return this.newPayload("Error",{name:t,message:e})},e.prototype.updateData=function(){var e=new t;e.FromKargoAd?(this.data=i(i({},e),{kimp:e.KrakenBidID,bidTimestamp:this.getCurrentTimestamp(),QSVTrackerHasFired:!1}),this.storage.setItem(n,JSON.stringify(this.data),r)):this.loadData()},e.prototype.loadData=function(){var t=this.storage.getItem(n);if(t)try{this.data=JSON.parse(t)}catch(t){console.debug("KDS error while loading data:",t)}},e.prototype.trackQSV=function(){var t=this;this.data.QSVTrackerHasFired=!0,this.storage.setItem(n,JSON.stringify(this.data),r),this.track("QSV",{}),this.config.QSVCustomImageTrackers.forEach(function(e){return t.customImageTrack(e)})},e.prototype.initQSV=function(){var t=this;if(this.data.FromKargoAd){var e=this.getCurrentTimestamp();this.data.QSVTrackerHasFired||this.data.bidTimestamp<e-this.config.QSVAttributionTimeout||(this.data.bidTimestamp<e-this.config.QSVTime?this.trackQSV():setTimeout(function(){t.trackQSV()},1e3*(this.config.QSVTime-(e-this.data.bidTimestamp))))}},e.prototype.initViewTimeTracker=function(){var t=this;this.data.FromKargoAd&&(this.viewTimeTimer=setInterval(function(){t.trackViewTime()},1e3))},e.prototype.trackViewTime=function(){this.viewTimeCallCounter++,3!=this.viewTimeCallCounter&&5!=this.viewTimeCallCounter&&10!=this.viewTimeCallCounter&&15!=this.viewTimeCallCounter||this.track("T".concat(this.viewTimeCallCounter),{}),this.viewTimeCallCounter>=15&&clearInterval(this.viewTimeTimer)},e.prototype.track=function(t,e){var i=this.newPayload(t,e);this.sendEvent(i)},e.prototype.encodePayload=function(t){return JSON.stringify(t)},e.prototype.sendEvent=function(t){""!=this.config.trackerURL&&(this.beaconTrack(t)||this.xhrTrack(t))},e.prototype.imageTrack=function(t,e){t.meta="x - i".concat(e);var i=document.createElement("img");i.style.cssText="display:none;",i.src="".concat(this.config.trackerURL,"?").concat(this.privacy.getConsentParams(),"&payload=").concat(btoa(JSON.stringify(t))),document.body.appendChild(i)},e.prototype.customImageTrack=function(t){var e=document.createElement("img");e.style.cssText="display:none;",e.width=0,e.height=0,e.src=t,document.body.appendChild(e)},e.prototype.beaconTrack=function(t){return t.meta="b",window.navigator.sendBeacon&&window.navigator.sendBeacon("".concat(this.config.trackerURL,"?").concat(this.privacy.getConsentParams()),this.encodePayload(t))},e.prototype.xhrTrack=function(t){t.meta="x";var e=this.imageTrack,i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200!=i.status&&e(t,i.status)},i.open("POST","".concat(this.config.trackerURL,"?").concat(this.privacy.getConsentParams()),!0),i.withCredentials=!0,i.send(this.encodePayload(t))},e}();const s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let c;const u=new Uint8Array(16);function h(){if(!c&&(c="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!c))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(u)}const l=[];for(let t=0;t<256;++t)l.push((t+256).toString(16).slice(1));const p=function(t,e,i){if(s.randomUUID&&!e&&!t)return s.randomUUID();const n=(t=t||{}).random||(t.rng||h)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){i=i||0;for(let t=0;t<16;++t)e[i+t]=n[t];return e}return function(t,e=0){return l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]}(n)};function d(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}var g,f=function t(e,i){function n(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=d({},i,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in r)r[a]&&(o+="; "+a,!0!==r[a]&&(o+="="+r[a].split(";")[0]));return document.cookie=t+"="+e.write(n,t)+o}}return Object.create({set:n,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var i=document.cookie?document.cookie.split("; "):[],n={},r=0;r<i.length;r++){var o=i[r].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(n[s]=e.read(a,s),t===s)break}catch(t){}}return t?n[t]:n}},remove:function(t,e){n(t,"",d({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,d({},this.attributes,e))},withConverter:function(e){return t(d({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),m="krg_px_client_id",y="krg_px_data",v=function(){function t(t){if(this.config=t,this.config.enableFirstPartyCookie){if("localhost"==window.location.host)return void(g=f.withAttributes(this.getCookieOptions(window.location.host)));for(var e="krg_domain_test",i=window.location.hostname.split("."),n=i.pop();i.length>0;)if(n=i.pop()+"."+n,f.set(e,"",this.getCookieOptions(n)),f.get(e))return void(g=f.withAttributes(this.getCookieOptions(n))).remove(e);this.config.enableFirstPartyCookie=!1}}return t.prototype.getClientID=function(){var t=this.getItem(m);return t||((t=localStorage.getItem("krg_pixel"))?(this.setItem(m,t),localStorage.removeItem("krg_pixel"),t):this.generateClientID())},t.prototype.generateClientID=function(){var t=p();return this.setItem(m,t),t},t.prototype.getItem=function(t,e){try{var i=this.config.enableFirstPartyCookie?this.getCookieStorage(t):this.getLocalStorage(t);if(i&&i.expiry){if(new Date>new Date(i.expiry))return this.removeItem(t),null;e&&this.setItem(t,i.value,e)}return i&&i.value?i.value:i}catch(t){return console.debug("error getting item with cookies enabled: ".concat(this.config.enableFirstPartyCookie),t),null}},t.prototype.getSessionStorage=function(t){try{var e=this.config.enableFirstPartyCookie?g.get(t):sessionStorage.getItem(t);return e?(e=this.config.enableFirstPartyCookie?this.decode(e.toString()):this.decode(e))&&e.expiry&&new Date>new Date(e.expiry)?(this.removeSessionStorage(t),null):e&&e.value?e.value:e:null}catch(t){return console.debug("error getting session storage with cookies enabled: ".concat(this.config.enableFirstPartyCookie),t),null}},t.prototype.getLocalStorage=function(t){var e=localStorage.getItem(y);return e?(e=this.decode(e),t==y?e:e[t]):null},t.prototype.getCookieStorage=function(t){var e=g.get(y);return e?(e=this.decode(e.toString()),t==y?e:e[t]):null},t.prototype.setItem=function(t,e,i){try{var n=this.calculateExpiry(i);return this.config.enableFirstPartyCookie?this.setCookieStorage(t,e,n):this.setLocalStorage(t,e,n)}catch(t){return console.debug("error setting item with cookies enabled: ".concat(this.config.enableFirstPartyCookie),t),null}},t.prototype.setSessionStorage=function(t,e,i){try{var n={value:e,expiry:this.calculateExpiry(i)};return this.config.enableFirstPartyCookie?g.set(t,this.encode(n),{expires:null}):sessionStorage.setItem(t,this.encode(n))}catch(t){return console.debug("error setting session storage with cookies enabled: ".concat(this.config.enableFirstPartyCookie),t),null}},t.prototype.setLocalStorage=function(t,e,i){var n=this.setObject(this.getLocalStorage(y),t,e,i);return localStorage.setItem(y,this.encode(n))},t.prototype.setCookieStorage=function(t,e,i){var n=this.setObject(this.getCookieStorage(y),t,e,i);return g.set(y,this.encode(n))},t.prototype.getCookieOptions=function(t){return"localhost"==window.location.host?{}:{domain:t,sameSite:"lax",expires:365}},t.prototype.setObject=function(t,e,i,n){var r;return t?t[e]={value:i,expiry:n}:((r={})[e]={value:i,expiry:n},t=r),t},t.prototype.encode=function(t){return JSON.stringify(t)},t.prototype.decode=function(t){return JSON.parse(t)},t.prototype.calculateExpiry=function(t){if(t){var e=new Date;return e.setSeconds(e.getSeconds()+t),e.toISOString()}},t.prototype.removeItem=function(t){try{var e;if(this.config.enableFirstPartyCookie){if(e=g.get(y))return e=this.removeItemFromObject(e,t),g.set(y,e),e}else if(e=localStorage.getItem(y))return e=this.removeItemFromObject(e,t),localStorage.setItem(y,e),e;return null}catch(t){return console.debug("error removing item with cookies enabled: ".concat(this.config.enableFirstPartyCookie),t),null}},t.prototype.removeSessionStorage=function(t){try{return this.config.enableFirstPartyCookie?g.remove(t):sessionStorage.removeItem(t)}catch(t){return console.debug("error removing session storage item with cookies enabled: ".concat(this.config.enableFirstPartyCookie),t),null}},t.prototype.removeItemFromObject=function(t,e){return delete(t=this.decode(t))[e],this.encode(t)},t}(),w="krg_px_session_id",k=function(){function t(t){this.storage=t}return t.prototype.getSessionID=function(){var t=this,e=this.storage.getSessionStorage(w);return e&&""!=e&&null!=e&&"string"==typeof e&&36==e.length||(e=p(),this.storage.setSessionStorage(w,e,1800)),this.timer||(this.timer=setInterval(function(){return t.persistSessionID(e)},5e3)),e},t.prototype.persistSessionID=function(t){this.storage.setSessionStorage(w,t,1800)},t}();var S=function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},b=function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},T=function(){function t(t){this.win=t,this.GVLID="972",this.usPrivacyString="",this.gdprData={gdprApplies:0,tcString:"",eventStatus:""},this.gppData={gppString:"",applicableSections:[]}}return t.prototype.fetchConsents=function(t){return S(this,void 0,void 0,function(){var e,i,n;return b(this,function(r){switch(r.label){case 0:return e=this,[4,this.fetchUSPrivacy(t)];case 1:return e.usPrivacyString=r.sent(),i=this,[4,this.fetchGDPR(t)];case 2:return i.gdprData=r.sent(),n=this,[4,this.fetchGPP(t)];case 3:return n.gppData=r.sent(),[2]}})})},t.prototype.getUSPrivacyConsent=function(){return this.usPrivacyString},t.prototype.getGDPRConsent=function(){return this.gdprData},t.prototype.getGPPConsent=function(){return this.gppData},t.prototype.fetchUSPrivacy=function(t){return S(this,void 0,void 0,function(){var e,i,n=this;return b(this,function(r){return e=new Promise(function(e){setTimeout(e,t,"")}),i=new Promise(function(t){var e=function(t,e){for(var i,n=t.document.cookie.split(";"),r=null,o=e+"=",a=0;a<n.length;a+=1){for(;" "===n[a].charAt(0);)n[a]=n[a].substring(1,n[a].length);if(0===n[a].indexOf(o)){i=n[a].substring(o.length,n[a].length);try{r=JSON.parse(i)}catch(t){r=i}return r}}return null}(n.win,"usprivacy");e?t(e):n.win.__uspapi?n.win.__uspapi("getUSPData",1,function(e,i){t(i?e.uspString:"")}):t("")}),[2,Promise.race([e,i])]})})},t.prototype.fetchGDPR=function(t){return S(this,void 0,void 0,function(){var e,i,n,r=this;return b(this,function(o){return e={gdprApplies:0,tcString:"",eventStatus:""},i=new Promise(function(i){setTimeout(i,t,e)}),n=new Promise(function(t){r.win.__tcfapi?r.win.__tcfapi("ping",2,function(i){var n=function(i,n){n&&"tcloaded"===i.eventStatus?t(i):t(e)};i&&"2"===i.apiVersion?r.win.__tcfapi("getTCData",2,n):r.win.__tcfapi("addEventListener",2,n)}):t(e)}),[2,Promise.race([i,n])]})})},t.prototype.fetchGPP=function(t){return S(this,void 0,void 0,function(){var e,i,n,r=this;return b(this,function(o){return e={gppString:"",applicableSections:[]},i=new Promise(function(i){setTimeout(i,t,e)}),n=new Promise(function(t){if(r.win.__gpp){var i=r.win.__gpp;i("addEventListener",function(n){if("error"!==n.pingData.cmpStatus){if("stub"!==n.pingData.cmpStatus)if("1.0"===n.pingData.gppVersion){var r=i("getGPPData");if(r&&void 0!==r.gppString&&void 0!==r.applicableSections)return void t(r);t(e)}else"1.1"===n.pingData.gppVersion?t({gppString:n.pingData.gppString,applicableSections:n.pingData.applicableSections}):t(e)}else t(e)})}else t(e)}),[2,Promise.race([i,n])]})})},t.prototype.getConsentParams=function(){return"gdpr="+this.gdprData.gdprApplies+"&gdpr_consent="+this.gdprData.tcString+"&us_privacy="+this.usPrivacyString+"&gpp="+this.gppData.gppString+"&gpp_sid="+this.gppData.applicableSections.join(",")},t}(),C=function(){return C=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},C.apply(this,arguments)};(new(function(){function t(){this.isInitialized=!1,this.isInitializing=!1,this.privacy=new T(window),this.partnerID="",this.sessionID="",this.inIFrame=!1,this.config={storage:{enableFirstPartyCookie:!1},kds:o},this.queue=[],this.window=window}return t.prototype.run=function(){var t=this;"loading"!==document.readyState?this.boot():document.addEventListener("DOMContentLoaded",function(){return t.boot()})},t.prototype.boot=function(){return t=this,e=void 0,n=function(){var t=this;return function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(e){switch(e.label){case 0:return[4,this.privacy.fetchConsents(10)];case 1:return e.sent(),this.window.kds.callMethod=this.queueCommand.bind(this),this.window.kds.relayCallMethod=function(e){t.window.kds.callMethod.apply(t,e)},this.window.kds.version="3.1.0",this.processQueue(this.window.kds.queue),[2]}})},new((i=void 0)||(i=Promise))(function(r,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())});var t,e,i,n},t.prototype.init=function(t){this.isInitialized||this.isInitializing||(this.isInitializing=!0,this.partnerID=t,this.fetchConfig())},t.prototype.fetchConfig=function(){var t=this,e=new URLSearchParams(window.location.search).get("krg_px_cfg");if(!e&&this.window.krg_pixel_config)return this.config=C(C({},this.config),this.window.krg_pixel_config),void this.completeInit();var i=e||"".concat("https://storage.cloud.kargo.com/kds/configs","/").concat(this.partnerID,".json");fetch(i).then(function(t){return t.json()}).then(function(e){t.config=C(C({},t.config),e)}).catch(function(){}).finally(function(){t.completeInit()})},t.prototype.completeInit=function(){this.pageInIframe()&&(this.inIFrame=!0);var t=new v(this.config.storage);this.sessionID=new k(t).getSessionID(),this.config.kds.enabled&&(this.kds=new a(t,this.privacy,this.partnerID,this.sessionID,this.config.kds,this.inIFrame)),this.isInitialized=!0,this.window.kds.callMethod=this.runCommand.bind(this),this.processQueue(this.queue)},t.prototype.pageInIframe=function(){return window.location!==window.parent.location},t.prototype.track=function(t,e){this.inIFrame||this.kds&&this.kds.track(t,Object.assign({},e))},t.prototype.runCommand=function(t,e,i){try{switch(t){case"init":this.init(e);break;case"track":this.isInitialized?this.track(e||"",i||{}):this.queue.push([t,e,i])}}catch(t){}},t.prototype.queueCommand=function(t,e,i){"init"===t?this.init(e):this.queue.push([t,e,i])},t.prototype.processQueue=function(t){for(;t.length;){var e=t.shift();this.runCommand.apply(this,e)}},t}())).run()})();

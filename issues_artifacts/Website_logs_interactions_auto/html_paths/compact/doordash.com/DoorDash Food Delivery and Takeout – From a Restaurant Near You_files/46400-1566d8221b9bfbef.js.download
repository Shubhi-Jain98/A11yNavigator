!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="940133c6-944a-4158-a30e-20b4d3548017",e._sentryDebugIdIdentifier="sentry-dbid-940133c6-944a-4158-a30e-20b4d3548017")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46400],{530423:function(e,t,i){i.d(t,{Z:function(){return r}});var s=i(313773),a=i(389492),o=i(3746),d=i(992899),l=function(e){var t,i,l=e.geoJson,n=e.onMousemove,r=e.onMouseout,c=e.handleFeatureClick,u=e.strokeColor,_=e.fillColor,p=(0,a.S)(),h=p.map,f=p.mapLib,m=p.mapOptions,g=(null===(t=(0,o.Zt)(d.Q2.usage.color.highlight.default,{returnAsNumber:!1}))||void 0===t?void 0:t.slice(0,7))||"",b=(null===(i=(0,o.Zt)(d.Q2.usage.color.highlight.default,{returnAsNumber:!1}))||void 0===i?void 0:i.slice(0,7))||"",C=u||g,E=_||b;return s.useEffect(function(){if(f&&h){f.createAndRenderGeoJson(h,{geoJson:l,strokeColor:C,fillColor:E},c);var e=function(e){if(c){var t=e.point;h.queryRenderedFeatures(t,{layers:["geojson-layer"]}).length&&c("geojson-layer")}};return null==h||h.on("click",e),function(){var t;null==h||h.off("click",e);try{(null==h?void 0:h.getLayer("geojson-layer"))&&(null==h||h.removeLayer("geojson-layer")),(null==h?void 0:h.getLayer("geojson-outline"))&&(null==h||h.removeLayer("geojson-outline")),(null==h?void 0:h.getSource("geojson"))&&(null==h||h.removeSource("geojson"))}catch(e){null===(t=null==m?void 0:m.onError)||void 0===t||t.call(m,"MapGeoJson error","Failed to remove GeoJson from map")}}}},[h,f]),s.useEffect(function(){if(n&&h)return h.on("mousemove",n),function(){h.off("mousemove",n)}},[h,n]),s.useEffect(function(){if(r&&h)return h.on("mouseout",r),function(){h.off("mouseout",r)}},[h,r]),null},n=function(e,t,i){void 0===i&&(i=50);for(var s=t/1609.344/3963*(180/Math.PI),a=s/Math.cos(e.lat*(Math.PI/180)),o=[],d=0;d<i+1;d++){var l=d/(i/2)*Math.PI,n=e.lat+s*Math.cos(l),r=e.lng+a*Math.sin(l);o.push({lat:n,lng:r})}return o},r=function(e){var t=e.center,i=e.radiusInMeters,a=e.onMousemove,o=e.onMouseout,d=e.handleFeatureClick,r=e.strokeColor,c=e.fillColor,u={type:"Polygon",coordinates:[n(t,i,360).map(function(e){return[e.lng,e.lat]})]};return s.createElement(l,{geoJson:u,onMousemove:a,onMouseout:o,handleFeatureClick:d,strokeColor:r,fillColor:c})}},346400:function(e,t,i){i.r(t),i.d(t,{default:function(){return tP}});var s,a,o,d,l,n,r,c,u,_,p,h,f,m,g=i(361967),b=i(337737),C=i(960031),E=i(446242),y=i(514739),A=i(313773),v=i(455639),S=i(480704),T=i(730342),D=i(446150),x=i(166120),L=i(566643),I=i(780915),w=i(420314),P=i(921587),j=i(616585),O=i(538763);let k=(e,t)=>{let i=(0,O.bU)(),s=(0,w.Z)({cartId:e}),{shouldShowOpenCarts:a}=(0,j.S)(),o=A.useCallback(t=>a?t:e,[e,a]);return A.useCallback(async(e,a)=>{t(e);let d=o(a);if(d)try{await s(d)}catch(e){(0,P.gs)({giftOptions:null,message:e,entryPoint:P.JE.ADDRESS_PICKER},i)}},[t,o,s,i])};var R=i(143133),M=i(788594),F=i(911646),N=i(971174),B=i(152724),U=i(861332),H=i(336279),Y=i(794304),V=i(267827),Z=i.n(V);(s=c||(c={}))[s.LABEL_ICON_TYPE_UNSPECIFIED=0]="LABEL_ICON_TYPE_UNSPECIFIED",s[s.LABEL_ICON_TYPE_PIN=1]="LABEL_ICON_TYPE_PIN",s[s.LABEL_ICON_TYPE_HOME=2]="LABEL_ICON_TYPE_HOME",s[s.LABEL_ICON_TYPE_WORK=3]="LABEL_ICON_TYPE_WORK",(a=u||(u={}))[a.ADDRESS_ID_TYPE_UNSPECIFIED=0]="ADDRESS_ID_TYPE_UNSPECIFIED",a[a.ADDRESS_ID_TYPE_GEO_ADDRESS_ID=1]="ADDRESS_ID_TYPE_GEO_ADDRESS_ID",a[a.ADDRESS_ID_TYPE_SOURCE_PLACE_ID=2]="ADDRESS_ID_TYPE_SOURCE_PLACE_ID",(o=_||(_={}))[o.ADDRESS_TYPE_UNSPECIFIED=0]="ADDRESS_TYPE_UNSPECIFIED",o[o.ADDRESS_TYPE_HOUSE=1]="ADDRESS_TYPE_HOUSE",o[o.ADDRESS_TYPE_APARTMENT=2]="ADDRESS_TYPE_APARTMENT",o[o.ADDRESS_TYPE_HOTEL=3]="ADDRESS_TYPE_HOTEL",o[o.ADDRESS_TYPE_OFFICE=4]="ADDRESS_TYPE_OFFICE",o[o.ADDRESS_TYPE_OTHER=5]="ADDRESS_TYPE_OTHER",o[o.ADDRESS_TYPE_NONE=6]="ADDRESS_TYPE_NONE",(d=p||(p={}))[d.TAG_TYPE_UNSPECIFIED=0]="TAG_TYPE_UNSPECIFIED",d[d.TAG_TYPE_INFORMATIONAL=1]="TAG_TYPE_INFORMATIONAL",d[d.TAG_TYPE_HIGHLIGHT=2]="TAG_TYPE_HIGHLIGHT",d[d.TAG_TYPE_POSITIVE=3]="TAG_TYPE_POSITIVE",d[d.TAG_TYPE_NEGATIVE=4]="TAG_TYPE_NEGATIVE",d[d.TAG_TYPE_WARNING=5]="TAG_TYPE_WARNING",(l=h||(h={}))[l.TAG_STYLE_UNSPECIFIED=0]="TAG_STYLE_UNSPECIFIED",l[l.TAG_STYLE_DEFAULT=1]="TAG_STYLE_DEFAULT",l[l.TAG_STYLE_EMPHASIS=2]="TAG_STYLE_EMPHASIS",l[l.TAG_STYLE_SUBDUED=3]="TAG_STYLE_SUBDUED",(n=f||(f={}))[n.DISPLAY_LINK_TYPE_UNSPECIFIED=0]="DISPLAY_LINK_TYPE_UNSPECIFIED",n[n.DISPLAY_LINK_TYPE_PROOF_OF_DELIVERY=1]="DISPLAY_LINK_TYPE_PROOF_OF_DELIVERY",(r=m||(m={}))[r.DISPLAY_CONDITION_UNSPECIFIED=0]="DISPLAY_CONDITION_UNSPECIFIED",r[r.DISPLAY_CONDITION_ALWAYS=1]="DISPLAY_CONDITION_ALWAYS",r[r.DISPLAY_CONDITION_SELECTED_ONLY=2]="DISPLAY_CONDITION_SELECTED_ONLY";let G={address_link_type:"Test Address Type",address_types:{dropdown_label:"Address types",options:[{adjust_pin_mini_map:{label:"House entrance",action_label:"Adjust pin",entrance_pin:{icon:"house-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194}},adjust_pin_map:{entrance_pin:{icon:"house-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194,tooltip_message:"This is a tooltip message",distance_validation:{max_movable_distance_meters:500,pin_distance_validation_error_message:"This is a pin distance validation error message",centered_at_point:{lat:37.7749,lng:-122.4194}}},title:"House entrance"},dropoff_options_section:{options:[{icon:"door",instructions:{placeholder:"Please don’t ring the doorbell. We are the house with the blue door.",value:"",label:"Delivery instructions"},is_disabled:!1,is_selected:!1,option_id:"contactless",sub_options:[],label:"Leave at door"},{icon:"waving_hand",instructions:{placeholder:"Please call me when you arrive. My house has a blue door..",label:"Delivery instructions",value:""},is_disabled:!1,is_selected:!0,option_id:"handoff",sub_options:[{option_id:"door",is_disabled:!1,is_selected:!0,label:"Door",disabled_message:"This is a disabled message"},{option_id:"outside",is_disabled:!1,is_selected:!1,label:"Outside",disabled_message:"This is a disabled message"}],label:"Meet at a location"}],label:"Delivery preferences"},fields:[{box_size:"full",key:"gate_code",label:"Gate code"}],icon:"house",id:_.ADDRESS_TYPE_HOUSE,is_selected:!0,label:"House"},{adjust_pin_mini_map:{label:"House entrance",action_label:"Adjust pin",entrance_pin:{icon:"apartment-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194}},adjust_pin_map:{entrance_pin:{icon:"apartment-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194,tooltip_message:"This is a tooltip message",distance_validation:{centered_at_point:{lat:37.7749,lng:-122.4194},max_movable_distance_meters:500,pin_distance_validation_error_message:"This is a pin distance validation error message"}},title:"Building entrance"},dropoff_options_section:{options:[{icon:"door",instructions:{placeholder:"Please don’t ring the doorbell. We are the house with the blue door.",label:"Delivery instructions",value:""},is_disabled:!1,is_selected:!0,option_id:"contactless",sub_options:[{option_id:"apartment_door",is_disabled:!1,is_selected:!1,label:"Apartment door",disabled_message:"This is a disabled message"},{option_id:"lobby",is_disabled:!1,is_selected:!1,label:"Lobby",disabled_message:"This is a disabled message"}],tag:{label:"Recommended",style:"default",type:"positive"},label:"Leave at a location"},{icon:"waving_hand",instructions:{placeholder:"Please call me when you arrive. My house has a blue door..",label:"Delivery instructions",value:""},is_disabled:!1,is_selected:!1,option_id:"handoff",sub_options:[{option_id:"apartment_door",is_disabled:!1,is_selected:!1,label:"Apartment door",disabled_message:"This is a disabled message"},{option_id:"lobby",is_disabled:!1,is_selected:!1,label:"Lobby",disabled_message:"This is a disabled message"},{option_id:"outside",is_disabled:!1,is_selected:!1,label:"Outside",disabled_message:"This is a disabled message"}],label:"Meet at a location"}],label:"Delivery preferences"},fields:[{box_size:"half",hint:"Recommended",key:"subpremise",label:"Apartment/Suite"},{box_size:"half",key:"entry_code",label:"Entry code"},{box_size:"full",hint:"Used by other customers at this address",key:"building_name",label:"Building Name"}],icon:"apartment",id:_.ADDRESS_TYPE_APARTMENT,is_selected:!1,label:"Apartment"},{adjust_pin_mini_map:{label:"House entrance",action_label:"Adjust pin",entrance_pin:{icon:"hotel-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194}},adjust_pin_map:{entrance_pin:{icon:"hotel-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194,tooltip_message:"This is a tooltip message",distance_validation:{max_movable_distance_meters:500,pin_distance_validation_error_message:"This is a pin distance validation error message",centered_at_point:{lat:37.7749,lng:-122.4194}}},title:"Hotel entrance"},dropoff_options_section:{options:[{icon:"door",instructions:{placeholder:"Please don’t ring the doorbell. We are the house with the blue door.",label:"Delivery instructions",value:""},is_disabled:!1,is_selected:!0,option_id:"contactless",sub_options:[{option_id:"room_door",is_disabled:!1,is_selected:!1,label:"Room door",disabled_message:"This is a disabled message"},{option_id:"lobby",is_disabled:!1,is_selected:!1,label:"Lobby",disabled_message:"This is a disabled message"}],label:"Leave at a location"},{icon:"waving_hand",instructions:{placeholder:"Please call me when you arrive. My house has a blue door..",label:"Delivery instructions",value:""},is_disabled:!1,is_selected:!1,option_id:"handoff",sub_options:[{option_id:"room_door",is_disabled:!1,is_selected:!1,label:"Room door",disabled_message:"This is a disabled message"},{option_id:"lobby",is_disabled:!1,is_selected:!1,label:"Lobby",disabled_message:"This is a disabled message"},{option_id:"outside",is_disabled:!1,is_selected:!1,label:"Outside",disabled_message:"This is a disabled message"}],label:"Meet at a location"}],label:"Delivery preferences"},fields:[{box_size:"full",description:"Recommended",key:"room_suite",label:"Room/Suite"},{box_size:"full",hint:"Used by other customers at this address",key:"hotel_name",label:"Hotel name"}],icon:"hotel",id:_.ADDRESS_TYPE_HOTEL,is_selected:!1,label:"Hotel"},{adjust_pin_mini_map:{label:"House entrance",action_label:"Adjust pin",entrance_pin:{icon:"office-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194}},adjust_pin_map:{entrance_pin:{icon:"office-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194,tooltip_message:"This is a tooltip message",distance_validation:{max_movable_distance_meters:500,pin_distance_validation_error_message:"This is a pin distance validation error message",centered_at_point:{lat:37.7749,lng:-122.4194}}},title:"Building entrance"},dropoff_options_section:{options:[{icon:"door",instructions:{placeholder:"Please don’t ring the doorbell. We are the house with the blue door.",label:"Delivery instructions",value:""},is_disabled:!1,is_selected:!0,option_id:"contactless",sub_options:[{option_id:"office_suite_floor",is_disabled:!1,is_selected:!1,label:"Office suite/floor",disabled_message:"This is a disabled message"},{option_id:"lobby",is_disabled:!1,is_selected:!1,label:"Lobby",disabled_message:"This is a disabled message"}],label:"Leave at a location"},{icon:"waving_hand",instructions:{placeholder:"Please call me when you arrive. My house has a blue door..",label:"Delivery instructions",value:""},is_disabled:!1,is_selected:!1,option_id:"handoff",sub_options:[{option_id:"office_suite_floor",is_disabled:!1,is_selected:!1,label:"Office suite/floor",disabled_message:"This is a disabled message"},{option_id:"lobby",is_disabled:!1,is_selected:!1,label:"Lobby",disabled_message:"This is a disabled message"},{option_id:"outside",is_disabled:!1,is_selected:!1,label:"Outside",disabled_message:"This is a disabled message"}],label:"Meet at a location"}],label:"Delivery preferences"},fields:[{box_size:"full",description:"Recommended",key:"suite_floor",label:"Suite/Floor"},{box_size:"full",description:"Recommended",key:"business_name",label:"Business name"}],icon:"office",id:_.ADDRESS_TYPE_OFFICE,is_selected:!1,label:"Office"},{adjust_pin_mini_map:{label:"House entrance",action_label:"Adjust pin",entrance_pin:{icon:"other-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194}},adjust_pin_map:{entrance_pin:{icon:"other-map-pin",label:"House entrance",lat:37.7749,lng:-122.4194,tooltip_message:"This is a tooltip message",distance_validation:{centered_at_point:{lat:37.7749,lng:-122.4194},max_movable_distance_meters:500,pin_distance_validation_error_message:"This is a pin distance validation error message"}},title:"Building entrance"},dropoff_options_section:{options:[{icon:"door",instructions:{placeholder:"Please don’t ring the doorbell. We are the house with the blue door.",label:"Delivery instructions",value:""},is_disabled:!1,is_selected:!0,option_id:"contactless",sub_options:[{option_id:"door",is_disabled:!1,is_selected:!1,label:"Door",disabled_message:"This is a disabled message"},{option_id:"lobby",is_disabled:!1,is_selected:!1,label:"Lobby",disabled_message:"This is a disabled message"}],label:"Leave at a location"},{icon:"waving_hand",instructions:{placeholder:"Please call me when you arrive. My house has a blue door..",label:"Delivery instructions",value:""},is_disabled:!1,is_selected:!1,option_id:"handoff",sub_options:[{option_id:"door",is_disabled:!1,is_selected:!1,label:"Door",disabled_message:"This is a disabled message"},{option_id:"lobby",is_disabled:!1,is_selected:!1,label:"Lobby",disabled_message:"This is a disabled message"},{option_id:"outside",is_disabled:!1,is_selected:!1,title:"Outside"}],label:"Meet at a location"}],label:"Delivery preferences"},fields:[{box_size:"half",key:"suite_floor",label:"Suite/Floor"},{box_size:"half",key:"entry_code",label:"Entry code"},{box_size:"full",key:"building_name",label:"Building Name"}],icon:"other",id:_.ADDRESS_TYPE_OTHER,is_selected:!1,label:"Other"}]},consumer_address_link_id:"67890",formatted_address:{editable:{line_one:"123 Main St",line_two:"Apt 101"},non_editable:{line_one:"123 Main St",line_two:"Apt 101"}},geo_address_id:"12345",is_selected:!0,label_info:{icon:"LABEL_ICON_TYPE_HOME",name:"home"},saved:!0},Q={},W=()=>{let[e]=(0,Y.wj)(Z()),{updateConsumerDefaultAddress:t}=(0,U.Z)({refetchQueries:[],awaitRefetchQueries:!1,addressEntryPoint:"",onCompleted:()=>{}}),{removeAddress:i}=(0,H.m)();return(0,A.useMemo)(()=>({getAddressDetails:async e=>Q,createAddress:async e=>Q,editAddress:async e=>Q,removeAddress:async e=>i(e),setDefaultAddress:async e=>t(e),getAutocompletePredictions:async t=>e.getGeoIntelligenceV2AddressAutocomplete({inputAddress:t,iso3166Alpha2CountryCodeRestrictions:[]}).then(e=>e.predictions||[]),getOrCreateAddress:async t=>e.postGeoIntelligenceV2AddressGetOrCreate({geoIntelligenceV2GetOrCreateAddressV2Request:{address_identifier:{discriminatorType:"source_place_id_request",source_place_id:t}}}),getAddressDetailsView:async()=>G}),[t,i,e])},z={DEFAULT:"default",SELECT_PLACE_TYPE:"selectPlaceType",CREATE:"create",EDIT:"edit",ADJUST_PIN:"adjustPin",SET_LABEL:"setLabel",MANUAL_ENTRY:"manualEntry"},J={mode:z.DEFAULT,modeHistory:null,availableAddresses:[],defaultConsumerAddressLinkId:null,selectedConsumerAddressLinkId:null,addressDetailsView:null,draftPinCoords:null},K=(0,A.createContext)(void 0),$=(e,t)=>{switch(t.type){case"SET_MODE":{let i={mode:e.mode,prev:e.modeHistory};return{...e,mode:t.payload,modeHistory:i}}case"GO_BACK":if(!e.modeHistory)return{...e,mode:z.DEFAULT};return{...e,mode:e.modeHistory.mode,modeHistory:e.modeHistory.prev};case"GO_TO_MODE":{let i=e.modeHistory;for(;null!==i;){if(i.mode===t.payload)return{...e,mode:t.payload,modeHistory:i.prev};i=i.prev}return{...e,mode:t.payload,modeHistory:e.modeHistory}}case"SET_AVAILABLE_ADDRESSES":return{...e,availableAddresses:t.payload};case"SET_SELECTED_ADDRESS":var i,s;return{...e,selectedConsumerAddressLinkId:null!==(s=null===(i=t.payload)||void 0===i?void 0:i.consumer_address_link_id)&&void 0!==s?s:null};case"SET_DEFAULT_ADDRESS_ID":return{...e,defaultConsumerAddressLinkId:t.payload};case"SET_SELECTED_ADDRESS_TYPE":if(!e.addressDetailsView)return e;return{...e,addressDetailsView:{...e.addressDetailsView,address_types:{...e.addressDetailsView.address_types,options:e.addressDetailsView.address_types.options.map(e=>({...e,is_selected:e.id===t.payload}))}}};case"SET_ADDRESS_DETAILS_VIEW":return{...e,addressDetailsView:t.payload};case"UPDATE_DELIVERY_PREFERENCE":if(!e.addressDetailsView)return e;let{optionId:a,subOptionId:o}=t.payload,d={...e.addressDetailsView},l=d.address_types.options.find(e=>e.is_selected);if(!l)return e;return l.dropoff_options_section.options.forEach(e=>{let t=e.option_id===a;e.is_selected=t,t&&e.sub_options.length>0&&e.sub_options.forEach(t=>{o?t.is_selected=t.option_id===o:t.is_disabled||e.sub_options.some(e=>e.is_selected)||(t.is_selected=!0)}),t||e.sub_options.forEach(e=>{e.is_selected=!1})}),{...e,addressDetailsView:d};case"UPDATE_DELIVERY_INSTRUCTIONS":if(!e.addressDetailsView)return e;let n={...e.addressDetailsView},r=n.address_types.options.find(e=>e.is_selected);if(!r)return e;let c=r.dropoff_options_section.options.find(e=>e.option_id===t.payload.optionId);return c&&c.instructions&&(c.instructions.value=t.payload.instructions),{...e,addressDetailsView:n};case"SAVE_DRAFT_PIN_COORDS":return{...e,draftPinCoords:t.payload};case"REVERT_DRAFT_PIN_COORDS":return{...e,draftPinCoords:null};case"SAVE_ADJUST_PIN_COORDS":if(!e.addressDetailsView||!e.draftPinCoords)return e;let u=e.addressDetailsView.address_types.options.find(e=>e.is_selected);if(!u)return e;let _={...u,adjust_pin_map:{...u.adjust_pin_map,entrance_pin:{...u.adjust_pin_map.entrance_pin,lat:e.draftPinCoords.lat,lng:e.draftPinCoords.lng,distance_validation:{...u.adjust_pin_map.entrance_pin.distance_validation,centered_at_point:{...u.adjust_pin_map.entrance_pin.distance_validation.centered_at_point,lat:e.draftPinCoords.lat,lng:e.draftPinCoords.lng}}}},adjust_pin_mini_map:{...u.adjust_pin_mini_map,entrance_pin:{...u.adjust_pin_mini_map.entrance_pin,lat:e.draftPinCoords.lat,lng:e.draftPinCoords.lng}}};return{...e,addressDetailsView:{...e.addressDetailsView,address_types:{...e.addressDetailsView.address_types,options:e.addressDetailsView.address_types.options.map(e=>e.id===u.id?_:e)}}};case"RESET":return{...J};default:return e}},q=e=>{let{children:t,apiOverrides:i={},initialMode:s=z.DEFAULT,reducer:a=$,onAddAddress:o,onAddAddressError:d,onEditAddress:l,onEditAddressError:n,onRemoveAddress:r,onRemoveAddressError:c,onSetDefaultAddress:u,onSetDefaultAddressError:_,onGetAddressDetailsView:p,onGetAddressDetailsViewError:h}=e,[f,m]=(0,A.useReducer)(a,{...J,mode:s},e=>({...e,mode:e.mode})),b=(0,A.useCallback)(e=>{m({type:"SET_MODE",payload:e})},[m]),C=(0,A.useCallback)(async e=>{m({type:"SET_MODE",payload:z.EDIT})},[m]),E=W(),y=(0,A.useMemo)(()=>{let e={...E,...i};return{getAddressDetails:async t=>{try{return await e.getAddressDetails(t)}catch(e){throw e}},createAddress:async t=>{try{return await e.createAddress(t)}catch(e){throw e}},editAddress:async t=>{try{return await e.editAddress(t)}catch(e){throw e}},removeAddress:async t=>{try{await e.removeAddress(t)}catch(e){throw e}},setDefaultAddress:async t=>{try{await e.setDefaultAddress(t)}catch(e){throw e}},getAutocompletePredictions:async t=>{try{return await e.getAutocompletePredictions(t)}catch(e){throw e}},getOrCreateAddress:async t=>{try{return await e.getOrCreateAddress(t)}catch(e){throw e}},getAddressDetailsView:async()=>{try{return await e.getAddressDetailsView()}catch(e){throw e}}}},[i,E]),v=(0,A.useCallback)(async e=>{try{let t=await y.createAddress(e);null==o||o(t)}catch(e){throw null==d||d(e),e}},[y,o,d]),S=(0,A.useCallback)(async e=>{try{let t=await y.editAddress(e);null==l||l(t)}catch(e){throw null==n||n(e),e}},[y,l,n]),T=(0,A.useCallback)(async e=>{try{await y.setDefaultAddress(e),m({type:"SET_DEFAULT_ADDRESS_ID",payload:e}),null==u||u(e)}catch(e){throw null==_||_(e),e}},[y,m,u,_]),D=(0,A.useCallback)(async e=>{try{await y.removeAddress(e),m({type:"SET_AVAILABLE_ADDRESSES",payload:f.availableAddresses.filter(t=>t.consumer_address_link_id!==e)}),null==r||r(e)}catch(e){throw null==c||c(e),e}},[y,m,f.availableAddresses,r,c]),x=(0,A.useCallback)(async e=>{try{return await y.getOrCreateAddress(e)}catch(e){throw e}},[y]),L=(0,A.useCallback)(async e=>{try{return await y.getAutocompletePredictions(e)}catch(e){throw e}},[y]),I=(0,A.useCallback)(async()=>{try{let e=await y.getAddressDetailsView();return null==p||p(e),e}catch(e){throw null==h||h(e),e}},[y,p,h]),w=(0,A.useCallback)(e=>{m({type:"SET_SELECTED_ADDRESS_TYPE",payload:e})},[m]),P=(0,A.useCallback)(async e=>{try{let e=await I();m({type:"SET_ADDRESS_DETAILS_VIEW",payload:e}),m({type:"SET_MODE",payload:z.SELECT_PLACE_TYPE})}catch(e){throw e}},[I,m]),j=(0,A.useCallback)(()=>{m({type:"GO_BACK"})},[m]),O=(0,A.useCallback)(e=>{m({type:"GO_TO_MODE",payload:e})},[m]),k=(0,A.useCallback)((e,t)=>{m({type:"UPDATE_DELIVERY_PREFERENCE",payload:{optionId:e,subOptionId:t}})},[m]),R=(0,A.useCallback)((e,t)=>{m({type:"UPDATE_DELIVERY_INSTRUCTIONS",payload:{optionId:e,instructions:t}})},[m]),M=(0,A.useCallback)((e,t)=>{m({type:"SAVE_DRAFT_PIN_COORDS",payload:{lat:e,lng:t}})},[m]),F=(0,A.useCallback)(()=>{m({type:"REVERT_DRAFT_PIN_COORDS"})},[m]),N=(0,A.useCallback)(()=>{m({type:"SAVE_ADJUST_PIN_COORDS"})},[m]),B=(0,A.useMemo)(()=>({state:f,dispatch:m,setMode:b,goBack:j,goToMode:O,createAddress:v,editAddress:S,selectAddress:C,setAsDefault:T,removeAddress:D,getOrCreateAddress:x,getAutocompletePredictions:L,getAddressDetailsView:I,setSelectedAddressType:w,onSelectAddressForCreate:P,updateDeliveryPreference:k,updateDeliveryInstructions:R,saveDraftPinCoords:M,revertDraftPinCoords:F,saveAdjustPinCoords:N}),[f,m,b,j,O,v,S,C,T,D,x,L,I,w,P,k,R,M,F,N]);return(0,g.jsx)(K.Provider,{value:B,children:t})},X=()=>{let e=(0,A.useContext)(K);if(void 0===e)throw Error("useAddressPicker must be used within an AddressPickerProvider");return e};var ee=i(371801),et=i(992899),ei=i(818617),es=i(685393),ea=i(806286),eo=i(425815),ed=i(655692),el=i(314948),en=i(356805),er=i(23644),ec=i(576263),eu=i(686143),e_=i(374856);let ep=e=>{let{isSelected:t}=e;return t?(0,g.jsx)(es.Z,{type:ea.IconType.RadioOnCircleFill,color:et.Q2.usage.color.action.primary.default}):(0,g.jsx)(es.Z,{type:ea.IconType.RadioOffCircleLine,color:et.Q2.usage.color.icon.default})};var eh=e=>{let{address:t,isSelected:i,showEditButton:s,isLoading:a,onSelect:o,onEdit:d}=e,l=t.formattedAddressSegmentedList[0],n=t.formattedAddressSegmentedList[1];return(0,g.jsx)(eo.V,{leadingContent:(0,g.jsx)(ep,{isSelected:i}),onClick:()=>{o()},label:l,description:n,trailingContent:a?(0,g.jsx)(ee.Z,{size:ed.wM.xxSmall,children:(0,g.jsx)(el.g,{size:en.E$.small})}):s?(0,g.jsx)(er.Z,{tag:"div",type:ec.L$.plain,accessibilityLabel:"Edit address",iconType:ea.IconType.EditLine,onClick:e=>{e.stopPropagation(),d()},size:eu.rm.small,"data-testid":"".concat(e_.D.AddressListItem,"-edit-").concat(t.id)}):null})},ef=i(360968),em=i(258198);let eg=e=>({id:e.id,formattedAddressSegmentedList:e.formattedAddressSegmentedList,formattedAddressSegmentedNonUserEditableFieldsList:e.formattedAddressSegmentedNonUserEditableFieldsList,shortname:e.shortname,subpremise:e.subpremise,city:e.city,state:e.state,country:e.country,countryCode:e.countryCode,timezone:e.timezone,lat:e.lat,lng:e.lng,manualLat:e.manualLat,manualLng:e.manualLng,addressId:e.addressId,buildingName:e.buildingName,zipCode:e.zipCode,entryCode:e.entryCode,personalAddressLabel:e.personalAddressLabel,street:e.street,printableAddress:e.printableAddress,districtId:e.districtId,addressLinkType:e.addressLinkType});var eb=i(972173);let eC={AddressList:"address-list",AddressSearch:"address-search",AddressTypeSelector:"address-type-selector",AddressDetailsFields:"address-details-fields",DeliveryPreferencesSelector:"delivery-preferences-selector",AdjustPinMap:"adjust-pin-map"};var eE=i(372703),ey=i(363856),eA=i(731690),ev=i(13794);let eS=e=>{let{getAutocompletePredictions:t}=X();return(0,ev.useQuery)({queryKey:["autocomplete",e],queryFn:()=>t(e),enabled:e.trim().length>0})};var eT=i(437461),eD=i(82875),ex=i(280427),eL=i(455277),eI=i(161206),ew=i(901270),eP=i(918564),ej=i(196421);let eO=et.Q2.usage.space.medium,ek=eP.default.div.withConfig({componentId:"sc-d245a30e-0"})(["",""],e=>{let{shouldModalBodyOffset:t}=e;return t&&"\n        margin-left: calc(".concat(eO," * -1);\n        margin-right: calc(").concat(eO," * -1);\n        margin-bottom: calc(").concat(eO," * -1);\n    ")}),eR=eP.default.div.withConfig({componentId:"sc-d245a30e-1"})(["width:100%;border-style:solid;border-radius:",";box-shadow:",";border-width:0;background-color:",";cursor:pointer;&:hover{box-shadow:0 0 0 "," ",";background-color:transparent;}&:focus{outline:none;box-shadow:0 0 0 "," ",";}"],et.Q2.usage.borderRadius.large,e=>{let{isToggled:t}=e;return t?"0 0 0 ".concat(et.Q2.usage.borderWidth.strong," ").concat(et.Q2.usage.color.border.selected):"0 0 0 ".concat(et.Q2.usage.borderWidth.default," ").concat(et.Q2.usage.color.border.strong.default)},et.Q2.usage.color.background.default,et.Q2.usage.borderWidth.strong,et.Q2.usage.color.border.selected,et.Q2.usage.borderWidth.strong,et.Q2.usage.color.border.selected),eM=(0,eP.default)(ej.Z).withConfig({componentId:"sc-d245a30e-2"})(["padding:",";border-style:solid;border-radius:",";box-shadow:",";border-width:0;background-color:",";cursor:pointer;&:hover{box-shadow:0 0 0 "," ",";background-color:transparent;}&:focus{outline:none;box-shadow:0 0 0 "," ",";}"],et.Q2.usage.space.medium,et.Q2.usage.borderRadius.large,e=>{let{isToggled:t}=e;return t?"0 0 0 ".concat(et.Q2.usage.borderWidth.strong," ").concat(et.Q2.usage.color.border.selected):"0 0 0 ".concat(et.Q2.usage.borderWidth.default," ").concat(et.Q2.usage.color.border.strong.default)},et.Q2.usage.color.background.default,et.Q2.usage.borderWidth.strong,et.Q2.usage.color.border.selected,et.Q2.usage.borderWidth.strong,et.Q2.usage.color.border.selected),eF=eP.default.div.withConfig({componentId:"sc-d245a30e-3"})(["display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;gap:",";"],et.Q2.usage.space.small);var eN=i(959956),eB=i(723280),eU=i(292042),eH=i(521427),eY=i(40582),eV=i(249478);let eZ=eP.default.div.withConfig({componentId:"sc-4398c054-0"})([""]),eG=eP.default.div.withConfig({componentId:"sc-4398c054-1"})(["display:flex;flex-direction:row;gap:",";margin-top:",";@media (max-width:","px){flex-direction:column;}"],et.Q2.usage.space.medium,et.Q2.usage.space.xSmall,eU.u3.mobile),eQ=eP.default.div.withConfig({componentId:"sc-4398c054-2"})(["width:18px;display:flex;flex-direction:column;justify-content:center;"]),eW=eP.default.div.withConfig({componentId:"sc-4398c054-3"})(["margin-top:",";"],et.Q2.usage.space.xSmall),ez=eP.default.div.withConfig({componentId:"sc-4398c054-4"})(["margin-top:",";"],et.Q2.usage.space.medium);var eJ=i(163465),eK=i(262679),e$=i(608334),eq=i(538626),eX=i(530423),e2=i(223449),e0=i(3746),e1=i(14389),e3=i(290866),e4=i(953655),e8=i(684289),e7=i(600906);let e9=eP.default.div.withConfig({componentId:"sc-9148f09b-0"})(["margin-bottom:40px;"]),e5=eP.default.div.withConfig({componentId:"sc-9148f09b-1"})(["position:absolute;top:0;left:0;width:100%;height:100%;> div{width:100%;}"]);var e6=e=>{let{isTooltipVisible:t,tooltipContent:i}=e;return(0,g.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",position:"absolute"},children:(0,g.jsx)(e4.Z,{size:e8.O.small,position:y.eW.topCenter,content:i,isVisible:t,contentDisplayMode:e7.Jx.flex,boundariesElement:y.Q$.scrollParent,children:()=>(0,g.jsx)(e9,{})})})};let te='<svg width="48" height="52" viewBox="0 0 48 52" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.2" filter="url(%23filter0_f_4002_33502)"><path d="M27.5087 44.0507C34.6575 43.3398 40 40.5028 40 37.1111C40 33.1838 32.8366 30 24 30C15.1634 30 8 33.1838 8 37.1111C8 40.4998 13.3331 43.3349 20.4725 44.0488L22.1525 45.0123L24 46L27.5087 44.0507Z" fill="%23191919" fill-opacity="0.5"/></g><g filter="url(%23filter1_d_4002_33502)"><path d="M27.5087 37.6141C34.6575 36.0146 40 29.6312 40 22C40 13.1634 32.8366 6 24 6C15.1634 6 8 13.1634 8 22C8 29.6246 13.3332 36.0035 20.4726 37.6099L22.1525 39.7778L24 42L27.5087 37.6141Z" fill="%23191919"/></g><path d="M17.038 18.4423L22.5658 14.4632C23.4236 13.8456 24.5763 13.8456 25.4343 14.4632L30.9619 18.4423C32.7836 19.7536 32.048 22.5414 29.9939 22.9117L29.9999 27.5C29.9999 28.89 28.8759 30 27.4964 30H25.9999V25C25.9999 23.8954 25.1045 23 23.9999 23C22.8954 23 21.9999 23.8954 21.9999 25V30H20.5035C19.1242 30 18.006 28.873 18.006 27.4831V22.9117C15.9519 22.5414 15.2163 19.7536 17.038 18.4423Z" fill="white"/><defs><filter id="filter0_f_4002_33502" x="4" y="26" width="40" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur stdDeviation="2" result="effect1_foregroundBlur_4002_33502"/></filter><filter id="filter1_d_4002_33502" x="0" y="0" width="48" height="52" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="2"/><feGaussianBlur stdDeviation="4"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix type="matrix" values="0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0.2 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4002_33502"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4002_33502" result="shape"/></filter></defs></svg>',tt='<svg width="48" height="52" viewBox="0 0 48 52" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.2" filter="url(%23filter0_f_4002_24545)"><path d="M27.5087 44.0507C34.6575 43.3398 40 40.5028 40 37.1111C40 33.1838 32.8366 30 24 30C15.1634 30 8 33.1838 8 37.1111C8 40.4998 13.3331 43.3349 20.4725 44.0488L22.1525 45.0123L24 46L27.5087 44.0507Z" fill="%23191919" fill-opacity="0.5"/></g><g filter="url(%23filter1_d_4002_24545)"><path d="M27.5087 37.6141C34.6575 36.0146 40 29.6312 40 22C40 13.1634 32.8366 6 24 6C15.1634 6 8 13.1634 8 22C8 29.6246 13.3332 36.0035 20.4726 37.6099L22.1525 39.7778L24 42L27.5087 37.6141Z" fill="%23191919"/></g><path fill-rule="evenodd" clip-rule="evenodd" d="M17 17C17 15.3431 18.3431 14 20 14H24C25.6569 14 27 15.3431 27 17H29C30.6569 17 32 18.3431 32 20V27C32 28.6569 30.6569 30 29 30H26V27.5C26 26.6716 25.3284 26 24.5 26C23.6716 26 23 26.6716 23 27.5V30H20C18.3431 30 17 28.6569 17 27V17ZM21 17.5C21 17.2239 21.2239 17 21.5 17H22.5C22.7761 17 23 17.2239 23 17.5V18.5C23 18.7761 22.7761 19 22.5 19H21.5C21.2239 19 21 18.7761 21 18.5V17.5ZM21 22.5C21 22.2239 21.2239 22 21.5 22H22.5C22.7761 22 23 22.2239 23 22.5V23.5C23 23.7761 22.7761 24 22.5 24H21.5C21.2239 24 21 23.7761 21 23.5V22.5ZM26.5 22C26.2239 22 26 22.2239 26 22.5V23.5C26 23.7761 26.2239 24 26.5 24H27.5C27.7761 24 28 23.7761 28 23.5V22.5C28 22.2239 27.7761 22 27.5 22H26.5Z" fill="white"/><defs><filter id="filter0_f_4002_24545" x="4" y="26" width="40" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur stdDeviation="2" result="effect1_foregroundBlur_4002_24545"/></filter><filter id="filter1_d_4002_24545" x="0" y="0" width="48" height="52" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="2"/><feGaussianBlur stdDeviation="4"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix type="matrix" values="0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0.2 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4002_24545"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4002_24545" result="shape"/></filter></defs></svg>',ti='<svg width="48" height="52" viewBox="0 0 48 52" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.2" filter="url(%23filter0_f_4002_28033)"><path d="M27.5087 44.0507C34.6575 43.3398 40 40.5028 40 37.1111C40 33.1838 32.8366 30 24 30C15.1634 30 8 33.1838 8 37.1111C8 40.4998 13.3331 43.3349 20.4725 44.0488L22.1525 45.0123L24 46L27.5087 44.0507Z" fill="%23191919" fill-opacity="0.5"/></g><g filter="url(%23filter1_d_4002_28033)"><path d="M27.5087 37.6141C34.6575 36.0146 40 29.6312 40 22C40 13.1634 32.8366 6 24 6C15.1634 6 8 13.1634 8 22C8 29.6246 13.3332 36.0035 20.4726 37.6099L22.1525 39.7778L24 42L27.5087 37.6141Z" fill="%23191919"/></g><path fill-rule="evenodd" clip-rule="evenodd" d="M25.4233 18.4748C25.4731 18.3256 25.5 18.1659 25.5 18C25.5 17.1716 24.8284 16.5 24 16.5C23.1716 16.5 22.5 17.1716 22.5 18C22.5 18.1659 22.5269 18.3256 22.5767 18.4748C19.4974 19.1108 17.1576 21.7694 17.0076 25H17C16.4477 25 16 25.4477 16 26C16 26.5523 16.4477 27 17 27H31C31.5523 27 32 26.5523 32 26C32 25.4477 31.5523 25 31 25H30.9924C30.8424 21.7694 28.5026 19.1108 25.4233 18.4748ZM23.0001 22.33C22.3968 22.33 21.8569 22.5958 21.4887 23.0201C21.1267 23.4372 20.4951 23.4819 20.078 23.1199C19.6609 22.758 19.6162 22.1264 19.9781 21.7093C20.71 20.8659 21.793 20.33 23.0001 20.33C23.5523 20.33 24.0001 20.7777 24.0001 21.33C24.0001 21.8823 23.5523 22.33 23.0001 22.33Z" fill="white"/><defs><filter id="filter0_f_4002_28033" x="4" y="26" width="40" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur stdDeviation="2" result="effect1_foregroundBlur_4002_28033"/></filter><filter id="filter1_d_4002_28033" x="0" y="0" width="48" height="52" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="2"/><feGaussianBlur stdDeviation="4"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix type="matrix" values="0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0.2 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4002_28033"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4002_28033" result="shape"/></filter></defs></svg>',ts='<svg width="48" height="52" viewBox="0 0 48 52" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.2" filter="url(%23filter0_f_4002_25179)"><path d="M27.5087 44.0507C34.6575 43.3398 40 40.5028 40 37.1111C40 33.1838 32.8366 30 24 30C15.1634 30 8 33.1838 8 37.1111C8 40.4998 13.3331 43.3349 20.4725 44.0488L22.1525 45.0123L24 46L27.5087 44.0507Z" fill="%23191919" fill-opacity="0.5"/></g><g filter="url(%23filter1_d_4002_25179)"><path d="M27.5087 37.6141C34.6575 36.0146 40 29.6312 40 22C40 13.1634 32.8366 6 24 6C15.1634 6 8 13.1634 8 22C8 29.6246 13.3332 36.0035 20.4726 37.6099L22.1525 39.7778L24 42L27.5087 37.6141Z" fill="%23191919"/></g><path d="M20 18.8C20 18.52 20 18.38 20.0545 18.273C20.1024 18.179 20.1789 18.1025 20.273 18.0545C20.38 18 20.52 18 20.8 18H21.2C21.48 18 21.62 18 21.727 18.0545C21.8211 18.1025 21.8976 18.179 21.9455 18.273C22 18.38 22 18.52 22 18.8V19.2C22 19.4801 22 19.6201 21.9455 19.727C21.8976 19.8211 21.8211 19.8976 21.727 19.9455C21.62 20 21.48 20 21.2 20H20.8C20.52 20 20.38 20 20.273 19.9455C20.1789 19.8976 20.1024 19.8211 20.0545 19.727C20 19.6201 20 19.4801 20 19.2V18.8Z" fill="white"/><path d="M20.0545 22.273C20 22.38 20 22.52 20 22.8V23.2C20 23.4801 20 23.6201 20.0545 23.727C20.1024 23.8211 20.1789 23.8976 20.273 23.9455C20.38 24 20.52 24 20.8 24H21.2C21.48 24 21.62 24 21.727 23.9455C21.8211 23.8976 21.8976 23.8211 21.9455 23.727C22 23.6201 22 23.4801 22 23.2V22.8C22 22.52 22 22.38 21.9455 22.273C21.8976 22.179 21.8211 22.1025 21.727 22.0545C21.62 22 21.48 22 21.2 22H20.8C20.52 22 20.38 22 20.273 22.0545C20.1789 22.1025 20.1024 22.179 20.0545 22.273Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.5537 30C19.3155 30.0001 19.031 30.0002 18.7804 29.9798C18.4899 29.956 18.0739 29.8951 17.6381 29.673C17.0736 29.3854 16.6146 28.9265 16.327 28.362C16.1049 27.9261 16.044 27.5101 16.0203 27.2197C15.9998 26.969 15.9999 26.6845 16 26.4463V17.5537C15.9999 17.3155 15.9998 17.031 16.0203 16.7804C16.044 16.4899 16.1049 16.0739 16.327 15.6381C16.6146 15.0736 17.0736 14.6146 17.6381 14.327C18.0739 14.1049 18.4899 14.044 18.7804 14.0203C19.031 13.9998 19.3155 13.9999 19.5537 14H22.4463C22.6845 13.9999 22.969 13.9998 23.2197 14.0203C23.5101 14.044 23.9261 14.1049 24.362 14.327C24.9265 14.6146 25.3854 15.0736 25.673 15.6381C25.8951 16.0739 25.956 16.4899 25.9798 16.7804C26.0002 17.031 26.0001 17.3155 26 17.5537L26 20H28.8C29.9201 20 30.4802 20 30.908 20.218C31.2843 20.4098 31.5903 20.7157 31.782 21.092C32 21.5199 32 22.0799 32 23.2V26.8C32 27.9201 32 28.4802 31.782 28.908C31.5903 29.2843 31.2843 29.5903 30.908 29.782C30.4802 30 29.9201 30 28.8 30L19.5537 30ZM24 28H22V26.8C22 26.52 22 26.38 21.9455 26.273C21.8976 26.179 21.8211 26.1025 21.727 26.0545C21.62 26 21.48 26 21.2 26H20.8C20.52 26 20.38 26 20.273 26.0545C20.1789 26.1025 20.1024 26.179 20.0545 26.273C20 26.38 20 26.52 20 26.8V28H19.6C19.04 28 18.7599 28 18.546 27.891C18.3579 27.7952 18.2049 27.6422 18.109 27.454C18 27.2401 18 26.9601 18 26.4V17.6C18 17.04 18 16.7599 18.109 16.546C18.2049 16.3579 18.3579 16.2049 18.546 16.109C18.7599 16 19.04 16 19.6 16H22.4C22.9601 16 23.2401 16 23.454 16.109C23.6422 16.2049 23.7952 16.3579 23.891 16.546C24 16.7599 24 17.04 24 17.6L24 28ZM27.0545 22.273C27 22.38 27 22.52 27 22.8V23.2C27 23.4801 27 23.6201 27.0545 23.727C27.1024 23.8211 27.1789 23.8976 27.273 23.9455C27.38 24 27.52 24 27.8 24H28.2C28.48 24 28.62 24 28.727 23.9455C28.8211 23.8976 28.8976 23.8211 28.9455 23.727C29 23.6201 29 23.4801 29 23.2V22.8C29 22.52 29 22.38 28.9455 22.273C28.8976 22.179 28.8211 22.1025 28.727 22.0545C28.62 22 28.48 22 28.2 22H27.8C27.52 22 27.38 22 27.273 22.0545C27.1789 22.1025 27.1024 22.179 27.0545 22.273ZM27 26.8C27 26.52 27 26.38 27.0545 26.273C27.1024 26.179 27.1789 26.1025 27.273 26.0545C27.38 26 27.52 26 27.8 26H28.2C28.48 26 28.62 26 28.727 26.0545C28.8211 26.1025 28.8976 26.179 28.9455 26.273C29 26.38 29 26.52 29 26.8V27.2C29 27.4801 29 27.6201 28.9455 27.727C28.8976 27.8211 28.8211 27.8976 28.727 27.9455C28.62 28 28.48 28 28.2 28H27.8C27.52 28 27.38 28 27.273 27.9455C27.1789 27.8976 27.1024 27.8211 27.0545 27.727C27 27.6201 27 27.4801 27 27.2V26.8Z" fill="white"/><defs><filter id="filter0_f_4002_25179" x="4" y="26" width="40" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur stdDeviation="2" result="effect1_foregroundBlur_4002_25179"/></filter><filter id="filter1_d_4002_25179" x="0" y="0" width="48" height="52" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="2"/><feGaussianBlur stdDeviation="4"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix type="matrix" values="0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0.2 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4002_25179"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4002_25179" result="shape"/></filter></defs></svg>',ta='<svg width="48" height="52" viewBox="0 0 48 52" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.2" filter="url(%23filter0_f_4002_33424)"><path d="M27.5087 44.0507C34.6575 43.3398 40 40.5028 40 37.1111C40 33.1838 32.8366 30 24 30C15.1634 30 8 33.1838 8 37.1111C8 40.4998 13.3331 43.3349 20.4725 44.0488L22.1525 45.0123L24 46L27.5087 44.0507Z" fill="%23191919" fill-opacity="0.5"/></g><g filter="url(%23filter1_d_4002_33424)"><path d="M27.5087 37.6141C34.6575 36.0146 40 29.6312 40 22C40 13.1634 32.8366 6 24 6C15.1634 6 8 13.1634 8 22C8 29.6246 13.3332 36.0035 20.4726 37.6099L22.1525 39.7778L24 42L27.5087 37.6141Z" fill="%23191919"/></g><path fill-rule="evenodd" clip-rule="evenodd" d="M24 30C24.5713 30 25.1153 29.7557 25.4948 29.3287L25.4975 29.3257L25.5016 29.321L25.5142 29.3068L25.5559 29.2589C25.5908 29.2187 25.6397 29.1618 25.7006 29.0897C25.8221 28.9455 25.9921 28.7399 26.1944 28.4838C26.5973 27.9738 27.1368 27.2533 27.6798 26.4129C28.6943 24.8429 30 22.4413 30 20.1193C30 16.7955 27.3687 14 24 14C20.6313 14 18 16.7955 18 20.1193C18 22.4413 19.3057 24.8429 20.3202 26.4129C20.8632 27.2533 21.4027 27.9738 21.8056 28.4838C22.0079 28.7399 22.1779 28.9455 22.2994 29.0897C22.3603 29.1618 22.4092 29.2187 22.4441 29.2589L22.4858 29.3068L22.4984 29.321L22.5025 29.3257L22.5052 29.3287C22.8847 29.7557 23.4287 30 24 30ZM24 22C25.1046 22 26 21.1046 26 20C26 18.8954 25.1046 18 24 18C22.8954 18 22 18.8954 22 20C22 21.1046 22.8954 22 24 22Z" fill="white"/><defs><filter id="filter0_f_4002_33424" x="4" y="26" width="40" height="24" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur stdDeviation="2" result="effect1_foregroundBlur_4002_33424"/></filter><filter id="filter1_d_4002_33424" x="0" y="0" width="48" height="52" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="2"/><feGaussianBlur stdDeviation="4"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix type="matrix" values="0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0 0.0980392 0 0 0 0.2 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_4002_33424"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_4002_33424" result="shape"/></filter></defs></svg>',to={HOUSE:{defaultIcon:{icon:"data:image/svg+xml;utf-8, ".concat(te),width:48,height:52,anchor:{width:24,height:40}},selectedIcon:{icon:"data:image/svg+xml;utf-8, ".concat(te),width:48,height:52,anchor:{width:24,height:40}},hoverIcon:{icon:"data:image/svg+xml;utf-8, ".concat(te),width:48,height:52,anchor:{width:24,height:40}}},APARTMENT:{defaultIcon:{icon:"data:image/svg+xml;utf-8, ".concat(tt),width:48,height:52,anchor:{width:24,height:40}},selectedIcon:{icon:"data:image/svg+xml;utf-8, ".concat(tt),width:48,height:52,anchor:{width:24,height:40}},hoverIcon:{icon:"data:image/svg+xml;utf-8, ".concat(tt),width:48,height:52,anchor:{width:24,height:40}}},HOTEL:{defaultIcon:{icon:"data:image/svg+xml;utf-8, ".concat(ti),width:48,height:52,anchor:{width:24,height:40}},selectedIcon:{icon:"data:image/svg+xml;utf-8, ".concat(ti),width:48,height:52,anchor:{width:24,height:40}},hoverIcon:{icon:"data:image/svg+xml;utf-8, ".concat(ti),width:48,height:52,anchor:{width:24,height:40}}},OFFICE:{defaultIcon:{icon:"data:image/svg+xml;utf-8, ".concat(ts),width:48,height:52,anchor:{width:24,height:40}},selectedIcon:{icon:"data:image/svg+xml;utf-8, ".concat(ts),width:48,height:52,anchor:{width:24,height:40}},hoverIcon:{icon:"data:image/svg+xml;utf-8, ".concat(ts),width:48,height:52,anchor:{width:24,height:40}}},OTHER:{defaultIcon:{icon:"data:image/svg+xml;utf-8, ".concat(ta),width:48,height:52,anchor:{width:24,height:40}},selectedIcon:{icon:"data:image/svg+xml;utf-8, ".concat(ta),width:48,height:52,anchor:{width:24,height:40}},hoverIcon:{icon:"data:image/svg+xml;utf-8, ".concat(ta),width:48,height:52,anchor:{width:24,height:40}}}};var td=i(621363),tl=i.n(td);let tn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return e>t},tr=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,s={latitude:t.lat,longitude:t.lng},a={latitude:e.lat,longitude:e.lng};return!tn(tl()(a,s,{unit:"meter"}),i)},tc=e=>"distance_validation"in e&&"tooltip_message"in e,tu=e=>"house-map-pin"===e?to.HOUSE:"apartment-map-pin"===e?to.APARTMENT:"hotel-map-pin"===e?to.HOTEL:"office-map-pin"===e?to.OFFICE:to.OTHER;var t_=e=>{var t,i;let{isEditing:s=!1,mapPin:a,onChangePinCoords:o,onChangePinCoordsBack:d}=e,[l,n]=A.useState(!1),[r,c]=A.useState(!0),[u]=A.useState({lat:a.lat,lng:a.lng}),[_,p]=A.useState({lat:a.lat,lng:a.lng}),h=(null===(t=(0,e0.Zt)(et.Q2.usage.color.dashpass.default))||void 0===t?void 0:t.slice(0,7))||"#00838A",f=(null===(i=(0,e0.Zt)(et.Q2.usage.color.dashpass.default))||void 0===i?void 0:i.slice(0,7))||"#00838A",m=A.useMemo(()=>[(0,g.jsx)(e$.ZP,{position:_,mapMarkerType:eq.S.CUSTOM,customIcon:tu(a.icon),label:a.label,labelTextStyle:{fontSize:"".concat(et.Q2.usage.fontSize.xxSmall),fontWeight:"".concat(et.Q2.usage.fontWeight.strong),marginTop:"-2px"},lockToCenter:s},a.label)],[a,s,_]),b=A.useMemo(()=>s&&tc(a)?(0,g.jsx)(eX.Z,{center:{lat:a.distance_validation.centered_at_point.lat,lng:a.distance_validation.centered_at_point.lng},radiusInMeters:a.distance_validation.max_movable_distance_meters,strokeColor:h,fillColor:f}):null,[h,f,a,s]),C=A.useMemo(()=>s&&tc(a)?(0,g.jsx)(e6,{isTooltipVisible:r,tooltipContent:a.tooltip_message}):null,[a,r,s]),{displayToast:E}=(0,e1.p)();return(0,g.jsxs)(g.Fragment,{children:[C,(0,g.jsx)(e5,{children:(0,g.jsxs)(e2.Z,{bounds:[{lat:u.lat,lng:u.lng}],mapOptions:{onDragEnd:(e,t)=>{tc(a)&&(tr(e,a.distance_validation.centered_at_point)?(p(e),o(e.lat,e.lng)):(p({lat:u.lat+1e-8,lng:u.lng+1e-8}),null==t||t.panTo(u),E({duration:e3.O.short,text:a.distance_validation.pin_distance_validation_error_message,insetFromEdge:ed.wM.small}),d()))},onLoad:()=>{if(l){(0,v.j)("mapview_exp_map_load_repeated",{provider:"mapbox",source:s?"adjust_address_pin_map":"edit_address_minimap"});return}(0,v.j)("mapview_exp_map_load",{provider:"mapbox",source:s?"adjust_address_pin_map":"edit_address_minimap"}),n(!0)},onStyleLoad:()=>{(0,v.j)("mapview_exp_map_style_loaded",{provider:"mapbox",annotation_id:"map_pin_icon",initial_camera_lat:u.lat,initial_camera_lng:u.lng,initial_camera_zoom:14})},onError:(e,t)=>{(0,v.j)("mapview_exp_map_load_error",{provider:"mapbox",source:s?"adjust_address_pin_map":"edit_address_minimap",erorr_type:e,internal_message:t}),(0,eK.eN)({level:"error",message:t,tags:{is_honeybee:!0,errorName:e}})},onIdle:()=>{(0,v.j)("mapview_exp_map_idle",{provider:"mapbox"})},onDragStart:()=>{(0,v.j)("mapview_exp_map_gesture_started",{provider:"mapbox"}),c(!1)}},accessToken:void 0,children:[b,m]})})]})};let tp=eP.default.div.withConfig({componentId:"sc-b3aa3c8e-0"})(["display:flex;flex-direction:column;width:100%;"]),th=eP.default.div.withConfig({componentId:"sc-b3aa3c8e-1"})(["position:relative;width:100%;height:",";overflow:hidden;border-radius:",";"],e=>e.isCompact?"142px":"542px",et.Q2.usage.borderRadius.large),tf=eP.default.div.withConfig({componentId:"sc-b3aa3c8e-2"})(["position:absolute;bottom:",";left:50%;transform:translateX(-50%);"],et.Q2.usage.space.medium);var tm={Root:e=>{let{initialMode:t=z.DEFAULT,apiOverrides:i,reducer:s,onAddAddress:a,onAddAddressError:o,onEditAddress:d,onEditAddressError:l,onRemoveAddress:n,onRemoveAddressError:r,onSetDefaultAddress:c,onSetDefaultAddressError:u,children:_}=e;return(0,g.jsx)(q,{initialMode:t,apiOverrides:i,reducer:s,onAddAddress:a,onAddAddressError:o,onEditAddress:d,onEditAddressError:l,onRemoveAddress:n,onRemoveAddressError:r,onSetDefaultAddress:c,onSetDefaultAddressError:u,children:_})},Content:e=>{let{renderDefault:t,renderSelectPlaceType:i,renderEdit:s,renderAdjustPin:a,renderSetLabel:o}=e,{mode:d}=X().state;switch(d){case z.DEFAULT:default:return(0,g.jsx)(g.Fragment,{children:t||(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(tm.Search,{}),(0,g.jsx)(tm.List,{})]})});case z.SELECT_PLACE_TYPE:return(0,g.jsx)(g.Fragment,{children:i||(0,g.jsx)(tm.AddressTypeSelector,{})});case z.EDIT:case z.CREATE:return(0,g.jsx)(g.Fragment,{children:s||(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(tm.DetailsFields,{}),(0,g.jsx)(ee.Z,{size:et.Q2.usage.space.xSmall}),(0,g.jsx)(tm.AdjustPinMap,{}),(0,g.jsx)(ee.Z,{size:et.Q2.usage.space.xSmall}),(0,g.jsx)(tm.DeliveryPreferenceSelector,{})]})});case z.ADJUST_PIN:return(0,g.jsx)(g.Fragment,{children:a||(0,g.jsx)(tm.AdjustPinMap,{})});case z.SET_LABEL:return(0,g.jsx)(g.Fragment,{children:o||(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{children:"Set Address Label"}),(0,g.jsx)("p",{children:"This mode will show options to set an address label."})]})})}},List:e=>{let{showEditButton:t=!0,trackingSource:i}=e,s=(0,em.W)(),{setAsDefault:a,selectAddress:o}=X(),[d,l]=(0,A.useState)(null),n=(0,A.useMemo)(()=>s&&s.availableAddresses?s.availableAddresses.filter(eb.K).map(e=>eg(e)):[],[s]),r=(0,A.useMemo)(()=>{if(!s||!s.defaultAddress){var e;return(null===(e=n[0])||void 0===e?void 0:e.id)||""}return s.defaultAddress.id||""},[s,n]);A.useEffect(()=>{(0,v.j)(ef.wd.EnterAddressPageView,{num_saved_addresses:n.length,source:i})},[n.length,i]);let c=e=>{l(e),a(e).finally(()=>{l(null)})},u=e=>{o(e)};return(0,g.jsx)("div",{role:"radiogroup","data-anchor-id":ei.ep.AddressList,"data-testid":eC.AddressList,children:n.map(e=>(0,g.jsx)(eh,{address:e,isSelected:e.id===r,showEditButton:t,onSelect:()=>c(e.id),onEdit:()=>u(e.id),isLoading:d===e.id},e.id))})},Search:e=>{let{placeholder:t}=e,{onSelectAddressForCreate:i,setMode:s}=X(),[a,o]=A.useState(""),[d]=(0,eE.Z)(a,200),{data:l,isLoading:n,error:r}=eS(d),c=A.useMemo(()=>{if(n||void 0===l)return[];let e={id:void 0,onSelect:()=>{},label:(0,g.jsx)("div",{children:eA.ZP.t("addressPickerStrings_defaultNoMatchErrorMessage")}),hasSeparator:!1},t={id:"manual_entry_cta",label:eA.ZP.t("manualAddressEntry_description"),hasSeparator:!1};return r||0===l.length?[e,t]:l?[...l.map(e=>{var t,i;return{id:e.geo_address_id?"geo_address_id_".concat(e.geo_address_id):null!==(t=e.source_place_id)&&void 0!==t?t:void 0,label:null!==(i=e.formatted_address)&&void 0!==i?i:"",trailingIconType:ea.IconType.ChevronRight}}),t]:[e,t]},[n,l,r]);return(0,g.jsx)("div",{"data-testid":eC.AddressSearch,style:{padding:"0 ".concat(et.Q2.usage.space.medium," ").concat(et.Q2.usage.space.medium)},children:(0,g.jsx)(ey.Z,{fieldAccessibilityLabel:"Search for an address",fieldValue:a,fieldIconType:ea.IconType.Search,fieldProps:{placeholder:null!=t?t:eA.ZP.t("addressPickerStrings_defaultAutocompleteLabel")},onFieldValueChange:e=>{o(e)},onResultSelect:e=>{if(!e.selected)return;let{id:t}=e.selected;t&&("manual_entry_cta"===t?s(z.MANUAL_ENTRY):t.startsWith("geo_address_id_")||i(t))},results:c})})},AddressTypeSelector:()=>{var e;let{state:t,setSelectedAddressType:i}=X(),{addressDetailsView:s}=t,a=null==s?void 0:null===(e=s.address_types.options.find(e=>e.is_selected))||void 0===e?void 0:e.id,o=e=>{switch(e){case"house":return ea.IconType.HomeLine;case"apartment":return ea.IconType.ApartmentLine;case"hotel":return ea.IconType.ClocheLine;case"office":return ea.IconType.OfficeLine;default:return ea.IconType.LocationPinEnabledLine}};return s?(0,g.jsx)(eT.Z,{"data-testid":eC.AddressTypeSelector,externalMargin:et.Q2.usage.space.none,columnGutter:eD.HO.small,children:s.address_types.options.map(e=>(0,g.jsx)(ex.Z,{columnWidthDefault:eD.d9.third,columnWidthTablet:eD.d9.half,columnWidthMobile:eD.d9.half,children:(0,g.jsx)(eM,{type:ec.L$.plain,accessibilityLabel:"Select ".concat(e.label," address type"),onClick:()=>{i(e.id)},padding:ec.aV.none,isToggled:a===e.id,children:(0,g.jsxs)(eF,{children:[(0,g.jsx)(es.Z,{type:o(e.icon),size:eL.J.medium}),(0,g.jsx)(eI.x,{textStyle:ew.TextStyle.label.medium.default,children:e.label})]})},e.id)},e.id))}):null},DetailsFields:()=>{let{state:e,setSelectedAddressType:t}=X(),{addressDetailsView:i}=e;if(!i)return null;let s=i.address_types.options.find(e=>e.is_selected);if(!s)return null;let{fields:a}=s;return(0,g.jsxs)(eT.Z,{"data-testid":eC.AddressDetailsFields,externalMargin:et.Q2.usage.space.none,columnGutter:eD.HO.small,children:[(0,g.jsx)(ex.Z,{columnWidthDefault:eD.d9.full,columnWidthTablet:eD.d9.full,columnWidthMobile:eD.d9.full,children:(0,g.jsx)(eN.Z,{label:i.address_types.dropdown_label,value:s.id.toString(),onChange:e=>{t(Number(e))},options:i.address_types.options.map(e=>({name:e.label,value:e.id.toString()}))})}),a.map(e=>{let t="half"===e.box_size?eD.d9.half:eD.d9.full;return(0,g.jsx)(ex.Z,{columnWidthDefault:t,columnWidthTablet:t,columnWidthMobile:eD.d9.full,children:(0,g.jsx)(eB.Z,{id:e.key,name:e.key,label:e.label,value:e.value||"",placeholder:e.placeholder||"",onChange:()=>{},description:e.description,hint:e.hint})},e.key)})]})},DeliveryPreferenceSelector:()=>{let e,t;let{state:{addressDetailsView:i},updateDeliveryPreference:s,updateDeliveryInstructions:a}=X(),{isMobile:o}=(0,eV.ac)();if(!i)return null;let d=i.address_types.options.find(e=>e.is_selected);if(!d)return null;let{label:l,options:n}=d.dropoff_options_section,r=n.find(e=>e.is_selected),c=e=>{switch(e){case"door":default:return ea.IconType.ContactlessDeliveryLine;case"waving_hand":return ea.IconType.HandLine}};return n&&0!==n.length?(0,g.jsxs)(eZ,{"data-testid":eC.DeliveryPreferencesSelector,children:[(0,g.jsx)(eI.x,{textStyle:et.Q2.usage.type.label.medium.strong,children:l}),(0,g.jsx)(eG,{children:n.map(e=>(0,g.jsx)(eR,{isToggled:e.is_selected,children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(eo.V,{"data-testid":"option-".concat(e.option_id),onClick:()=>s(e.option_id),leadingContent:(0,g.jsx)(eQ,{children:(0,g.jsx)(es.Z,{type:c(e.icon),color:et.Q2.usage.color.icon.default,size:eL.J.medium})}),label:e.label,labelTextProps:{textStyle:et.Q2.usage.type.body.medium.strong},separator:eH.$A.none,isDisabled:e.is_disabled}),o&&e.sub_options.length>0&&(0,g.jsx)(g.Fragment,{children:e.sub_options.map(t=>(0,g.jsx)(eY.f,{onClick:()=>s(e.option_id,t.option_id),"data-testid":"sub-option-".concat(t.option_id),isDisabled:t.is_disabled,isSelected:t.is_selected,label:t.label,separator:eH.$A.none},t.option_id))})]})},e.option_id))}),!o&&r&&r.sub_options.length>0&&(0,g.jsx)(eW,{children:r.sub_options.map(e=>(0,g.jsx)(eY.f,{onClick:()=>s(r.option_id,e.option_id),"data-testid":"sub-option-".concat(e.option_id),isDisabled:e.is_disabled,isSelected:e.is_selected,label:e.label,separator:eH.$A.fullWidth},e.option_id))}),r&&r.instructions&&(e=r.instructions,t=r.option_id,(0,g.jsx)(ez,{children:(0,g.jsx)(eB.Z,{label:e.label,placeholder:e.placeholder,value:e.value||"",onChange:e=>a(t,e),"data-testid":"instructions-".concat(t),isMultiline:!0})}))]}):null},AdjustPinMap:()=>{var e;let{state:t,setMode:i,saveDraftPinCoords:s,revertDraftPinCoords:a}=X(),{addressDetailsView:o}=t,d=t.mode!==z.ADJUST_PIN,l=null==o?void 0:null===(e=o.address_types)||void 0===e?void 0:e.options.find(e=>e.is_selected),n=A.useMemo(()=>l?d?l.adjust_pin_mini_map.entrance_pin:l.adjust_pin_map.entrance_pin:null,[l,d]);return l&&n?(0,g.jsxs)(tp,{"data-testid":eC.AdjustPinMap,children:[d&&(0,g.jsx)(eI.x,{textStyle:et.Q2.usage.type.label.medium.strong,children:l.adjust_pin_mini_map.label}),(0,g.jsx)(eJ.Z,{setContainerAsAnchor:!0,toastLimit:1,children:(0,g.jsxs)(th,{isCompact:t.mode!==z.ADJUST_PIN,children:[(0,g.jsx)(t_,{mapPin:n,isEditing:t.mode===z.ADJUST_PIN,onChangePinCoords:s,onChangePinCoordsBack:a}),d&&(0,g.jsx)(tf,{children:(0,g.jsx)(ej.Z,{type:ec.L$.floating,onClick:()=>{i(z.ADJUST_PIN)},size:eu.qE.small,isInline:!0,children:l.adjust_pin_mini_map.action_label})})]})})]}):null}},tg=i(479422),tb=i(132866);let tC=e=>{let{state:t,setMode:i,goBack:s,saveAdjustPinCoords:a,revertDraftPinCoords:o}=X(),d={getTitleForMode:e=>{switch(e){case z.DEFAULT:default:return eA.ZP.t("addressPickerStrings_addresses");case z.EDIT:return eA.ZP.t("addressPickerStrings_addressDetails");case z.SELECT_PLACE_TYPE:return eA.ZP.t("addressPickerStrings_addressType");case z.ADJUST_PIN:return eA.ZP.t("addressPickerStrings_addressEditAdjustPin");case z.SET_LABEL:return eA.ZP.t("addressPickerStrings_chooseAddressToLabel")}},getSubtitleForMode:e=>{switch(e){case z.SELECT_PLACE_TYPE:case z.ADJUST_PIN:if(!t.addressDetailsView)return;return"".concat(t.addressDetailsView.formatted_address.non_editable.line_one," ").concat(t.addressDetailsView.formatted_address.non_editable.line_two);default:return}},getModalBodyOffsets:e=>e===z.DEFAULT,getPrimaryActionForMode:e=>{switch(e){case z.SELECT_PLACE_TYPE:return{content:eA.ZP.t("addressPickerStrings_addressAddNextButtonText"),onClick:()=>{i(z.EDIT)}};case z.EDIT:return{content:eA.ZP.t("addressPickerStrings_addressAddSaveButtonText"),onClick:()=>{}};case z.ADJUST_PIN:return{content:eA.ZP.t("addressPickerStrings_addressAddSaveButtonText"),onClick:()=>{a(),s()}};default:return}},getSecondaryActionForMode:e=>{switch(e){case z.SELECT_PLACE_TYPE:case z.EDIT:return{content:eA.ZP.t("addressPickerStrings_addressEditBackButtonText"),onClick:()=>{s()},buttonProps:{type:ec.L$.plain}};case z.ADJUST_PIN:return{content:eA.ZP.t("addressPickerStrings_addressEditCancel"),onClick:()=>{o(),s()},buttonProps:{type:ec.L$.plain}};default:return}},...e};return{title:d.getTitleForMode(t.mode),subtitle:d.getSubtitleForMode(t.mode),shouldModalBodyOffset:d.getModalBodyOffsets(t.mode),primaryAction:d.getPrimaryActionForMode(t.mode),secondaryAction:d.getSecondaryActionForMode(t.mode)}};var tE=i(789147),ty=i(948807),tA=i(242630),tv=i(885200),tS=e=>{let{isOpen:t,onClose:i}=e,{title:s,subtitle:a,primaryAction:o,secondaryAction:d,shouldModalBodyOffset:l}=tC(),{state:n,goBack:r,onSelectAddressForCreate:c,setMode:u}=X(),_=(0,tE.t)(),{getAddressCandidate:p,saveAddressCandidate:h}=(0,tA.y)(),f=new ty.l$(p,h),m=(0,S.KE)();return(0,g.jsxs)(tg.t,{children:[(0,g.jsx)(tb.i,{isOpen:t&&n.mode!==z.MANUAL_ENTRY,onOpenChange:()=>{u(z.DEFAULT),i()},title:s,subtitle:a,primaryAction:o,secondaryAction:d,children:(0,g.jsx)(ek,{shouldModalBodyOffset:l,children:(0,g.jsx)(tm.Content,{})})}),(0,g.jsx)(tb.i,{isOpen:t&&n.mode===z.MANUAL_ENTRY,title:"",onOpenChange:()=>{u(z.DEFAULT),i()},children:(0,g.jsx)(ek,{shouldModalBodyOffset:!0,children:(0,g.jsx)(ty.ZP,{addressEntryPoint:"addressEntryPoint",initialCountryCode:_,loading:!1,addressExperienceServiceProvider:f,labelConfigs:m,trackingEvents:tv.EK,onConfirmDropoffLocation:e=>{c(e.geo_address_id)},onBack:r})})})]})};let tT=e=>{let{isOpen:t,onClose:i,...s}=e;return(0,g.jsx)(tm.Root,{initialMode:(null==s?void 0:s.initialMode)||z.DEFAULT,apiOverrides:null==s?void 0:s.apiOverrides,reducer:null==s?void 0:s.reducer,onAddAddress:null==s?void 0:s.onAddAddress,onAddAddressError:null==s?void 0:s.onAddAddressError,onEditAddress:null==s?void 0:s.onEditAddress,onEditAddressError:null==s?void 0:s.onEditAddressError,onRemoveAddress:null==s?void 0:s.onRemoveAddress,onRemoveAddressError:null==s?void 0:s.onRemoveAddressError,onSetDefaultAddress:null==s?void 0:s.onSetDefaultAddress,onSetDefaultAddressError:null==s?void 0:s.onSetDefaultAddressError,children:(0,g.jsx)(tS,{isOpen:t,onClose:i})})};var tD=i(222679),tx=i(305017),tL=i(299891);let tI=()=>{let{isDoorDash:e,isCaviar:t}=(0,tL.Z)();return(0,tD.y)(tx.pc.enableAddressRedesign,!1)&&(e||t)},tw=["getSideNavDynamicTabs"];var tP=e=>{var t,i,s,a,o;let{renderBeforeAddressList:d,consumer:l,shouldShowAddressPicker:n,onAddressChange:r,addressText:c,refetchQueriesOnAddressUpdate:u,refetchQueries:_,isCurrentLocationEnabled:p=!1,isCurrentLocationSelected:h=!1,onClickCurrentLocation:f,shouldShowInfoPickerTooltip:m,shouldUseV2:w=!1}=e,P=null===(i=l.defaultAddress)||void 0===i?void 0:null===(t=i.personalAddressLabel)||void 0===t?void 0:t.labelIcon,j=(0,B.p)(),[O,U]=A.useState(!1),[H,Y]=A.useState(!1),{isAddressLabelEnabled:V}=(0,x.Z)(),Z=tI(),G=h&&V,Q=A.useCallback(e=>{Z?Y(!1):U(!1),null==r||r(e)},[r,Z]),W=()=>{var e;O?Q():Z?Y(!0):U(!0),(0,v.j)("m_homepage_tap_default_address",{delivery_address_id:(null==l?void 0:null===(e=l.defaultAddress)||void 0===e?void 0:e.id)||null})},z=k((null==j?void 0:j.id)||"",Q);A.useEffect(()=>{n&&U(!0)},[n]);let J=V&&!(null===(s=l.defaultAddress)||void 0===s?void 0:s.shortname),K=[...u||_||[],...tw];return Z?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(N.p,{shouldShowInfoPickerTooltip:m,children:(0,g.jsx)(M.d_,{children:(0,g.jsx)(R.ZP,{label:(0,F.ow)({addressTextProp:c,defaultAddress:l.defaultAddress,isAddressLabelEnabled:V}),accessabilityString:"",aria:"layout-address-picker",hideChevronIcon:J,onClick:W,shouldShowCurrentLocationIcon:G,isAddressLabelEnabled:V||w,hasNoDefaultAddressShortname:!(null===(a=l.defaultAddress)||void 0===a?void 0:a.shortname),addressLabelIcon:(0,S.at)(P,!0),shouldUseV2:w})})}),H&&(0,g.jsx)(tT,{isOpen:H,onClose:()=>Y(!1)})]}):V?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(N.p,{shouldShowInfoPickerTooltip:m,children:(0,g.jsx)(M.d_,{children:(0,g.jsx)(R.ZP,{label:(0,F.ow)({addressTextProp:c,defaultAddress:l.defaultAddress,isAddressLabelEnabled:V}),accessabilityString:"",aria:"layout-address-picker",hideChevronIcon:J,onClick:W,shouldShowCurrentLocationIcon:G,isAddressLabelEnabled:V||w,hasNoDefaultAddressShortname:!(null===(o=l.defaultAddress)||void 0===o?void 0:o.shortname),addressLabelIcon:(0,S.at)(P,!0),shouldUseV2:w})})}),O&&(0,g.jsx)(b.g,{children:(0,g.jsx)(D.default,{addressEntryPoint:"Common/Layout/Header/InfoPicker",onChange:z,customizations:{renderAutocompleteSuggestionsInAnchoredLayer:!0,hideAutoCompleteLabel:!0},renderBeforeAddressList:d?()=>d(U):void 0,refetchQueries:K,hasCloseButton:!0,isCurrentLocationEnabled:p,isCurrentLocationSelected:h,onClose:()=>U(!1),onClickCurrentLocation:f})})]}):(0,g.jsx)(M.Qd,{"data-testid":L.m.infoPicker,noMarginLeft:w,children:(0,g.jsx)(C.Z,{content:(0,g.jsx)(T.Z.Provider,{isEnabled:!1,children:(0,g.jsx)(M.xU,{id:"layout-address-picker",children:(0,g.jsx)(I.default,{consumer:l,handlePickerClose:Q,refetchQueries:K,renderBeforeAddressList:d?()=>d(U):void 0,isCurrentLocationEnabled:p,isCurrentLocationSelected:h,onClickCurrentLocation:()=>{null==f||f(),U(!1)}})})}),interactionType:E.p.controlled,isVisible:!!O,onVisibilityChange:e=>{U(e)},position:y.eW.bottomLeft,children:e=>{var t;let{describedBy:i}=e;return(0,g.jsx)(N.p,{shouldShowInfoPickerTooltip:m,children:(0,g.jsx)(R.ZP,{label:(0,F.ow)({addressTextProp:c,defaultAddress:l.defaultAddress,isAddressLabelEnabled:V}),accessabilityString:null!=i?i:"",aria:"layout-address-picker",hideChevronIcon:!1,onClick:W,shouldShowCurrentLocationIcon:G,isAddressLabelEnabled:V||w,hasNoDefaultAddressShortname:!(null===(t=l.defaultAddress)||void 0===t?void 0:t.shortname),addressLabelIcon:(0,S.at)(P,!0),shouldUseV2:w})})}})})}}}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="81b4caa2-d696-52e9-b254-d774ca530e27")}catch(e){}}()
//# debugId=81b4caa2-d696-52e9-b254-d774ca530e27
//# sourceMappingURL=46400-1566d8221b9bfbef.js.map

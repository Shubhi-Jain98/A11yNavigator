!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(self,(()=>(()=>{var e={30:(e,t,n)=>{var i=9007199254740991,r="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",s="[object Symbol]",c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")();function d(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function h(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}var f=Object.prototype,p=f.hasOwnProperty,g=f.toString,v=l.Symbol,m=f.propertyIsEnumerable,y=v?v.isConcatSpreadable:void 0,b=Math.max;function w(e,t,n,i,r){var o=-1,a=e.length;for(n||(n=I),r||(r=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?w(s,t-1,n,i,r):h(r,s):i||(r[r.length]=s)}return r}function I(e){return T(e)||function(e){return function(e){return A(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?g.call(e):"";return t==o||t==a}(e)}(e)}(e)&&p.call(e,"callee")&&(!m.call(e,"callee")||g.call(e)==r)}(e)||!!(y&&e&&e[y])}function E(e){if("string"==typeof e||function(e){return"symbol"==typeof e||A(e)&&g.call(e)==s}(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var T=Array.isArray;function A(e){return!!e&&"object"==typeof e}var S,D,P=(S=function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var a=t[i],s=e[a];n(s,a)&&(o[a]=s)}return o}(e=Object(e),t,(function(t,n){return n in e}))}(e,function(e,t){for(var n=-1,i=e?e.length:0,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}(w(t,1),E))},D=b(void 0===D?S.length-1:D,0),function(){for(var e=arguments,t=-1,n=b(e.length-D,0),i=Array(n);++t<n;)i[t]=e[D+t];t=-1;for(var r=Array(D+1);++t<D;)r[t]=e[t];return r[D]=i,d(S,this,r)});e.exports=P}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";var e,t,r;n.r(i),function(e){e.HORIZONTAL="HORIZONTAL",e.RECTANGLE="RECTANGLE",e.VERTICAL="VERTICAL",e.MOBILE="MOBILE",e.MOBILE_BIG="MOBILE_BIG",e.MOBILE_HORIZONTAL="MOBILE_HORIZONTAL",e.PORTRAIT="PORTRAIT",e.BILLBOARD="BILLBOARD"}(e||(e={})),function(e){e[e.Unknown=0]="Unknown",e[e.Ethernet=1]="Ethernet",e[e.WIFI=2]="WIFI",e[e.CellularNetworkUnknownGeneration=3]="CellularNetworkUnknownGeneration",e[e.CellularNetwork2G=4]="CellularNetwork2G",e[e.CellularNetwork3G=5]="CellularNetwork3G",e[e.CellularNetwork4G=6]="CellularNetwork4G",e[e.CellularNetwork5G=7]="CellularNetwork5G"}(t||(t={}));var o,a=((r={})[e.HORIZONTAL]=[[970,90],[728,90],[468,60],[234,60]],r[e.RECTANGLE]=[[336,280],[300,250],[250,250],[200,200],[180,150],[125,125]],r[e.VERTICAL]=[[300,600],[160,600],[120,600],[120,240]],r[e.MOBILE]=[[320,50]],r[e.MOBILE_BIG]=[[320,100],[320,50]],r[e.MOBILE_HORIZONTAL]=[[970,90],[728,90],[468,60],[320,100],[320,50],[234,60]],r[e.PORTRAIT]=[[300,1050]],r[e.BILLBOARD]=[[970,250]],r["300x600"]=[[300,600],[160,600]],r["336x280"]=[[336,280],[300,250]],r["728x90"]=[[728,90],[468,60]],r["970x90"]=[[970,90],[728,90],[468,60]],r),s="https://ads.assemblyexchange.com",c="web_".concat("5.23.0"),u="ana_client_uid",l="ana_client_session_id",d="ana_vast",h="ana_staging",f="https://xeno.media-lab.ai/events",p="https://securepubads.g.doubleclick.net/tag/js/gpt.js",g="https://js.assemblyexchange.com/iiquniversalid.6.111.js",v="ana-iiq-script",m="//c.amazon-adsystem.com/aax2/apstag.js",y=[new RegExp("^https://js\\.media-lab\\.ai$"),new RegExp("^https://ads\\.assemblyexchange\\.com$"),new RegExp("^https://staging\\.ads\\.assemblyexchange\\.com$"),new RegExp("^https://tpc\\.googlesyndication\\.com$"),new RegExp("^https?://ana-sdk-creative\\.s3-website-us-west-2\\.amazonaws\\.com$"),new RegExp("^https://\\w+\\.safeframe\\.googlesyndication\\.com$"),new RegExp("^https?://localhost:9000$"),new RegExp("^https?://127\\.0\\.0\\.1:9000$")],b=[new RegExp("^https://js\\.media-lab\\.ai$"),new RegExp("^https://ads\\.assemblyexchange\\.com$"),new RegExp("^https://staging\\.ads\\.assemblyexchange\\.com$"),new RegExp("^https?://localhost:2279$"),new RegExp("^https?://127\\.0\\.0\\.1:2279$")],w=417,I="frequency_cap",E="cs_",T="AssemblyBidderSyncState",A=2500,S="banner",D=4,P={0:"unknown",1:"ext",2:"network",3:"none"},k="unified_id",_="_lr_env",R="rtisCalled",O="ANAWeb-",C="ANA_PREMIUM_USER",x=["direct_backfill","direct_pricepriority","direct_sponsorship"],L=function(){return L=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},L.apply(this,arguments)},M=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},B=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},U=function(e,t){void 0===t&&(t={});var n,i,r=new URL(e);return t&&"{}"!==JSON.stringify(t)?(void 0!==r.searchParams?Object.keys(t).forEach((function(e){return r.searchParams.append(e,String(t[e]))})):r.href+="?"+(n=t,i=[],Object.keys(n).forEach((function(e){i.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]))})),i.join("&")),r):r},N=((o={"Content-Type":"application/json"})["ana-api-key"]="056363cfdcfcf7de5cea11820138b4d2daf3ca",o.lib_version=c,o.publisher_version="web_0.0.1",o),V=function(e){var t=e.url,n=e.params,i=void 0===n?{}:n,r=e.headers,o=void 0===r?{}:r,a=e.body,s=void 0===a?null:a,c=e.credentials,u=void 0===c?"include":c;return M(void 0,void 0,void 0,(function(){return B(this,(function(e){try{return[2,fetch(U(t,i).toString(),{body:JSON.stringify(s),credentials:u,headers:L(L({},N),o),method:"POST"})]}catch(e){throw new Error(e)}return[2]}))}))},j=function(e){var t=e.url,n=e.params,i=void 0===n?{}:n,r=e.headers;return M(void 0,void 0,void 0,(function(){return B(this,(function(e){try{return[2,fetch(U(t,i).toString(),{credentials:"include",headers:L(L({},N),r),method:"GET"})]}catch(e){throw new Error(e)}return[2]}))}))},F=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},G=function(e){return e.map((function(e){var t=e.toCustomJSON();return t.creative="",t.impression_pixels=[],t.view_pixels=[],t.click_pixels=[],t}))};function q(e){var t,n,i;if(e)return{auction_timeout:e.auction_timeout,matched_ids:null===(t=e.matched_ids)||void 0===t?void 0:t.ids,opportunity_data:e.opportunity_data||{},liveramp_envelope:(null===(n=e.opportunity_data)||void 0===n?void 0:n.liveramp_envelope)||"",referer:null===(i=e.site)||void 0===i?void 0:i.referer}}function W(){return window.ANAWebSDKInstance}function H(){var e=W();if(e)return e.propertyId;var t=window.ANAWebPropertyId;return t||window.location.hostname}function J(e){try{var t=e(),n="__random_key__",i="__random_val__";return t.setItem(n,i),t.getItem(n)!==i?!1:(t.removeItem(n),!0)}catch(e){return!1}}function z(){return!!window.ana_debug||-1!==window.location.href.indexOf("ana_debug=1")}function K(e){return e.length?"number"==typeof e[0]?[e.join("x")]:e.map((function(e){return e.join("x")})):[]}function Q(){var e,n=window.navigator;if(!n.connection)return t.Unknown;switch(n.connection.effectiveType){case"slow-2g":case"2g":e=t.CellularNetwork2G;break;case"3g":e=t.CellularNetwork3G;break;case"4g":e=t.CellularNetwork4G;break;default:e=t.Unknown}return e}function $(){var e,n=window.navigator;if(!n.connection)return t.Unknown;if(n.connection)switch(n.connection.type){case"cellular":e=Q();break;case"ethernet":e=t.Ethernet;break;case"wifi":e=t.WIFI;break;case"unknown":e=t.Unknown;break;case void 0:e=Q();break;default:e=t.Unknown}return e}function Y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];z()&&console.log.apply(console,F(["%cðŸš¨ANA: ","background: #222; color: #33c65a"],e,!1))}function Z(e,t,n){var i="";if(n){var r=new Date;r.setTime(r.getTime()+60*n*1e3),i="; expires="+r.toUTCString()}document.cookie=e+"="+(t||"")+i+"; path=/"}function X(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var r=n[i].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}var ee=function(e){return e?e.split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0):0},te=function(e){return X("".concat(k,"_").concat(ee(e)))};function ne(e){return new URLSearchParams(window.location.search).get(e)}function ie(e){var t=!1;return Array.from(document.getElementsByTagName("script")).forEach((function(n){n.getAttribute("src")===e&&(t=!0)})),t}function re(e,t,n){if(t.addEventListener)t.addEventListener(e,n,!1);else{if(!t.attachEvent)throw Error("No event listener found!");t.attachEvent("on".concat(e),n)}}var oe=function(e,t){if(t){var n=t.options.dimensions.filter((function(e){return 300===e[0]&&600===e[1]})).length>0,i=t.options.dimensions.filter((function(e){return 300===e[0]&&(300===e[1]||250===e[1])})).length>0;if(n&&i){var r=document.getElementById(t.elementID);if(!t.isSemiStickyUnit||300!==e.Width||300!==e.Height&&250!==e.Height)t.isSemiStickyUnit&&e.Height>300&&"assembly-semi-sticky-container"===r.parentElement.getAttribute("class")&&(r.style.position="relative",r.style.marginTop="0px");else{var o=null;"assembly-semi-sticky-container"!==r.parentElement.getAttribute("class")&&((o=document.createElement("div")).setAttribute("class","assembly-semi-sticky-container"),o.style.display="block",o.style.width="300px",o.style.height="600px",o.style.marginLeft="auto",o.style.marginRight="auto",o.style.borderTop="1px solid transparent",o.style.borderBottom="1px solid transparent",r.parentNode.insertBefore(o,r),o.appendChild(r))}}}else Y("slot is not defined")},ae=function(e,t){return e()?Promise.resolve():new Promise((function(n){var i=setInterval((function(){e()&&(Y("Document in focus"),n(),clearInterval(i))}),t)}))},se=function(e){return document.getElementById(e)?Promise.resolve():new Promise((function(t){var n=setInterval((function(){document.getElementById(e)&&(Y("Element ".concat(e," was added to the DOM")),t(),clearInterval(n))}),500)}))},ce=function(e){var t=document.getElementById(e),n=!1;return t?n=!t.checkVisibility||t.checkVisibility():n},ue=function(e){var t=document.getElementById(e);if(!t||!IntersectionObserver)return Promise.resolve();return new Promise((function(n){var i=new IntersectionObserver((function(t,i){!function(t,n,i){t.forEach((function(t){t.intersectionRatio>0&&(Y("".concat(e," in viewport!")),i())}))}(t,0,n)}),{root:null,rootMargin:"0px",threshold:0});i.observe(t)}))},le=function(e){return e.premiumUser?new Promise((function(t){var n=setInterval((function(){e.premiumUser||(Y("Premium user status dropped"),t(),clearInterval(n))}),1e3)})):Promise.resolve()},de=function(e){if(!e)return!1;return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},he=0,fe=ne("aversion");if(fe){var pe="use_local_bundle"===fe?"http://localhost:9000/wana.js":"https://js.media-lab.ai/wana."+fe+".js";if(!ie(pe))throw function e(t){if(!document.body)return console.error("ana-web is triying to load another version before there is a body to append to. Retry [".concat(fe,"][").concat(he,"]")),(he+=1)<10?void setTimeout((function(){e(t)}),50):void console.error("Ana Web exhausted retries while waiting for document.body . Retry [".concat(fe,"][").concat(he,"]"));ie(t)||function(e,t){if(!ie(e)){var n=document.createElement("script");n.async=t,n.src=e,document.body.appendChild(n)}}(t,!0)}(pe),Error("Ana Version parameter found, stoping current script to load requested version [".concat(fe,"]"))}var ge,ve,me=function(){function e(){}return e.prototype.setItem=function(e,t){this[e]=t},e.prototype.getItem=function(e){var t=this[e];return t||(t=null),t},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){var e=this;Object.keys(this).forEach((function(t){delete e[t]}))},e.prototype.key=function(e){throw Error("not implemented (index = ".concat(e))},e.prototype.getAllKeys=function(){return Object.keys(this)},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this).length},enumerable:!1,configurable:!0}),e}(),ye=function(){function e(){}return e.prototype.setItem=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(O+e,n)}catch(e){Y("Error saving to localStorage",e)}},e.prototype.getItem=function(e){try{var t=localStorage.getItem(O+e);return null===t?null:JSON.parse(t)}catch(e){return Y("Error retrieving from localStorage",e),null}},e.prototype.removeItem=function(e){try{localStorage.removeItem(O+e)}catch(e){Y("Error removing from localStorage",e)}},e.prototype.clear=function(){try{localStorage.clear()}catch(e){Y("Error clearing localStorage",e)}},e.prototype.getAllKeys=function(){return Object.keys(localStorage).filter((function(e){return e.startsWith(O)})).map((function(e){return e.replace(O,"")}))},e}();window.anaStorage=J((function(){return window.localStorage}))?new ye:new me,window.anaSessionStorage=J((function(){return window.sessionStorage}))?window.sessionStorage:new me,function(e){e[e.GOOGLE=0]="GOOGLE",e[e.ANA=1]="ANA"}(ge||(ge={})),function(e){e[e.VIDEO_JS=0]="VIDEO_JS",e[e.HTML5=1]="HTML5"}(ve||(ve={}));var be,we,Ie=n(30),Ee=n.n(Ie),Te=null,Ae=function(e){var t,n=document.activeElement;if(n&&"IFRAME"===n.tagName&&Te!==n&&(Te=n,document.activeElement.parentNode&&"DIV"===document.activeElement.parentNode.nodeName)){var i=document.activeElement.parentNode,r="";i.parentNode&&"DIV"===i.parentNode.nodeName&&i.parentNode.getAttribute("id")?r=i.parentNode.getAttribute("id"):(i,r=i.getAttribute("id")),Y("ANA Ad Click detected on adUnit",r);var o=null===(t=e.getBannerSlot(r))||void 0===t?void 0:t.currentBid;o?(Y("Rendering ClickPixels for adUnit",r),o.renderClickPixels()):Y("Failed Rendering ClickPixels for adUnit",r,"because bid is missing")}};!function(e){e.RENDER="render",e.DO_NOTHING="doNothing",e.ADSERVER="adserver"}(we||(we={}));var Se,De=function(){function e(e){var t=this;Object.keys(e).forEach((function(n){var i=function(e,t){void 0===t&&(t=!1);var n=e.replace(/([-_]id$)|([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")}));return"id"===n&&(n="ID"),n&&t&&(n=n[0].toUpperCase()+n.slice(1)),n}(n,!0);t[i]=e[n]})),this.LastNomination=0}return e.prototype.toCustomJSON=function(){var e=this,t={};return Object.keys(this).forEach((function(n){var i=n.replace(/\.?([A-Z]+)/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"");t[i]=e[n]})),t},e.prototype.renderPixels=function(e){var t=this.BidID;e.forEach((function(e){var n=document.createElement("img");n.setAttribute("data-bid-id",t),n.setAttribute("src",e),n.setAttribute("width","1"),n.setAttribute("height","1"),document.body.appendChild(n)}))},e.prototype.renderImpressionPixels=function(){this.ImpressionPixels&&this.renderPixels(this.ImpressionPixels)},e.prototype.renderViewPixels=function(){this.ViewPixels&&this.renderPixels(this.ViewPixels)},e.prototype.renderClickPixels=function(){this.ClickPixels&&this.renderPixels(this.ClickPixels)},e.prototype.removeImpressionPixels=function(){for(var e=[],t=document.getElementsByTagName("img"),n=0;n<t.length;n++){var i=t[n];i.getAttribute("data-bid-id")===String(this.BidID)&&e.push(i)}e.forEach((function(e){return document.body.removeChild(e)}))},e.prototype.isExpired=function(){if(void 0===this.Expires)return!1;var e=this.Expires-this.Received,t=new Date(this.Expires);this.ClientReceived&&(t=new Date(this.ClientReceived+e));var n=new Date;return t.getTime()<n.getTime()},e}(),Pe=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&+e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},ke=function(){return"y"===new URLSearchParams(window.location.search).get("tracing")},_e=function(){var e=anaStorage.getItem(u);return de(e)||(e=Pe(),Re(e)),ke()?"tr"+e:e},Re=function(e){anaStorage.setItem(u,e)},Oe=(Se=function(e,t){return Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Se(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Se(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});const Ce=function(e){function t(t,n){var i=e.call(this,t)||this;return i.status=n,i}return Oe(t,e),t}(Error);var xe=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},Le=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Me=function(e,t){anaStorage.setItem(E+e,t)};var Be=function(e){var t=anaStorage.getItem(T),n=null;try{if(t){n=JSON.parse(t);var i=!0;if(e&&Object.keys(e).forEach((function(e){Object.keys(n.bidders).find((function(t){return e===t}))||(i=!1)})),i)return Object.keys(n.bidders).forEach((function(e){n.bidders[e].sync_date<Date.now()-864e5&&(n.bidders[e].sync_date=Date.now(),n.bidders[e].sync_counter=0)})),n}}catch(e){}var r={group:-1,bidders:{}};return e?(Object.keys(e).forEach((function(e){r.bidders[e]={sync_counter:-1,sync_date:Date.now()}})),r):r},Ue=function(e,t){var n,i,r=Object.keys(e).length,o=Math.ceil(r/6);-1===t.group?t.group=(n=0,i=o-1,Math.floor(Math.random()*(i-n+1)+n)):(t.group++,t.group>o-1&&(t.group=0));var a=6*t.group,s=a+6;s>r&&(s=r);var c=Object.keys(e).slice(a,s);c.forEach((function(e){void 0!==t.bidders[e]&&(t.bidders[e].sync_counter++,t.bidders[e].sync_counter>3&&(t.bidders[e].sync_counter=3))})),c=c.filter((function(e){return void 0!==t.bidders[e]&&t.bidders[e].sync_counter<3}));var u={};return c.forEach((function(t){u[t]=e[t]})),[u,t]},Ne=function(e){var t=e.propertyId,n=e.uid;return xe(void 0,void 0,void 0,(function(){var e,i,r,o,a,s,c,u;return Le(this,(function(l){switch(l.label){case 0:if(!t)throw Error("propertyId is required");if(h=Be(null),0!==Object.keys(h.bidders).length&&0===Object.keys(h.bidders).filter((function(e){return h.bidders[e].sync_counter<3})).length)return Y("Already all synced, no need to resync cookies across bidders"),[2];if(Y("Not all bidders synced, continuing"),void 0===window.syncRequestLastTime&&(window.syncRequestLastTime={}),void 0===window.syncRequestLastTime[window.location.href]&&(window.syncRequestLastTime[window.location.href]=0),(new Date).getTime()-window.syncRequestLastTime[window.location.href]<2500)return Y("We have already called resync before 2.5 seconds, rejecting the call until later"),[2];window.syncRequestLastTime[window.location.href]=(new Date).getTime(),Y("Updating last resync timer"),d=t,window.ANAWebPropertyId=d,Re(n),Y("sending a syncing cookie request to doh"),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,yt.UserSync.sync({syncedBidderIds:[]})];case 2:return e=l.sent(),i=e.syncUrls,r=e.cookieIds,o=Be(i),a=Ue(i,o),s=a[0],function(e){try{anaStorage.setItem(T,JSON.stringify(e))}catch(e){}}(a[1]),c=r?Object.keys(r):null,Y("got response from /doh/sync:",s,r),Object.keys(s).forEach((function(e){c&&-1!==c.indexOf(e)||Qe(e,s[e])})),r&&Object.keys(r).forEach((function(e){var t=r[e];t&&Me(e,t)})),[2];case 3:return u=l.sent(),console.error("Something went wrong during user sync:",u),[3,4];case 4:return[2]}var d,h}))}))};function Ve(e){this.callCounter++,document.body?document.body.appendChild(e):this.callCounter<200&&setTimeout(Ve.bind(this,e),50)}var je,Fe,Ge,qe,We,He,Je,ze,Ke,Qe=function(e,t){var n=H(),i=document.createElement("iframe");i.setAttribute("src",t),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),i.setAttribute("marginheight","0"),i.setAttribute("marginwidth","0"),i.setAttribute("TOPMARGIN","0"),i.setAttribute("LEFTMARGIN","0"),i.setAttribute("allowtransparency","true"),i.setAttribute("width","0"),i.setAttribute("height","0"),i.setAttribute("data-property-id",n),Y("creating cookie syncing iframe for "+e,t),setTimeout(Ve.bind({callCounter:0},i),0)};!function(e){e[e.PageLoadSoundOn=1]="PageLoadSoundOn",e[e.PageLoadSoundOff=2]="PageLoadSoundOff",e[e.ClickSoundOn=3]="ClickSoundOn",e[e.MouseOverSoundOn=4]="MouseOverSoundOn",e[e.EnterViewpointSoundOn=5]="EnterViewpointSoundOn",e[e.EnterViewpointSoundOff=6]="EnterViewpointSoundOff"}(je||(je={})),function(e){e[e.GenericPostRoll=-2]="GenericPostRoll",e[e.GenericMidRoll=-1]="GenericMidRoll",e[e.PreRoll=0]="PreRoll",e[e.MidRoll3Sec=3]="MidRoll3Sec",e[e.MidRoll5Sec=5]="MidRoll5Sec",e[e.MidRoll10Sec=10]="MidRoll10Sec",e[e.MidRoll15Sec=15]="MidRoll15Sec",e[e.MidRoll30Sec=30]="MidRoll30Sec",e[e.MidRoll60Sec=60]="MidRoll60Sec"}(Fe||(Fe={})),function(e){e[e.InStream=1]="InStream",e[e.InBanner=2]="InBanner",e[e.InArticle=3]="InArticle",e[e.InFeed=4]="InFeed",e[e.Interstitial=5]="Interstitial"}(Ge||(Ge={})),function(e){e[e.InStream=1]="InStream",e[e.Overlay=2]="Overlay"}(qe||(qe={})),function(e){e[e.OnVideoCompletion=1]="OnVideoCompletion",e[e.OnLeavingViewport=2]="OnLeavingViewport",e[e.OnLeavingViewportContinues=3]="OnLeavingViewportContinues"}(We||(We={})),function(e){e[e.Unknown=0]="Unknown",e[e.AboveTheFold=1]="AboveTheFold",e[e.Deprecated=2]="Deprecated",e[e.BelowTheFold=3]="BelowTheFold",e[e.Header=4]="Header",e[e.Footer=5]="Footer",e[e.Sidebar=6]="Sidebar",e[e.FullScreen=7]="FullScreen"}(He||(He={})),function(e){e[e.Vast10=1]="Vast10",e[e.Vast20=2]="Vast20",e[e.Vast30=3]="Vast30",e[e.Vast10Wrapper=4]="Vast10Wrapper",e[e.Vast20Wrapper=5]="Vast20Wrapper",e[e.Vast30Wrapper=6]="Vast30Wrapper",e[e.Vast40=7]="Vast40",e[e.Vast40Wrapper=8]="Vast40Wrapper",e[e.Daast10=9]="Daast10",e[e.Daast10Wrapper=10]="Daast10Wrapper"}(Je||(Je={})),function(e){e[e.Vpaid10=1]="Vpaid10",e[e.Vpaid20=2]="Vpaid20",e[e.Mraid1=3]="Mraid1",e[e.Ormma=4]="Ormma",e[e.Mraid2=5]="Mraid2",e[e.Mraid3=6]="Mraid3"}(ze||(ze={})),function(e){e[e.Streaming=1]="Streaming",e[e.Progressive=2]="Progressive",e[e.Download=3]="Download"}(Ke||(Ke={}));var $e,Ye=function(){var e=X(l);return e||(e=Pe()),Ze(e),ke()?"tr"+e:e},Ze=function(e){Z(l,e,30)},Xe=function(){return Xe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Xe.apply(this,arguments)},et=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},tt=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},nt={enableSingleRequest:!1,globalTargeting:{},sandboxIframe:!1,collapseEmptyDivs:!1,preCollapseEmptyDivs:!1,enableLazyLoad:!1,setPPID:!1,lazyLoadOptConfig:{fetchMarginPercent:800,renderMarginPercent:400,mobileScaling:3}},it=function(e,t){var n;void 0===t&&(t=null),function(e){if(!window.googletag||void 0===window.googletag.pubads){document.body||console.error("loadGPTTagJS called before there is a body to append to");var t=document.createElement("script");t.async=!0,t.defer=!0,t.src=p,document.body.appendChild(t),Y("added GPT script on the page ".concat(p)),e&&e.eventsTracker&&e.eventsTracker.gptAdded()}}(t);var i=(n=e?Xe(Xe({},nt),e):nt).enableSingleRequest,r=n.globalTargeting,o=n.sandboxIframe,a=n.collapseEmptyDivs,s=n.enableLazyLoad,c=n.lazyLoadOptConfig,u=n.preCollapseEmptyDivs,l=n.setPPID;window.googletag=window.googletag||{},Object.assign(window.googletag,{cmd:window.googletag.cmd||[]}),window.googlefc=window.googlefc||{},Object.assign(window.googlefc,{callbackQueue:window.googlefc.callbackQueue||[]}),st((function(){t&&t.eventsTracker&&t.eventsTracker.gptLoaded(),i&&googletag.pubads().enableSingleRequest(),o&&googletag.pubads().setSafeFrameConfig({sandbox:!0}),a&&googletag.pubads().collapseEmptyDivs(u),r&&Object.keys(r).length&&Object.keys(r).forEach((function(e){googletag.pubads().setTargeting(e,r[e])})),s?googletag.pubads().enableLazyLoad(c):googletag.pubads().disableInitialLoad(),t&&l&&googletag.pubads().setPublisherProvidedId(t.uid),ut(t),googletag.enableServices(),window.addEventListener("blur",(function(){"IFRAME"===document.activeElement.nodeName?(ot(t),at(t)):rt=null})),window.addEventListener("focus",(function(){rt=null}))}))},rt=null,ot=function(e){var t=document.activeElement;if(t&&"IFRAME"===t.tagName&&rt!==t&&(rt=t,document.activeElement.parentNode&&"DIV"===document.activeElement.parentNode.nodeName)){var n=document.activeElement.parentNode,i=null,r="";n.parentNode&&"DIV"===n.parentNode.nodeName&&n.parentNode.getAttribute("id")?(i=n.parentNode,r=i.getAttribute("id")):(i=n,r=n.getAttribute("id")),googletag.pubads().getSlots().forEach((function(t){if(r===t.getSlotElementId()&&e){var n=e.getBannerSlot(r);n&&n.currentBid&&n.currentBid.HasWon?(Y("Rendering ClickPixels if available for adUnit",r),n.currentBid.renderClickPixels()):Y("Ignoring click pixel on add since it does not have a currentBid on",r)}}))}},at=function(e){setInterval((function(){ot(e)}),25)},st=function(e){var t=W();window.googletag.cmd.push((function(){e(),t&&(t.forceDirectRender=!1)}))},ct=function(e){return et(void 0,void 0,void 0,(function(){var t,n;return tt(this,(function(i){switch(i.label){case 0:return(t=te(e.getUserIdentity().email))?[3,2]:[4,null===(n=null==e?void 0:e.setUnifiedId)||void 0===n?void 0:n.call(e)];case 1:i.sent(),t=te(e.getUserIdentity().email),i.label=2;case 2:return[2,t]}}))}))},ut=function(e){return et(void 0,void 0,void 0,(function(){return tt(this,(function(t){return googletag&&googletag.secureSignalProviders&&e.unifiedIdEnabled?[2,e.gdprManager.tcResolver.then((function(){return et(void 0,void 0,void 0,(function(){var t;return tt(this,(function(n){switch(n.label){case 0:return[4,ct(e)];case 1:return(t=n.sent())&&googletag.secureSignalProviders.push({id:W().gdprManager.gdprApplies?"euid.eu":"uidapi.com",collectorFunction:function(){return new Promise((function(e){return e(t)}))}}),[2]}}))}))}))]:[2,Promise.resolve()]}))}))},lt=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},dt=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(e){e[e.AgentTypeWeb=1]="AgentTypeWeb",e[e.AgentTypeApp=2]="AgentTypeApp",e[e.AgentTypePerson=3]="AgentTypePerson"}($e||($e={}));var ht=function(e){if(document.body||console.error("loadIIQScript called before there is a body to append to"),document.getElementById(v))return Promise.resolve();var t=document.createElement("script");return t.async=!0,t.defer=!0,t.src=g,t.id=v,document.body.appendChild(t),new Promise((function(n,i){t.onload=function(){Y("added IIQ script on the page ".concat(g)),e.iiqAdded(),n()},t.onerror=function(e){return i(new Error("Failed to load IIQ script: "+e))}}))},ft=function(e){var t=e.partnerId,n=e.partnerClientId,i=e.eventsTracker,r=e.shouldSetPPID,o=void 0===r||r;return lt(void 0,void 0,void 0,(function(){return dt(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,ht(i)];case 1:return e.sent(),[2,new window.IntentIqObject({partner:t,ABTestingConfigurationSource:"IIQServer",manualWinReportEnabled:!0,partnerClientId:n,partnerClientIdType:3,callback:function(e){var t,n=e.eids||[],r=null===(t=this.abTesting)||void 0===t?void 0:t.currentTestGroup;i.iiqIdsReceived({idsCount:n.length,iiqCohort:r}),o&&function(e){var t=function(e){for(var t=(null==e?void 0:e.eids)||[],n=0;n<t.length;n++){var i=t[n];if("intentiq.com"===i.source)for(var r=i.uids,o=0;o<r.length;o++){var a=r[o];if("ppuid"===a.ext.stype)return a.id}}return null}(e);t&&st((function(){googletag.pubads().setPublisherProvidedId(t)}))}(e)},domainName:document.location.host,vrBrowserBlackList:["chrome"],timeoutInMillis:400})];case 2:return Y(e.sent()),[3,3];case 3:return[2]}}))}))};var pt=function(){return pt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},pt.apply(this,arguments)},gt=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},vt=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},mt=function(e,t,n,i){void 0===i&&(i=[]);var r,o,a,s=W().geolocation,c=W().gdprManager.gdprApplies,u={ad_unit:e,auction_timeout:n,inventory_type:"web",sizes:K(i),additional_targeting:(o=t,a={},Object.keys(o).forEach((function(e){var t=o[e];Array.isArray(t)?a[e]=t.join(","):a[e]=t})),a),property_id:H(),opportunity_data:{platform:"web",connection_type:$()},site:{page:document.location.href,referer:document.referrer},matched_ids:{ids:(r={},anaStorage.getAllKeys().forEach((function(e){0===e.indexOf(E)&&(r[e.slice(E.length)]=anaStorage.getItem(e))})),r)},consent:{},requirement_set:c?1:0,session_id:Ye()},l=W().getUserIdentity();l.email?u.opportunity_data.lr_envelope={identifier:l.email,identifier_type:D}:l.envelope&&"noEnvelope"!==l.envelope&&(u.opportunity_data.liveramp_envelope=l.envelope),"granted"===(null==s?void 0:s.permission.state)&&(null==s?void 0:s.location)&&(u.opportunity_data.latitude=s.location.latitude,u.opportunity_data.longitude=s.location.longitude,u.opportunity_data.location_accuracy_meters=s.location.accuracy,u.opportunity_data.location_source=s.location.source,u.opportunity_data.location_enabled=s.location.enabled);var d=W().gdprManager.tcString;return d&&(u.consent.tcfV2=d),u},yt={BannerBids:{fetch:function(e){var t=e.adAttemptId,n=e.adAttemptStartTime,i=e.adUnitID,r=e.auctionTimeout,o=e.elementID,a=e.targeting,s=e.dimensions;return gt(void 0,void 0,void 0,(function(){var e,c,u,l,d,h,f,p,g,v,m,y,b,E;return vt(this,(function(T){switch(T.label){case 0:return T.trys.push([0,6,,7]),e="".concat(It(),"/wana/bids/request"),c={uid:_e(),ad_unit:i},u=void 0,(l=W().iiqInstance)&&(u=l.intentIqConfig.abTesting.currentTestGroup)&&(a.iiq_cohort=u),[4,W().geolocation.locationReady];case 1:return T.sent(),d=function(e){var t=e.adUnitID,n=e.targeting,i=e.auctionTimeout,r=e.dimensions,o=mt(t,n,i,void 0===r?[]:r),a=W().iiqInstance;if(a){var s=a.getIntentIqData().eids;s&&(o.iiqIDs=s)}return o}({adUnitID:i,targeting:a,auctionTimeout:r,dimensions:s}),W().eventsTracker.adAttemptMade(i,pt(pt({},q(d)),{consent:null===(E=d.consent)||void 0===E?void 0:E.tcfV2,iiqCohort:u})),[4,V({url:e,params:c,body:d})];case 2:return h=T.sent(),f=h.status,h.ok?[3,4]:[4,h.text()];case 3:throw p=T.sent(),new Ce(p,f);case 4:return[4,h.json()];case 5:if((g=T.sent()).action===we.DO_NOTHING)throw new Ce(we.DO_NOTHING,w);return v=g.bids||[],[2,{code:f,bids:v.map((function(e){return new De(e)})),ok:h.ok,action:g.action,refreshRate:g.refreshRate,targeting:g.targeting,bidRequestBody:d}];case 6:if(m=T.sent(),y=Date.now()-n,m.status&&m.status===w)throw b=m.message||m.code,m.message===I&&(console.warn("#".concat(o," ").concat(i," ANA user reached fcap")),b="fcap"),W().eventsTracker.adAttemptFailed(i,{slot:i,reason:b,duration:y,adAttemptID:t,targeting:a}),m;return console.error("HTTP error "+m.status),W().eventsTracker.adAttemptFailed(i,{slot:i,reason:"0",duration:y,adAttemptID:t,targeting:a}),[3,7];case 7:return[2]}}))}))},invalidateBids:function(e){var t=e.adUnitID,n=e.bids;return Y("invalidating bids for adUnitID ".concat(t,":"),n),V({url:"".concat(It(),"/wana/bids/invalidate"),params:{uid:_e(),ad_unit:t},body:{bids:G(n)}}).catch((function(e){var t=n.map((function(e){return e.BidID})).join(", ");console.error("Something went wrong when invalidating the bids: ".concat(t,"."),e)}))}},VMAP:{fetch:function(e){return gt(void 0,void 0,void 0,(function(){var t,n,i,r,o,a;return vt(this,(function(s){switch(s.label){case 0:return[4,W().geolocation.locationReady];case 1:s.sent(),t=function(e){var t=e.adUnitID,n=e.targeting,i=e.adPlacement,r=e.playbackMethod,o=e.adPosition,a=e.startDelay,s=e.playerWidth,c=e.playerHeight,u=e.auctionTimeout,l=e.audioPosterEnabled,d=e.videoDurationSeconds,h=mt(t,n,u);return h.video_delivery=Ke.Progressive,h.video_placement=i,h.video_playback_method=r,h.video_position=o,h.video_start_delay=a,h.video_width=s,h.video_height=c,h.audio_poster_enabled=l,h.video_duration_seconds=d,h}(e),W().eventsTracker.adAttemptMade(e.adUnitID,pt(pt({},q(t)),{consent:null===(a=t.consent)||void 0===a?void 0:a.tcfV2})),s.label=2;case 2:return s.trys.push([2,7,,8]),[4,V({url:"".concat(It(),"/vmap/request"),params:{uid:_e()},body:t})];case 3:return(n=s.sent()).ok?[3,5]:[4,n.text()];case 4:throw i=s.sent(),new Ce(i,n.status);case 5:return[4,n.json()];case 6:return r=s.sent(),Y("".concat(e.adUnitID," got video bid response from ANA"),r),[2,{code:n.status,tagUrl:r.tag_url,bidRequestBody:t}];case 7:throw(o=s.sent()).status===w?o.message===I&&console.warn("#".concat(e.elementID," ").concat(e.adUnitID," ANA user reached fcap")):console.error("Failed requesting video bids: HTTP error ".concat(o.status,"."),o),o;case 8:return[2]}}))}))}},UserSync:{sync:function(e){var t=e.syncedBidderIds;return gt(void 0,void 0,void 0,(function(){var e,n,i,r,o,a,s,c,u;return vt(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),e=H(),n=W().gdprManager,i=n.tcString,r=n.gdprApplies,[4,V({url:"".concat(It(),"/doh/sync"),params:{uid:_e(),property_id:e},body:{synced_ids:t,consent:i,requirement_set:r?1:0}})];case 1:if(200!==(o=l.sent()).status)throw new Error("Failed getting sync URLs");return[4,o.json()];case 2:return a=l.sent(),s=a.sync_urls,c=a.cookie_ids,[2,{syncUrls:s,cookieIds:c}];case 3:throw u=l.sent(),new Error(u);case 4:return[2]}}))}))}},Hertz:{impression:function(e){var t=e.adUnitID,n=e.bidId,i=void 0===n?"adserver":n;return gt(void 0,void 0,void 0,(function(){var e,n,r,o;return vt(this,(function(a){switch(a.label){case 0:Y("reporting on bid ".concat(i," impression to hertz for ").concat(t)),e=H(),n=_e(),r=Ye(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,j({url:"".concat(It(),"/hertz/impression"),params:{uid:n,ad_unit_id:t,session_id:r,bid_id:i,property_id:e}})];case 2:return[2,a.sent()];case 3:return o=a.sent(),console.error("hertz/impression error:",o),[3,4];case 4:return[2]}}))}))}},Wverify:{verify:function(){return gt(void 0,void 0,void 0,(function(){var e,t,n,i,r,o;return vt(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),e=H(),t=_e(),n=W().loggedInStatus,i={uid:t,property_id:e},n===Tn.LOGGED_IN&&(i.user_status="logged_in"),[4,j({url:"".concat(It(),"/web/verify"),params:i})];case 1:if(200!==(r=a.sent()).status)throw new Error("Failed getting wverify config");return[4,r.json()];case 2:return[2,{features:a.sent().features}];case 3:throw o=a.sent(),new Error(o);case 4:return[2]}}))}))}},Events:{send:function(e){var t=e.events;return gt(void 0,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,V({url:f,headers:{"Content-Type":"application/json"},body:{events:t},credentials:"omit"})];case 1:return[2,e.sent()];case 2:return Y("Error sending events:",e.sent()),[3,3];case 3:return[2]}}))}))}}},bt={rtis:function(e){window.fetch&&fetch("https://api.rlcdn.com/api/identity/envelope?pid=13731",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){t.envelope&&e(t.envelope)})).catch((function(){e("noEnvelope")}))}},wt=function(e){var t=e.adUnitID,n=e.bid;if(n){var i=function(e,t){return{biddingPlatformId:4,bidderCode:t.BidderName,cpm:t.Value/100,currency:"USD",status:"rendered",placementId:e}}(t,n),r=W().iiqInstance;return r&&r.reportExternalWin(i),n.renderImpressionPixels(),yt.BannerBids.invalidateBids({adUnitID:t,bids:[n]})}},It=function(){return window.ana_staging||-1!==window.location.href.indexOf(h)?s.replace("https://","https://staging."):s},Et=function(e,t){return gt(void 0,void 0,void 0,(function(){var n;return vt(this,(function(i){switch(i.label){case 0:return n=function(i){return gt(void 0,void 0,void 0,(function(){var r,o,a,s,c;return vt(this,(function(u){switch(u.label){case 0:return i>=3?[2]:(r=W().gdprManager.gdprApplies,o=W().gdprManager.tcString,r&&!o?[2]:(a={uid:e,identifier:t,identifier_type:"4",consent:o,requirement_set:r?"1":"0",app_id:H()},[4,j({url:"".concat(It(),"/web/liveramp"),params:a})]));case 1:return 404!==(s=u.sent()).status&&500!==s.status?[3,4]:[4,new Promise((function(e){return setTimeout(e,3e3*i)}))];case 2:return u.sent(),[4,n(i+1)];case 3:return u.sent(),[3,6];case 4:return s.ok?[4,s.json()]:[3,6];case 5:c=u.sent(),function(e,t){var n=t.refresh_ttl/6e4;Z("".concat(k,"_").concat(ee(e)),t.ttd_uid,n)}(t,c),u.label=6;case 6:return[2]}}))}))},[4,n(0)];case 1:return i.sent(),[2]}}))}))},Tt=function(e){var t=e.getBoundingClientRect(),n=t.width*t.height,i=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;return At(t,i,r)/n>=.5},At=function(e,t,n){return(Math.min(t,e.right)-Math.max(0,e.left))*(Math.min(n,e.bottom)-Math.max(0,e.top))},St=function(){return St=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},St.apply(this,arguments)},Dt=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},Pt=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},kt={adUnitID:"",format:e.HORIZONTAL,elementID:"",collapseBeforeFill:!1,collapseIfNoFill:!1,dimensions:null,draEnabled:!0,baseTargeting:{},passThroughANA:!1,apsEnabled:!0,adServerRender:!0,refreshOnURLChange:!1,excludeANA:!1,skipFocusValidation:!1,skipRefreshOnRecreation:!1},_t=function(){function e(e,t){var n=this;this.stopRefreshCycle=function(){n.refreshTimeoutId&&clearTimeout(n.refreshTimeoutId)},this.listenForURLChanges=function(){return Dt(n,void 0,void 0,(function(){var e;return Pt(this,(function(t){switch(t.label){case 0:return[4,(n=window.location.href,new Promise((function(e){var t=setInterval((function(){var i=window.location.href;n!==i&&(Y("URL changed from ".concat(n," to ").concat(i)),e(),clearInterval(t))}),300)})))];case 1:return t.sent(),e=Date.now(),e-this.previousRefreshTime>=5e3&&(this.skipViewValidation=!0,this.previousRefreshTime=e,this.stopRefreshCycle(),this.refresh()),this.listenForURLChanges(),[2]}var n}))}))},this.waitForRemoval=function(){return Dt(n,void 0,void 0,(function(){return Pt(this,(function(e){switch(e.label){case 0:return[4,(t=this.elementID,document.getElementById(t)?new Promise((function(e){var n=setInterval((function(){document.getElementById(t)||(Y("Element ".concat(t," was removed from the DOM")),e(),clearInterval(n))}),500)})):Promise.resolve())];case 1:return e.sent(),this.slotRemoved=!0,this.anaWeb.eventsTracker.adSlotRemoved(this.adUnitID,this.elementID),this.skipRefreshOnRecreation||this.stopRefreshCycle(),this.waitForAddition(),[2]}var t}))}))},this.waitForAddition=function(){return Dt(n,void 0,void 0,(function(){return Pt(this,(function(e){switch(e.label){case 0:return[4,se(this.elementID)];case 1:return e.sent(),this.anaWeb.eventsTracker.adSlotRecreated(this.adUnitID,this.elementID),this.skipViewValidation=!0,this.slotRemoved=!1,this.previousRefreshTime=Date.now(),this.skipRefreshOnRecreation||this.refresh(),this.waitForRemoval(),[2]}}))}))},this.waitForInvisible=function(){return Dt(n,void 0,void 0,(function(){return Pt(this,(function(e){switch(e.label){case 0:return[4,(t=this.elementID,ce(t)?new Promise((function(e){var n=setInterval((function(){ce(t)||(Y("Element ".concat(t," is invisible")),e(),clearInterval(n))}),500)})):Promise.resolve())];case 1:return e.sent(),this.isVisible=!1,this.waitForVisible(),[2]}var t}))}))},this.waitForInViewport=function(){return Dt(n,void 0,void 0,(function(){return Pt(this,(function(e){switch(e.label){case 0:return[4,ue(this.elementID)];case 1:return e.sent(),this.hasBeenInViewPort=!0,[2]}}))}))},this.waitForPremiumUser=function(){return Dt(n,void 0,void 0,(function(){return Pt(this,(function(e){switch(e.label){case 0:return[4,le(this.anaWeb)];case 1:return e.sent(),[2]}}))}))},this.onAdView=function(e){n.hasBeenViewed=!0,e&&e()},this.options=St(St({},kt),t),this.anaWeb=e,this.adUnitID=this.options.adUnitID,this.elementID=this.options.elementID,this.dimensions=this.options.dimensions,this.baseTargeting=St({},this.options.baseTargeting),this.apsTargeting=[],this.additionalTargeting={},this.passThroughANA=this.options.passThroughANA,this.apsEnabled=(null==e?void 0:e.apsEnabled)&&this.options.apsEnabled,this.mapAPSTargeting=!!(null==e?void 0:e.mapAPSTargeting),this.adServerRender=this.options.adServerRender,this.isSemiStickyUnit=!!this.options.isSemiStickyUnit,this.adLoadCallback=this.options.onAdLoad,this.draEnabled=this.options.draEnabled,this.refreshCount=0,this.currentBid=null,this.hasBeenViewed=!1,this.impCount=0,this.focusPromise=null,this.isVisible=ce(this.elementID),this.ANALazyLoad=!!this.options.ANALazyLoad,this.hasBeenInViewPort=!1,this.excludeANA=this.options.excludeANA,this.skipFocusValidation=this.options.skipFocusValidation,this.skipRefreshOnRecreation=this.options.skipRefreshOnRecreation,this.skipViewValidation=!1,this.refreshTimeoutId=null,this.slotRemoved=!1,this.waitForRemoval(),this.previousRefreshTime=Date.now(),this.options.refreshOnURLChange&&this.listenForURLChanges()}return e.prototype.updateBaseTargeting=function(e){this.baseTargeting=St(St({},this.baseTargeting),e)},e.prototype.waitForVisible=function(){return Dt(this,void 0,void 0,(function(){return Pt(this,(function(e){switch(e.label){case 0:return[4,(t=this.elementID,ce(t)?Promise.resolve():new Promise((function(e){var n=setInterval((function(){ce(t)&&(Y("Element ".concat(t," is visible")),e(),clearInterval(n))}),500)})))];case 1:return e.sent(),this.isVisible=!0,this.waitForInvisible(),[2]}var t}))}))},e.prototype.removeSlot=function(){var e=document.getElementById(this.elementID);e&&(e.innerHTML=null),this.stopRefreshCycle()},e.prototype.checkForFocus=function(){return Dt(this,void 0,void 0,(function(){var e=this;return Pt(this,(function(t){return this.focusPromise||(this.focusPromise=ae(this.anaWeb.hasFocus.bind(this.anaWeb),300).then((function(){e.focusPromise=null}))),[2,this.focusPromise]}))}))},e.prototype.fetchANABids=function(){var e,t;return Dt(this,void 0,void 0,(function(){var n,i,r,o,a,s,c,u,l,d,h,f;return Pt(this,(function(p){switch(p.label){case 0:return this.refreshCount++,this.passThroughANA||this.excludeANA?(n=void 0,(i=this.anaWeb.iiqInstance)&&(n=null===(t=null===(e=i.intentIqConfig)||void 0===e?void 0:e.abTesting)||void 0===t?void 0:t.currentTestGroup),this.anaWeb.eventsTracker.adAttemptMade(this.adUnitID,{iiqCohort:n}),[2]):(this.adAttemptStartTime=Date.now(),r=St(St({},this.anaWeb.globalTargeting),this.baseTargeting),a=(o=this).anaWeb,s=o.adUnitID,c=o.elementID,u=o.adAttemptStartTime,l=o.dimensions,d=this.adAttemptID||Pe(),[4,yt.BannerBids.fetch({adAttemptId:d,adAttemptStartTime:u,adUnitID:s,auctionTimeout:a.auctionTimeout,elementID:c,targeting:r,dimensions:l})]);case 1:return(h=p.sent())?(this.action=h.action,this.refreshRate=h.refreshRate,this.additionalTargeting=h.targeting,(f=h.bids).length>0&&a.bidManager.addBids(f,s),[2,h]):[2,{}]}}))}))},e.prototype.fetchAPSBids=function(e){var t=this;return void 0===e&&(e=this.elementID),!this.anaWeb.apsEnabled||this.passThroughANA?Promise.resolve():new Promise((function(n){window.apstag.fetchBids({slots:[{slotID:e,slotName:t.adUnitID,sizes:t.dimensions}]},(function(e){Y("APS responded with bids for ".concat(t),e),t.mapAPSTargeting&&(t.apsTargeting=e.map((function(e){var t=window.apstag.targetingKeys(e.mediaType||"display");return Ee()(e,t)}))),n(e)}))}))},e.prototype.updateTargeting=function(){},e.prototype.refresh=function(){throw new Error("Method not implemented by child class.")},e.prototype.isViewNotRequired=function(){return this.skipViewValidation||this.slotRemoved||0===this.impCount||0===this.refreshCount},e.prototype.waitForViewAndFocus=function(){return Dt(this,void 0,void 0,(function(){var e,t;return Pt(this,(function(n){switch(n.label){case 0:return[4,se(this.elementID)];case 1:return n.sent(),e=this.isViewNotRequired()?Promise.resolve():this.waitingForView(),t=this.skipFocusValidation?Promise.resolve():this.checkForFocus(),[2,Promise.all([t,e])]}}))}))},e.prototype.getTopBid=function(e){void 0===e&&(e=!0);var t=this.anaWeb,n=this.adUnitID;return t.bidManager.getBid(n,e)},e.prototype.getBidCount=function(){var e=this.anaWeb,t=this.adUnitID;return e.bidManager.getBidCount(t)},e.prototype.renderInElement=function(e,t,n){var i=this;if(document.getElementById(e)){var r=this.adUnitID,o=this.anaWeb;!function(e,t,n){var i=document.getElementById(e);if(!i)throw Error("tried to render ad on missing element "+e);for(be||(be=setInterval((function(){return Ae(n)}),25));i.firstChild;)i.removeChild(i.firstChild);if(x.includes(t.BidderName))i.innerHTML=t.Creative;else{"none"===i.style.display&&(i.style.display="inline-block",i.style.lineHeight="0px");var r=document.createElement("iframe");r.setAttribute("srcdoc",t.Creative),r.setAttribute("frameborder","0"),r.setAttribute("scrolling","no"),r.setAttribute("marginheight","0"),r.setAttribute("marginwidth","0"),r.setAttribute("TOPMARGIN","0"),r.setAttribute("LEFTMARGIN","0"),r.setAttribute("allowtransparency","true");var o=t.Width,a=t.Height;r.setAttribute("width","".concat(o)),r.setAttribute("height","".concat(a)),i.append(r)}}(e,t,o),wt({adUnitID:r,bid:t}),o.eventsTracker.slotRendered(this.adUnitID,t),o.bidManager.useBid(r,t.BidID),this.onAdLoad(t),this.currentViewMonitorStop=function(e){var t=e.elementID,n=e.bid,i=e.progress,r=e.slotAction,o=e.onView,a=!1,s=i||0,c=function(){return a||(clearInterval(u),a=!0),s},u=setInterval((function(){var e=document.getElementById(t);if(!e)return Y("viewability monitor: missing element ".concat(t,". stopping monitor")),void c();Tt(e)?s++:s=0,s>=20&&(Y("viewability monitor: viewed ".concat(t,". stopping monitor")),n&&r===we.RENDER&&n.renderViewPixels(),o&&o(),c())}),50);return c}({elementID:e,bid:t,progress:0,slotAction:this.action,onView:function(){return i.onAdView(n)}})}else console.error("missing element for direct render")},e.prototype.alreadyRendered=function(){throw Error("unimplemented method: alreadyRendered")},e.prototype.isWaitingForView=function(){return this.impCount>0&&!this.hasBeenViewed},e.prototype.waitingForView=function(){var e=this,t=function(){return e.impCount>0&&e.hasBeenViewed};return t()?Promise.resolve():new Promise((function(e){var n=setInterval((function(){t()&&setTimeout((function(){e(),clearInterval(n)}),2e3)}),300)}))},e.prototype.onAdLoad=function(e){this.impCount+=1,this.hasBeenViewed=!1,this.skipViewValidation=!1,this.currentBid=e,this.adLoadCallback&&this.adLoadCallback()},e.prototype.getRefreshRate=function(){var e=this.refreshRate;return this.currentBid&&this.currentBid.HasWon&&e<this.currentBid.MinimumRefresh&&(e=this.currentBid.MinimumRefresh),e},e.prototype.triggerNextRefresh=function(){var e=this;if(this.draEnabled&&this.refreshRate&&!(this.refreshRate<0)){var t=this.getRefreshRate();this.refreshTimeoutId=setTimeout((function(){e.previousRefreshTime=Date.now(),e.refresh().catch((function(){Y("refresh failed")}))}),t)}},e}();_t.prototype.toString=function(){return"ANASlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var Rt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ot=function(){return Ot=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ot.apply(this,arguments)},Ct=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},xt=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Lt=function(e,t,n){st((function(){googletag.pubads().addEventListener(e,(function(e){e.slot.getSlotElementId()===t&&n(e)}))}))},Mt=function(e){function t(t,n){var i,r,o=e.call(this,t,n)||this;if(o.fetched=function(){Y("fetched ".concat(o))},o.rendered=function(){Y("rendered ".concat(o))},o.format=o.options.format,o.collapseBeforeFill=o.options.collapseBeforeFill,o.collapseIfNoFill=o.options.collapseIfNoFill,o.slot=null,o.currentBid=null,o.slotType=ge.GOOGLE,o.attemptCount=0,o.resetRequestMgr(),i=o.adUnitID,r=new RegExp(/\/(\d+)(\/([\.|A-Z|a-z|\d|_|\-|\*|â€œ|\!|\\|\(|\)])+)+\/*/),i.length>100||!r.test(i))throw Error("Invalid AdunitID format, ".concat(o));if(!function(e){if(!Array.isArray(e)||0===e.length)return!1;if(2!==e.length||Array.isArray(e[0])||Array.isArray(e[1])){for(var t=!0,n=0,i=e;n<i.length;n++){var r=i[n];Array.isArray(r)?2!==r.length||"number"!=typeof r[0]||"number"!=typeof r[1]?t=!1:parseInt(r[0].toString())===r[0]&&parseInt(r[1].toString())===r[1]||(t=!1):t=!1}return t}return!(!Number.isInteger(e[0])||!Number.isInteger(e[1]))}(o.dimensions))throw Error("Invalid Adunit size, should be an array of bidimensional integer arrays, or it can be one bidimesional array of integers, ".concat(o));if(!function(e){var t;return!((null===(t=window.googletag)||void 0===t?void 0:t.pubads)&&googletag.pubads&&googletag.pubads().getSlots().find((function(t){return t.getSlotElementId()===e})))}(o.elementID))throw Error("Invalid elementID, might already been used by another adUnit, ".concat(o));return o.anaWeb.lazyLoad?(Promise.all(o.fetchBids()).catch((function(e){Y("ANA canceling ad attempt. Reason:",e)})),z()&&(Lt("slotRequested",o.elementID,o.fetched),Lt("slotOnload",o.elementID,o.rendered)),o):(st((function(){o.options.outOfPageSlot?o.registerOutOfPageSlot():o.registerSlot()})),o.anaWeb.lazyLoad||o.refresh(),o)}return Rt(t,e),t.prototype.resetRequestMgr=function(){this.requestMgr={didDirectRender:!1}},t.prototype.alreadyRendered=function(){return!!this.requestMgr.didDirectRender&&(this.requestMgr.didDirectRender=!1,!0)},t.prototype.directRender=function(){var e,t,n,i=this,r=this.getTopBid();if(r)if(this.alreadyRendered())Y("already rendered directly, skipping ",this);else{oe(r,this),this.requestMgr.didDirectRender=!0,this.currentBid=r,this.renderInElement(this.elementID,r,(function(){var e,t;i.resetRequestMgr(),null===(t=(e=i.options).onDirectRenderViewed)||void 0===t||t.call(e,{slot:i.slot})})),null===(t=(e=this.options).onDirectRenderEnded)||void 0===t||t.call(e,{isEmpty:!1,slot:this.slot,size:[this.currentBid.Width,this.currentBid.Height],creativeId:this.currentBid.BidID});var o=Date.now()-this.adAttemptStartTime,a=(null===(n=this.slot)||void 0===n?void 0:n.getTargetingMap)?this.slot.getTargetingMap():Ot(Ot({},this.anaWeb.globalTargeting),this.baseTargeting),s=q(this.bidRequestBody);this.anaWeb.eventsTracker.adAttemptSucceeded(this.adUnitID,Ot({slot:this.adUnitID,totalBids:this.getBidCount(),duration:o,adAttemptID:this.adAttemptID,targeting:a,directRendered:!0},s||{})),this.bidRequestBody=null}},t.prototype.removeSlot=function(){var t=this;st((function(){var e=t.slot;googletag.destroySlots([e]),t.slot=null})),e.prototype.removeSlot.call(this)},t.prototype.setAdServerRender=function(e){this.adServerRender=e},t.prototype.updateAnaTargeting=function(){var e=this,t=this.getTopBid(!0),n=this.slot,i=this.baseTargeting;t?(this.currentBid=t,null===n?(Y("updateTargeting - register slot for ".concat(this)),this.registerSlot(t.Targeting)):Object.keys(Ot(Ot({},i),t.Targeting)).forEach((function(r){var o=Ot(Ot({},i),(null==t?void 0:t.Targeting)||{});Y("updateTargeting - set targeting ".concat(r,", ").concat(o[r]," for ").concat(e)),n.setTargeting(r,o[r])}))):(this.currentBid=null,null===n&&(Y("updateTargeting - register slot with no bid for ".concat(this)),this.registerSlot())),this.updateAdditionalTargeting(),this.updateRefreshCountTargeting()},t.prototype.updateApsTargeting=function(){window.apstag.setDisplayBids()},t.prototype.refreshGPTSlot=function(e){var t=this;if(this.requestMgr.didDirectRender)return Y("refreshGPTSlot, skipping since slot was rendered directly"),e(),console.warn("resync all bidders from direct render"),void setTimeout((function(){t.anaWeb.syncUserCookies()}),1e3);this.adServerRender&&st((function(){t.updateRefreshCountTargeting(),Y("Calling GAM refresh for ",t),googletag.pubads().refresh([t.slot]),console.warn("resync all bidders from single slot"),setTimeout((function(){t.anaWeb.syncUserCookies()}),1e3),e()}))},t.prototype.refresh=function(){return Ct(this,void 0,void 0,(function(){var e,t,n=this;return xt(this,(function(i){switch(i.label){case 0:this.anaWeb.eventsTracker.refreshStarted(this.adUnitID),i.label=1;case 1:return i.trys.push([1,3,,4]),e=[this.waitForViewAndFocus(),this.waitForPremiumUser()],this.isVisible||e.push(this.waitForVisible()),this.ANALazyLoad&&!this.hasBeenInViewPort&&e.push(this.waitForInViewport()),[4,Promise.all(e)];case 2:return i.sent(),this.previousRefreshTime=Date.now(),[2,new Promise((function(e){n.doRefresh(e)}))];case 3:return Y("Could not refresh slot:",t=i.sent()),this.anaWeb.eventsTracker.refreshFailed(this.adUnitID,t),[3,4];case 4:return[2]}}))}))},t.prototype.doRefresh=function(e){var t=this;this.adAttemptID=Pe(),this.slot&&st((function(){t.slot.clearTargeting()}));var n=this.fetchBids(),i=!0,r=function(){i&&(i=!1,t.triggerNextRefresh(),t.refreshGPTSlot(e))};Promise.all(n).then(r).catch((function(e){i=!1,Y("ANA canceling ad attempt. Reason:",e)})),setTimeout(r,this.anaWeb.auctionTimeout+500)},t.prototype.registerOutOfPageSlot=function(){Y("registerOutOfPageSlot - define slot for ".concat(this));var e=this,t=e.adUnitID,n=e.elementID,i=e.options,r=googletag.enums.OutOfPageFormat,o=i.outOfPageSlotFormat||n,a=r[o]||o;this.slot=googletag.defineOutOfPageSlot(t,a),this.configureRegisteredSlot()},t.prototype.registerSlot=function(e){if(!this.slot){Y("registerSlot - define slot for ".concat(this));var t=this,n=t.dimensions,i=t.format,r=t.adUnitID,o=t.elementID,a=this.prepareDimensions(n,i);this.slot=googletag.defineSlot(r,a,o),this.configureRegisteredSlot(e)}},t.prototype.configureRegisteredSlot=function(e){var t=this;void 0===e&&(e={});var n=this,i=n.collapseBeforeFill,r=n.collapseIfNoFill,o=n.adUnitID,a=n.elementID,s=n.baseTargeting,c=this.slot;Lt("impressionViewable",this.elementID,this.onViewHandler.bind(this)),Lt("slotRenderEnded",this.elementID,(function(e){var n=Date.now()-t.adAttemptStartTime,i=t.slot.getTargetingMap();if(!t.draEnabled&&t.refreshRate&&t.refreshRate>0){var r=document.getElementById(t.elementID),a=null==r?void 0:r.querySelector("iframe");if(a){var s=t.getRefreshRate();a.dataset.geniusAnaRefreshRateOverride="".concat(s/1e3)}}var c=q(t.bidRequestBody);if(e.isEmpty||!1===e.slotContentChanged){t.anaWeb.eventsTracker.adAttemptFailed(o,Ot({slot:o,reason:"nofill",duration:n,gamEvent:e,adAttemptID:t.adAttemptID,targeting:i},c||{}))}else t.anaWeb.eventsTracker.adAttemptSucceeded(t.adUnitID,Ot({slot:t.adUnitID,totalBids:t.getBidCount(),duration:n,gamEvent:e,adAttemptID:t.adAttemptID,targeting:i},c)),t.bidRequestBody=null,t.onAdLoad(t.currentBid)})),c.setCollapseEmptyDiv(i,r);var u=Ot(Ot({},s),e);u&&Object.keys(u).length&&Object.keys(u).forEach((function(e){Y("registerSlot - set targeting ".concat(e,", ").concat(u[e]," for ").concat(t)),c.setTargeting(e,u[e])})),c.addService(googletag.pubads()),googletag.display(a)},t.prototype.updateRefreshCountTargeting=function(){this.slot.getTargetingKeys&&void 0===this.slot.getTargetingKeys().find((function(e){return"mlrf"===e}))&&(this.attemptCount++,this.slot.setTargeting("mlrf",this.attemptCount.toString()))},t.prototype.updateAdditionalTargeting=function(){var e=this;this.additionalTargeting&&Object.keys(this.additionalTargeting).length&&Object.keys(this.additionalTargeting).forEach((function(t){e.slot.setTargeting(t,e.additionalTargeting[t])}))},t.prototype.onViewHandler=function(e){this.currentBid&&this.currentBid.HasWon&&!this.hasBeenViewed?(Y("Rendering ViewPixels for ".concat(this.adUnitID),e),this.currentBid.renderViewPixels()):Y("Ignoring ViewPixels on AdUnit since it has already been viewed, or assembly did not win on ",this.adUnitID),this.onAdView()},t.prototype.prepareDimensions=function(e,t){return e&&e.length?e:a[t]||[]},t.prototype.fetchBids=function(){var e=this,t=this.fetchANABids().then((function(t){t&&(Y("ANA responded for ".concat(e)),e.bidRequestBody=t.bidRequestBody,!e.adServerRender||e.action===we.RENDER||e.anaWeb.forceDirectRender)?e.directRender():st((function(){e.updateAnaTargeting()}))})),n=Promise.resolve();return this.apsEnabled&&(n=this.fetchAPSBids().then((function(){st((function(){e.mapAPSTargeting?e.apsTargeting.forEach((function(t){Object.keys(t).forEach((function(n){e.slot.setTargeting(n,t[n])}))})):e.updateApsTargeting()}))}))),[t,n]},t}(_t);Mt.prototype.toString=function(){return"BannerSlot('".concat(this.adUnitID,"', '").concat(this.elementID,"')")};var Bt=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},Ut=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Nt=function(){function e(e,t,n,i,r,o){var a=this;this.anaBidRequest=function(e){return Bt(a,void 0,void 0,(function(){var t,n;return Ut(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e()];case 1:return t=i.sent(),this.imaInit(t),[3,3];case 2:return n=i.sent(),console.warn("".concat(this.videoPlayerID," error getting ANA bids: ").concat(n.message)),[3,3];case 3:return[2]}}))}))},this.playerType=e,this.adUnitID=i,this.targeting=r,this.adsManagerLoadedCustomCbk=t,this.videoPlayerID=n,this.html5Player=document.getElementById(n),this.audioPosterURL=o,this.initAds()}return e.prototype.initAds=function(){throw new Error("must be implemented by child class")},e.prototype.imaInit=function(e){throw new Error("must be implemented by child class")},e.prototype.vastUrlAndVideoSrc=function(e){Y("".concat(this.videoPlayerID," imaInit"));var t,n=(t=window.ana_vast)||(-1!==window.location.href.indexOf("ana_vast=")&&(t=U(window.location.href).searchParams.get(d))?t:"");if(n||(n=e),n){var i=this.html5Player.currentSrc;if(!i&&""!==i)throw Error("".concat(this.videoPlayerID," does not have a valid src"));return Y("".concat(this.videoPlayerID," vast used: ").concat(n,", src: ").concat(i)),{videoVastUrl:n,videoSrc:i}}Y("".concat(this.videoPlayerID," we don't have an ad to show"))},e.prototype.adsManagerLoadedCallback=function(e){throw new Error("must be implemented by child class")},e.prototype.addDefaultListeners=function(){var e=this,t=window.google;this.adsManagerLoadedCustomCbk&&this.adsManagerLoadedCustomCbk(this.html5Player,this.playerType,this.adsManager);var n=[t.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,t.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,t.ima.AdEvent.Type.CLICK,t.ima.AdEvent.Type.VIDEO_CLICKED,t.ima.AdEvent.Type.VIDEO_ICON_CLICKED,t.ima.AdEvent.Type.STARTED,t.ima.AdEvent.Type.AD_PROGRESS,t.ima.AdEvent.Type.AD_BUFFERING,t.ima.AdEvent.Type.IMPRESSION,t.ima.AdEvent.Type.PAUSED,t.ima.AdEvent.Type.RESUMED,t.ima.AdEvent.Type.FIRST_QUARTILE,t.ima.AdEvent.Type.MIDPOINT,t.ima.AdEvent.Type.THIRD_QUARTILE,t.ima.AdEvent.Type.COMPLETE,t.ima.AdEvent.Type.DURATION_CHANGE,t.ima.AdEvent.Type.USER_CLOSE,t.ima.AdEvent.Type.LOADED,t.ima.AdEvent.Type.ALL_ADS_COMPLETED,t.ima.AdEvent.Type.SKIPPED,t.ima.AdEvent.Type.LINEAR_CHANGED,t.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,t.ima.AdEvent.Type.AD_METADATA,t.ima.AdEvent.Type.AD_BREAK_READY,t.ima.AdEvent.Type.LOG,t.ima.AdEvent.Type.VOLUME_CHANGED,t.ima.AdEvent.Type.VOLUME_MUTED,t.ima.AdEvent.Type.INTERACTION],i=function(){var t;t=e.adUnitID,yt.Hertz.impression({adUnitID:t})};this.adsManager.addEventListener(t.ima.AdEvent.Type.IMPRESSION,i),this.adsManager.addEventListener(t.ima.AdEvent.Type.IMPRESSION,(function(){return e.adsManager.removeEventListener(t.ima.AdEvent.Type.IMPRESSION,i)}));for(var r=0;r<n.length;r++)this.adsManager.addEventListener(n[r],this.onAdEvent.bind(this)),Y("".concat(this.videoPlayerID," bind ").concat(n[r]," ad event"))},e.prototype.onAdEvent=function(e){void 0===e&&(e={});var t=window.google,n=e.type;n!==t.ima.AdEvent.Type.AD_PROGRESS&&Y("".concat(this.videoPlayerID," ad event: ").concat(n))},e}(),Vt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),jt=function(e){function t(t,n,i,r,o){var a=e.call(this,ve.VIDEO_JS,t,n,i,r,o)||this;return a.toggleOverlayedBtnContainer=function(){a.overlayedBtnContainer&&(a.overlayedBtnContainer.hidden=!a.overlayedBtnContainer.hidden)},a.onComplete=function(){a.adPlaying=!1},a.onStarted=function(){a.adPlaying=!0},a.onSkipped=function(){a.adPlaying=!1,a.adDisplayContainer.destroy(),a.html5Player.play()},a.onContentPauseRequested=function(){a.adPlaying=!0,a.html5Player.pause()},a.onContentResumeRequested=function(){a.adPlaying=!1,a.html5Player.play()},a.onAdLoaded=function(e){e.getAd().isLinear()||a.html5Player.play()},Y("initializing IMAManagerHTML5 for",n),a.adPlaying=!1,a}return Vt(t,e),t.prototype.initAds=function(){var e=this,t=window.google;if(!this.html5Player)throw Error("internal videojs element was not found on the page using id=".concat(this.videoPlayerID,", this is probably because this was initialized before videojs was ready"));if(t){this.overlayedBtnContainer=document.createElement("div"),this.overlayedBtnContainer.classList.add("ana-ad-overlay"),this.overlayedBtnContainer.id=this.videoPlayerID+"_ana_ad_overlay";var n=document.createElement("div");n.classList.add("ana-ad-container"),n.id=this.videoPlayerID+"_ana_ad_container",this.html5Player.after(this.overlayedBtnContainer,n),this.adDisplayContainer=new t.ima.AdDisplayContainer(n,this.html5Player),this.adsLoader=new t.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(t.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.adsManagerLoadedCallback.bind(this),!1),this.adsLoader.addEventListener(t.ima.AdErrorEvent.Type.AD_ERROR,console.error,!1),this.html5Player.onended=this.adsLoader.contentComplete,window.addEventListener("resize",(function(){if(e.adsManager){var n=e.html5Player.clientWidth,i=e.html5Player.clientHeight;e.adsManager.resize(n,i,t.ima.ViewMode.NORMAL)}}))}else console.error("Google SDK not found.")},t.prototype.imaInit=function(e){if(e&&""!==e){var t=window.google,n=this.vastUrlAndVideoSrc(e).videoVastUrl;this.adsManager&&this.adsManager.destroy(),this.adsLoader.contentComplete(),this.audioPosterURL&&t.ima.settings.setFeatureFlags({audioPosterImageEnabled:!0,audioPosterImageDefaultUrl:this.audioPosterURL});var i=new t.ima.AdsRequest;i.adTagUrl=n,i.linearAdSlotWidth=640,i.linearAdSlotHeight=480,i.nonLinearAdSlotWidth=640,i.nonLinearAdSlotHeight=150,i.forceNonLinearFullSlot=!0,i.omidAccessModeRules={},i.omidAccessModeRules[t.ima.OmidVerificationVendor.OTHER]=t.ima.OmidAccessMode.FULL,this.adsLoader.requestAds(i),this.overlayedBtnContainer.addEventListener("click",this.onOverlayedBtnContainerClick.bind(this)),this.overlayedBtnContainer.addEventListener("touchend",this.onOverlayedBtnContainerClick.bind(this))}},t.prototype.onOverlayedBtnContainerClick=function(e){e.cancelable&&e.preventDefault(),this.adPlaying?this.adsManager.resume():this.playAds(),this.toggleOverlayedBtnContainer()},t.prototype.playAds=function(){var e=window.google;this.adDisplayContainer&&this.adDisplayContainer.initialize(),this.html5Player.load();try{var t=this.html5Player.getBoundingClientRect(),n=t.width,i=t.height;this.adsManager.init(n,i,e.ima.ViewMode.NORMAL),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),this.adsManager.addEventListener(e.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),this.adsManager.addEventListener(e.ima.AdEvent.Type.LOADED,this.onAdLoaded),this.adsManager.addEventListener(e.ima.AdEvent.Type.STARTED,this.onStarted),this.adsManager.addEventListener(e.ima.AdEvent.Type.SKIPPED,this.onSkipped),this.adsManager.addEventListener(e.ima.AdEvent.Type.COMPLETE,this.onComplete),this.adsManager.addEventListener(e.ima.AdEvent.Type.PAUSED,this.toggleOverlayedBtnContainer),this.adsManager.start()}catch(e){this.html5Player.play()}},t.prototype.adsManagerLoadedCallback=function(e){Y("".concat(this.videoPlayerID," AdsManager loaded"));var t=window.google,n=new t.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.uiElements=[t.ima.UiElements.AD_ATTRIBUTION,t.ima.UiElements.COUNTDOWN],this.adsManager=e.getAdsManager(this.html5Player,n),this.addDefaultListeners()},t}(Nt),Ft=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Gt=function(e){function t(t,n,i,r,o){var a=e.call(this,ve.VIDEO_JS,t,n,i,r,o)||this;return Y("initializing IMAManagerVideoJS for",n),navigator.userAgent.match(/iPad|Android/i)&&a.html5Player.hasAttribute("controls")&&a.html5Player.removeAttribute("controls"),a.overlayedBtnContainer=document.getElementById(n),a}return Ft(t,e),t.prototype.initAds=function(){var e,t=window.videojs,n=window.google;if(!t)throw new Error("VideoJS not detected, dependency was not added correctly");if(n){if(this.html5Player=document.getElementById(this.videoPlayerID+"_html5_api"),!this.html5Player)throw Error("internal videojs element was not found on the page using id=".concat(this.videoPlayerID,", this is probably because this was initialized before videojs was ready"));this.videoJSPlayer=t(this.videoPlayerID);var i={id:this.videoPlayerID,adLabel:"Advertisement",disableAdControls:!1,showControlsForJSAds:!0,adsManagerLoadedCallback:this.adsManagerLoadedCallback.bind(this),omidVendorAccess:(e={},e[n.ima.OmidVerificationVendor.OTHER]=n.ima.OmidAccessMode.FULL,e)};this.videoJSPlayer.ima?(this.audioPosterURL&&n.ima.settings.setFeatureFlags({audioPosterImageEnabled:!0,audioPosterImageDefaultUrl:this.audioPosterURL}),this.videoJSPlayer.ima(i)):console.error("IMA not found for video JS")}else console.error("Google SDK not found.")},t.prototype.imaInit=function(e){if(e&&""!==e){var t=this.vastUrlAndVideoSrc(e),n=t.videoVastUrl,i=t.videoSrc;this.videoJSPlayer.ima.setContentWithAdTag(i,n,!1),this.videoJSPlayer.ima.requestAds(),this.boundBidRequestClick=this.onOverlayedBtnContainerClick.bind(this),this.boundBidRequestTouch=this.onOverlayedBtnContainerClick.bind(this),this.overlayedBtnContainer.addEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.addEventListener("touchend",this.boundBidRequestTouch)}},t.prototype.onOverlayedBtnContainerClick=function(e){e.cancelable&&e.preventDefault(),this.videoJSPlayer.ima.initializeAdDisplayContainer(),this.overlayedBtnContainer.removeEventListener("click",this.boundBidRequestClick),this.overlayedBtnContainer.removeEventListener("touchend",this.boundBidRequestTouch)},t.prototype.adsManagerLoadedCallback=function(){Y("".concat(this.videoPlayerID," AdsManager loaded")),this.adsManager=this.videoJSPlayer.ima.getAdsManager(),this.addDefaultListeners()},t}(Nt),qt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Wt=function(){return Wt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Wt.apply(this,arguments)},Ht=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},Jt=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},zt=function(e){function t(t,n,i){var r,o=e.call(this,t,i)||this;if(o.fetchANAVMAP=function(){return Ht(o,void 0,void 0,(function(){var e,t,n,i,r,o;return Jt(this,(function(a){switch(a.label){case 0:e=this.currentDimensions(),t=Wt(Wt({},this.anaWeb.globalTargeting),this.baseTargeting),this.adAttemptID=Pe(),this.adAttemptStartTime=Date.now(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,yt.VMAP.fetch({adPlacement:this.adPlacement,adPosition:this.adPosition,adUnitID:this.adUnitID,auctionTimeout:this.anaWeb.auctionTimeout,elementID:this.elementID,playbackMethod:this.playbackMethod,playerHeight:e[0][1],playerWidth:e[0][0],startDelay:this.startDelay,targeting:t,audioPosterEnabled:!!this.audioPosterURL,videoDurationSeconds:this.videoDurationSeconds})];case 2:if(n=a.sent(),o=Date.now()-this.adAttemptStartTime,i=n.targeting,this.anaWeb.eventsTracker.adAttemptSucceeded(this.adUnitID,Wt({slot:this.adUnitID,totalBids:0,duration:o,adAttemptID:this.adAttemptID,targeting:i},q(n.bidRequestBody))),n.tagUrl.includes("bids=&")&&!this.adServerRender)throw Error("did not receive ANA bid and ad server render disabled");return[2,"".concat(n.tagUrl).concat(this.adServerRender?"":"&ad_server_render=0")];case 3:throw r=a.sent(),o=Date.now()-this.adAttemptStartTime,r.status?r.status===w&&r.message!==I&&this.anaWeb.eventsTracker.adAttemptFailed(this.adUnitID,{slot:this.adUnitID,reason:"fcap",duration:o,adAttemptID:this.adAttemptID,targeting:t}):this.anaWeb.eventsTracker.adAttemptFailed(this.adUnitID,{slot:this.adUnitID,reason:"0",duration:o,adAttemptID:this.adAttemptID,targeting:t}),r;case 4:return[2]}}))}))},o.playerType=n,void 0===i.startDelay)throw Error("startDelay must be specified for video ad slots");if(i.startDelay<-2)throw Error("startDelay must be valid");if(void 0===i.adPlacement)throw Error("adPlacement must be specified for video ad slots");if(void 0===i.adPosition)throw Error("adPosition must be specified for video ad slots");if(i.adPosition<1||i.adPosition>7)throw Error("adPosition must be valid not Unknown");if(!i.playbackMethod||i.playbackMethod<1||i.playbackMethod>6)throw Error("playbackMethod must be specified for video ad slots");if(o.audioPosterURL=i.audioPosterURL,o.videoDurationSeconds=i.videoDurationSeconds,o.startDelay=i.startDelay,o.adPlacement=i.adPlacement,o.adPosition=i.adPosition,o.playbackMethod=i.playbackMethod,o.wrapperDiv=document.getElementById(o.elementID),o.dimensions&&0===o.dimensions.length)throw new Error("".concat(o.elementID," dimensions must be either omitted or have at least one element in the array"));switch(o.playerType){case ve.VIDEO_JS:r=Gt;break;case ve.HTML5:r=jt;break;default:throw Error("unsupported video player type: ".concat(n))}return o.videoManager=new r(i.adsManagerLoadedCbk,o.elementID,o.adUnitID,o.baseTargeting,o.audioPosterURL),o.refresh(),o}return qt(t,e),t.prototype.refresh=function(){var e;return Ht(this,void 0,void 0,(function(){return Jt(this,(function(t){switch(t.label){case 0:return null===(e=this.videoManager.adsManager)||void 0===e||e.destroy(),[4,this.videoManager.anaBidRequest(this.fetchANAVMAP)];case 1:return t.sent(),[2]}}))}))},t.prototype.currentDimensions=function(){var e;if(this.dimensions)e=this.dimensions;else{var t=this.playerDimensions();e=[[t.w,t.h]]}if(0===e.length||2!==e[0].length)throw new Error("".concat(this.elementID," final dimensions are not valid: ").concat(e));return e},t.prototype.playerDimensions=function(){var e=this.wrapperDiv.getBoundingClientRect(),t=Math.floor(e.width),n=Math.floor(e.height);if(0===t||0===n)throw Error("".concat(this.elementID," wrong video ad slot dimensions: ").concat(t,"x").concat(n));return{w:t,h:n}},t}(_t);zt.prototype.toString=function(){return"VideoSlot('".concat(this.adUnitID,"', ").concat(this.playerType,", '").concat(this.elementID,"')")};var Kt=function(){function e(e){if(this.anaWeb=e,window.addEventListener)window.addEventListener("message",this.handleMessage.bind(this),!1),window.addEventListener("unload",(function(){e&&e.eventsTracker&&e.eventsTracker.pageviewExit()}));else{if(!window.attachEvent)throw Error("No event listener found!");window.attachEvent("onmessage",this.handleMessage.bind(this))}}return e.prototype.handleMessage=function(e){if(e&&(a=e.origin,y.some((function(e){return e.test(a)})))&&e.data&&e.data.bidID){var t=e.data,n=t.adUnitID,i=t.bidID,r=this.anaWeb.bidManager.getBidToRender(n,i);if(r){r.HasWon=!0;var o=this.anaWeb.createdSlots.find((function(e){return e.adUnitID===n}));oe(r,o),e.source?e.source.postMessage(JSON.stringify(r),e.origin):console.error("e.source is not available in this context"),wt({adUnitID:n,bid:r}),this.anaWeb.eventsTracker.slotRendered(n,r)}}var a;e&&function(e){return b.some((function(t){return t.test(e)}))}(e.origin)&&e.data&&e.data.msgType&&"cookieSyncingSuccess"===e.data.msgType&&(Y("synced cookie message event for ".concat(e.data.bidderId,", id=").concat(e.data.partnerUid)),Me(e.data.bidderId,e.data.partnerUid))},e}(),Qt=function(){return Qt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Qt.apply(this,arguments)},$t={pubID:null,adServer:"googletag",bidTimeout:500},Yt=function(e){!function(){if(!window.apstag){document.body||console.error("loadAPSTagJS called before there is a body to append to"),window.apstag={init:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n("i",e)},fetchBids:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n("f",e)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};var e=document.createElement("script");e.async=!0,e.src=m;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),Y("added APS script on the page ".concat(m))}function n(e,t){window.apstag._Q.push([e,t])}}();var t=Qt(Qt({},$t),e),n=t.pubID,i=t.adServer,r=t.bidTimeout;if(!n)throw new Error("to fully enable amazon publisher tag integration you need to pass at least `pubID`");window.apstag.init({pubID:n,adServer:i,bidTimeout:r})},Zt=function(){function e(e){var t=e.shouldExpectGoogleCMP,n=e.eventsTracker,i=e.shouldExpectExternalCMP,r=this;this.resolveTcPromise=function(e){e(),r.isTcResolved=!0},this.addCMPListeners=function(e,t){r.isTcfapiReady(t).then((function(){window.__tcfapi("addEventListener",null,(function(n){var i=n.eventStatus,o=n.tcString;if("tcloaded"!==i&&"useractioncomplete"!==i||(r.isTcResolved||r.resolveTcPromise(t),r.tcString=o),"cmpuishown"===i){var a=Date.now();r.eventsTracker.cmpPromptDisplayed(a-e)}}))})).catch((function(){r.resolveTcPromise(t)}))},this.tcResolver=Promise.resolve(),this.isTcResolved=!1,this.tcString="",this.gdprApplies=!1,this.fcLoaded=!1,this.eventsTracker=n;var o=Date.now();t&&(this.tcResolver=new Promise((function(e){var t;null===(t=window.googlefc)||void 0===t||t.callbackQueue.push({CONSENT_API_READY:function(){return r.addCMPListeners(o,e)}}),setTimeout((function(){r.fcLoaded||(r.resolveTcPromise(e),r.eventsTracker.gptNoCMP())}),5e3)}))),i&&(this.tcResolver=new Promise((function(e){r.addCMPListeners(o,e),setTimeout((function(){r.fcLoaded||(r.resolveTcPromise(e),r.eventsTracker.gptNoCMP())}),5e3)})))}return e.prototype.isTcfapiReady=function(e){var t=this;return window.__tcfapi?new Promise((function(n){var i=setInterval((function(){window.__tcfapi("ping",null,(function(r){var o=r.cmpLoaded,a=r.gdprApplies;if(o){t.fcLoaded=!0;var s=ne("fc");a||"alwaysshow"===s?t.gdprApplies=!0:t.resolveTcPromise(e),clearInterval(i),n()}}))}),150)})):Promise.reject(new Error("__tcfapi not found"))},e}(),Xt=function(){function e(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}}return e.prototype.addBids=function(e,t){var n=this,i=this,r=i.usedBidIDs,o=i.bidsByID,a=i.bidsByAdUnit,s=(0,i.adUnitKey)(t);e.forEach((function(e){var t=e.BidID;e.ClientReceived=(new Date).getTime(),n.getBidByID(t)||r[t]||(o[t]=e,a[s]?a[s].push(e):a[s]=[e])})),a[s].sort((function(e,t){return e.SortValue-t.SortValue}))},e.prototype.getBidCount=function(e){var t=this.bidsByAdUnit,n=(0,this.adUnitKey)(e);return t[n]?t[n].length:0},e.prototype.getBid=function(e,t){void 0===t&&(t=!1);var n=this.bidsByAdUnit,i=(0,this.adUnitKey)(e);if(n[i]&&n[i].length){n[i]=n[i].filter((function(e){return!e.isExpired()}));var r=n[i];if(!t)return s=r[r.length-1];for(var o=Date.now(),a=r.length-1;a>=0;a--){var s;if((s=r[a]).LastNomination<o-1e3)return s.LastNomination=o,s}}return null},e.prototype.getBidByID=function(e){return this.bidsByID[e]||null},e.prototype.getBidToRender=function(e,t){return this.usedBidIDs[t]?null:(this.useBid(e,t),this.getBidByID(t))},e.prototype.useBid=function(e,t){var n=this,i=n.usedBidIDs,r=n.bidsByAdUnit,o=(0,n.adUnitKey)(e);if(!i[t]&&void 0!==r&&void 0!==r[o]){var a=r[o].map((function(e){return e.BidID})).indexOf(t);-1!==a&&r[o].splice(a,1),i[t]=!0}},e.prototype.reset=function(){this.bidsByID={},this.bidsByAdUnit={},this.usedBidIDs={}},e.prototype.adUnitKey=function(e){var t=window.location.href;return"".concat(e,":").concat(t)},e}(),en=function(){return en=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},en.apply(this,arguments)},tn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},nn=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},rn="ANAEventsCache";function on(){Y("ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ ANA Web SDK ".concat("5.23.0"," ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚ðŸš‚")),Y("dispatching anaReadyEvent"),document.dispatchEvent(new CustomEvent("ANAReady"))}var an=function(e,t,n,i){var r,o,a=window.pageviewUID,s=null===(r=W())||void 0===r?void 0:r.premiumUser;void 0===a&&(a=Pe(),window.pageviewUID=a);var c={uid:_e(),session_id:Ye(),event:n,app_id:e,wid:a,lib_version:t,screen_width:Math.floor(performance.now()),screen_height:i.counter,device:"web",premium:s,url:document.location.href,extra_json:{url:document.location.href}};if(i){var u=i.bid;if(c.domain=i.bidder,i.reason&&(c.extra=i.reason),i.extra&&(c.extra=i.extra),i.extra_2&&(c.extra_2=i.extra_2),i.object_id&&(c.object_id=i.object_id),i.iiqCohort&&(c.mp_lib=i.iiqCohort),c.extra_json.totalBids=i.totalBids,c.urban=i.directRendered,i.slot&&(c.cohort=i.slot),i.gamEvent){var l=i.gamEvent,d=l.lineItemId,h=l.advertiserId;c.locale="".concat(d),c.language="".concat(h)}if(i.elementID&&(c.extra_json.element_id=i.elementID),u&&(c.impression_type=u.ImpressionType,c.impression_sub_type=u.ImpressionSubType,c.object_id=u.BidID,c.sizes="".concat(u.Width,"x").concat(u.Height),c.placement_id=u.PlacementID,c.domain=u.BidderName,c.impression_type=u.ImpressionType,c.extra_json.bid_targeting=u.Targeting,c.cookie_creation_ts=u.Value),i.duration&&(c.duration=i.duration),i.adAttemptID&&(c.extra_2=i.adAttemptID),i.targeting){var f=JSON.stringify(en({},i.targeting));c.targeting=f,c.extra_json=en(en({},c.extra_json),{targeting:f})}i.auction_timeout&&(c.timeout=i.auction_timeout),i.matched_ids&&(c.matched_ids=JSON.stringify(i.matched_ids)),i.opportunity_data&&(c.os_version=null===(o=i.opportunity_data)||void 0===o?void 0:o.os_v),i.liveramp_envelope&&(c.liveramp_envelope=i.liveramp_envelope),i.referer&&(c.referer=i.referer),i.consent&&(c.consent=i.consent)}return c},sn=function(){function e(e,t){var n=this;this.propertyID=e,this.libVersion=t,this.timeoutId=setInterval((function(){return n.tickTimer()}),1e3,this)}return e.prototype.tickTimer=function(){var e=this;this.timeoutId&&clearInterval(this.timeoutId),this.sendCachedEvents(),this.timeoutId=setInterval((function(){return e.tickTimer()}),1e3,this)},e.prototype.sendCachedEvents=function(){return tn(this,void 0,void 0,(function(){var e,t;return nn(this,(function(n){switch(n.label){case 0:if(e=anaStorage.getItem(rn),t=[],e)try{t=JSON.parse(e)}catch(e){t=[]}return t&&0!==t.length?[4,yt.Events.send({events:t})]:[2];case 1:return n.sent(),anaStorage.setItem(rn,"[]"),[2]}}))}))},e.prototype.sendBeaconEvent=function(e,t){void 0===t&&(t={}),navigator.sendBeacon&&navigator.sendBeacon(f,JSON.stringify({events:[an(this.propertyID,this.libVersion,e,t)]}))},e.prototype.trackEvent=function(e,t){void 0===t&&(t={});var n=anaStorage.getItem(rn),i=[];if(n)try{i=JSON.parse(n)}catch(e){i=[]}var r=an(this.propertyID,this.libVersion,e,t);i.push(r);var o=JSON.stringify(i);try{anaStorage.setItem(rn,o),o.length>2097152&&this.sendCachedEvents()}catch(e){var a=i.pop();console.error("Cant add event: ".concat(a.event," to cache, max quota exceeded"))}},e.prototype.anaLoaded=function(e){this.trackEvent("ana_loaded",{extra:e})},e.prototype.gptAdded=function(){this.trackEvent("gpt_added")},e.prototype.gptLoaded=function(){this.trackEvent("gpt_loaded")},e.prototype.gptNoCMP=function(){this.trackEvent("gpt_no_cmp")},e.prototype.iiqAdded=function(){this.trackEvent("iiq_added")},e.prototype.iiqIdsReceived=function(e){var t=e.idsCount,n=e.iiqCohort;this.trackEvent("iiq_ids_received",{counter:t,iiqCohort:n})},e.prototype.cmpPromptDisplayed=function(e){this.trackEvent("cmp_prompt_displayed",{duration:e})},e.prototype.slotCreated=function(e,t){this.trackEvent("slot_created",{slot:e,impressionType:t})},e.prototype.slotCreationFailed=function(e,t,n){this.trackEvent("slot_creation_failed",{slot:e,impressionType:t,reason:n})},e.prototype.refreshStarted=function(e){this.trackEvent("refresh_started",{slot:e})},e.prototype.adAttemptMade=function(e,t){this.trackEvent("ad_attempt_made",en({slot:e},t))},e.prototype.adAttemptAborted=function(e,t){this.trackEvent("ad_attempt_aborted",{slot:e,reason:t})},e.prototype.adAttemptFailed=function(e,t){this.trackEvent("ad_attempt_failed",en({slot:e},t))},e.prototype.refreshFailed=function(e,t){this.trackEvent("refresh_failed",{slot:e,reason:t})},e.prototype.adAttemptSucceeded=function(e,t){this.trackEvent("ad_attempt_succeeded",en({slot:e},t))},e.prototype.slotRendered=function(e,t){this.trackEvent("ana_bid_render",{slot:e,bid:t})},e.prototype.pageviewExit=function(){this.sendBeaconEvent("pageview_text")},e.prototype.heartbeat=function(e,t){this.trackEvent("heartbeat",{targeting:e,counter:t})},e.prototype.adSlotRemoved=function(e,t){this.trackEvent("ad_slot_removed",{slot:e,elementID:t})},e.prototype.adSlotRecreated=function(e,t){this.trackEvent("ad_slot_recreated",{slot:e,elementID:t})},e.prototype.pingTest=function(e){this.trackEvent("ping_test",e)},e.prototype.googlePingTest=function(e){this.trackEvent("google_ping_test",{extra:e})},e.prototype.premiumUser=function(e,t){this.trackEvent("premium_user",{extra:e,extra_2:t})},e}(),cn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},un=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};const ln=function(e,t,n){return cn(void 0,void 0,void 0,(function(){var i,r;return un(this,(function(o){switch(o.label){case 0:return[4,ae(n,200)];case 1:return o.sent(),i=0,e.heartbeat(t(),i),anaStorage.setItem("heartbeat_ts",Date.now().toString()),r=function(){return cn(void 0,void 0,void 0,(function(){var o;return un(this,(function(a){switch(a.label){case 0:return[4,ae(n,200)];case 1:return a.sent(),o=Number(anaStorage.getItem("heartbeat_ts")),Date.now()-o>2e4&&(anaStorage.setItem("heartbeat_ts",Date.now().toString()),i++,e.heartbeat(t(),i)),setTimeout(r,2e3),[2]}}))}))},setTimeout(r,2e3),[2]}}))}))};var dn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},hn=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},fn=[{field:"extra",url:"https://securepubads.g.doubleclick.net"},{field:"extra_2",url:"https://ads.assemblyexchange.com"},{field:"object_id",url:"https://js.media-lab.ai/status"}];function pn(e){return dn(this,void 0,void 0,(function(){var t,n;return hn(this,(function(i){switch(i.label){case 0:return t={},n=fn.map((function(e){var n=e.url,i=e.field;return function(e){return dn(this,void 0,void 0,(function(){return hn(this,(function(t){switch(t.label){case 0:return[4,fetch(e,{method:"HEAD",mode:"no-cors",cache:"no-cache"})];case 1:return[2,t.sent()]}}))}))}(n).then((function(e){var n=e.status;t[i]="".concat(n)})).catch((function(){t[i]="-1"}))})),[4,Promise.all(n)];case 1:if(i.sent(),e.pingTest(t),"-1"===t.extra)throw new Error("Ping test failed");return[2]}}))}))}var gn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},vn=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},mn=function(){var e=this;this.getFeatures=function(t){return!t&&e.features&&e.features.length?Promise.resolve(e.features):e.isFetching?new Promise((function(t){e.waitForFetch.then((function(){t(e.features),e.waitForFetch=null}))})):new Promise((function(t){e.waitForFetch=new Promise((function(n){e.isFetching=!0,yt.Wverify.verify().then((function(i){var r=i.features;e.isFetching=!1,e.features=r,t(e.features),n()}))}))}))},this.isFeatureEnabled=function(t){return gn(e,void 0,void 0,(function(){var e,n;return vn(this,(function(i){switch(i.label){case 0:return[4,this.getFeatures()];case 1:return e=i.sent(),[2,null===(n=e.find((function(e){return e.name===t})))||void 0===n?void 0:n.enabled]}}))}))},this.verifyFeature=function(t,n){return gn(e,void 0,void 0,(function(){var e;return vn(this,(function(i){switch(i.label){case 0:return[4,this.isFeatureEnabled(t)];case 1:return e=i.sent(),n(e),this.featuresObserversMap[t]?this.featuresObserversMap[t].push(n):this.featuresObserversMap[t]=[n],[2]}}))}))},this.refreshFeatures=function(){return gn(e,void 0,void 0,(function(){var e,t=this;return vn(this,(function(n){switch(n.label){case 0:return e=this,[4,this.getFeatures(!0)];case 1:return e.features=n.sent(),Object.keys(this.featuresObserversMap).forEach((function(e){t.featuresObserversMap[e].forEach((function(n){return gn(t,void 0,void 0,(function(){var t;return vn(this,(function(i){switch(i.label){case 0:return[4,this.isFeatureEnabled(e)];case 1:return t=i.sent(),n(t),[2]}}))}))}))})),[2]}}))}))},this.features=[],this.isFetching=!1,this.featuresObserversMap={}};const yn=mn;var bn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},wn=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},In=function(e,t,n){var i=this;this.location=null,this.init=function(e,t,n){return bn(i,void 0,void 0,(function(){var i=this;return wn(this,(function(r){switch(r.label){case 0:return this.locationReady=new Promise((function(e){i.locationReadyResolver=e})),[4,this.setPermissions()];case 1:return r.sent(),this.setLocation(e,t,n),[2]}}))}))},this.promptToGetLocation=function(){navigator.geolocation.getCurrentPosition((function(e){i.location={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,source:"gps",enabled:!0},anaSessionStorage.setItem("ana_geolocation_data",JSON.stringify(i.location))}),(function(){i.location=null}))},this.setPermissions=function(){return navigator.permissions?new Promise((function(e){navigator.permissions.query({name:"geolocation"}).then((function(t){i.permission=t,e()}))})):(i.permission={state:"denied"},Promise.resolve())},this.setLocation=function(e,t,n){return bn(i,void 0,void 0,(function(){var i,r,o=this;return wn(this,(function(a){return i=this.permission,e?(this.location=null,anaSessionStorage.removeItem("ana_geolocation_data"),this.locationReadyResolver(),[2]):i&&"denied"!==i.state?(r=anaSessionStorage.getItem("ana_geolocation_data"),"granted"===i.state&&r?(this.location=JSON.parse(r),this.locationReadyResolver(),[2]):navigator.geolocation?"granted"===i.state?(this.locationReadyResolver(),this.promptToGetLocation(),[2]):("prompt"===i.state&&n===Tn.LOGGED_OUT&&(this.locationReadyResolver(),null==t||t.verifyFeature("location_prompt",(function(e){JSON.parse(anaSessionStorage.getItem("ana_location_prompted"))||e&&(anaSessionStorage.setItem("ana_location_prompted","true"),o.promptToGetLocation())}))),this.locationReadyResolver(),[2]):(this.locationReadyResolver(),[2])):(this.locationReadyResolver(),[2])}))}))},this.init(e,t,n)};const En=In;var Tn,An=function(){return An=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},An.apply(this,arguments)},Sn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},Dn=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Pn=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};!function(e){e[e.PENDING=1]="PENDING",e[e.LOGGED_IN=2]="LOGGED_IN",e[e.LOGGED_OUT=3]="LOGGED_OUT"}(Tn||(Tn={}));var kn,_n={slotEventsHandlers:{},gptOptions:{globalTargeting:{}},apsOptions:null,syncCookies:!0,resyncCookiesAfterTimeout:5e3,propertyId:window.location.hostname,videoOptions:null,lightMode:!1,userEmail:null,shouldExpectGoogleCMP:!0,shouldExpectExternalCMP:!1,auctionTimeout:A,premiumUser:!1,wunderkindID:null,googleCMDCheckTimeout:5e3,disableIIQ:!1,loggedInStatus:Tn.PENDING,unifiedIdEnabled:!1,persistPremiumUser:!0},Rn=function(){function e(t){void 0===t&&(t={});var n=this;this.createdSlots=[],this.createdGoogleSlots=[],this.createdVideoContainers=[];var i,r=An(An({},_n),t),o=r.slotEventsHandlers,a=r.gptOptions,s=r.apsOptions,u=r.syncCookies,l=r.resyncCookiesAfterTimeout,d=r.propertyId,h=r.lightMode,f=r.auctionTimeout,p=r.userEmail,g=r.shouldExpectExternalCMP,v=r.shouldExpectGoogleCMP,m=r.anaUid,y=r.premiumUser,b=r.premiumUserTag,w=r.wunderkindID,I=r.googleCMDCheckTimeout,E=r.disableIIQ,T=r.loggedInStatus,S=r.unifiedIdEnabled;ne("auctionTimeout")&&parseInt(ne("auctionTimeout"))>0&&(i=parseInt(ne("auctionTimeout"))),w&&this.enableWunderkind(w),this.bidManager=new Xt,this.slotEventsHandlers=o,this.syncCookies=u,this.resyncCookiesAfterTimeout=l,this.propertyId=d,this.apsEnabled=!!s,this.mapAPSTargeting=!!(null==s?void 0:s.mapAPSTargeting),this.globalTargeting=(null==a?void 0:a.globalTargeting)||{},this.setPPID=a&&!!a.setPPID,this.lazyLoad=a&&a.enableLazyLoad,this.lightMode=!!h,this.auctionTimeout=i||f,this.eventsTracker=new sn(this.propertyId,c),this.msgHandler=new Kt(this),this.userEmail=p,this.forceDirectRender=!1,this.iiqInstance=null,this.geolocation=null,this.loggedInStatus=T,this.unifiedIdEnabled=S,this.persistPremiumUser=r.persistPremiumUser;var D=document.querySelector("script[anaUID]"),k=D&&D.getAttribute("anaUID")||"",_=m||k;_?this.setANAUID(_):this.uid=_e();var R,O=this.persistPremiumUser&&(R=this.uid,JSON.parse(anaStorage.getItem(C)||"{}")[R]);(y||O)&&this.setPremiumUser(b||O),this.verifier=new yn,this.geolocation=new En(this.premiumUser,this.verifier,this.loggedInStatus),this.eventsTracker.anaLoaded("start"),window.ANAWebSDKInstance=this,this.setFocusListeners(),t.auctionTimeout||i?(t.auctionTimeout||i)&&Y("Setting auctionTimeout to ".concat(this.auctionTimeout)):Y("auctionTimeout wasn't provided, using default value: ".concat(A)),(this.auctionTimeout<500||this.auctionTimeout>4e3)&&(this.auctionTimeout=A,console.error("auctionTimeout is out of range (".concat(500," - ").concat(4e3,"), using default value: ").concat(A))),void 0===this.globalTargeting.SDK&&e.version&&(this.globalTargeting.SDK=e.version),void 0===this.globalTargeting.domain&&"localhost"!==window.location.hostname&&(this.globalTargeting.domain=window.location.hostname),void 0===this.globalTargeting.auctionTimeout&&this.auctionTimeout&&(this.globalTargeting.auctionTimeout=this.auctionTimeout.toString()),this.sessionId=Ye(),this.lightMode||(s&&(s.bidTimeout=this.auctionTimeout,Yt(s)),it(a,this)),this.getIIQInstance=function(e){return e&&e(null),Promise.resolve(null)},!E&&this.verifier.verifyFeature("iiq",(function(e){if(!e)return n.iiqInstance=null,void(n.getIIQInstance=function(e){return e&&e(null),Promise.resolve(null)});var t=ft({partnerId:1366563817,partnerClientId:n.uid,eventsTracker:n.eventsTracker,shouldSetPPID:!n.setPPID}).then((function(e){return n.iiqInstance=e,e}));n.getIIQInstance=function(e){return t.then((function(t){return e&&e(t),t}))}}));var x,L,M=!this.lightMode&&v;this.gdprManager=new Zt({shouldExpectGoogleCMP:M,shouldExpectExternalCMP:g,eventsTracker:this.eventsTracker}),this.syncCookies&&!this.premiumUser&&this.syncUserCookies(),window.addEventListener&&window.addEventListener("scroll",this.onScroll.bind(this)),ln(this.eventsTracker,(function(){return n.globalTargeting}),(function(){return n.hasFocus()})),Promise.all([pn(this.eventsTracker),(L=this.eventsTracker,new Promise((function(e){var t=window.googlefc;null==t||t.callbackQueue.push({AD_BLOCK_DATA_READY:function(){var n=t.getAdBlockerStatus(),i=P[n];if(L.googlePingTest(i),i===P[1]||i===P[2])throw new Error("Ad blocker detected");e()}})}))),(x=I,new Promise((function(e,t){var n,i=window.googletag,r=!1,o=setTimeout((function(){r||t(new Error("Google cmd not found"))}),x);null===(n=null==i?void 0:i.cmd)||void 0===n||n.push((function(){r=!0,clearTimeout(o),e()}))})))]).catch((function(){n.forceDirectRender=!0,n.createdGoogleSlots.forEach((function(e){e.directRender()}))}));var B=navigator.cookieDeprecationLabel;B&&B.getValue().then((function(e){var t;Y("chrome cookieDeprecationLabel",e),e.length&&n.updateGlobalTargeting(((t={}).chrome_label=e,t))})),this.eventsTracker.anaLoaded("finish")}return e.prototype.setFocusListeners=function(){var e=this;this.internalHasFocus=document.hasFocus(),re("focus",window,(function(){e.internalHasFocus=!0})),re("blur",window,(function(){e.internalHasFocus=!1})),re("scroll",window,(function(){e.internalHasFocus=!0})),re("visibilitychange",window,(function(){e.internalHasFocus="visible"===document.visibilityState})),re("touchstart",window,(function(){e.internalHasFocus=!0}))},e.prototype.setANAUID=function(e){var t;if(!de(e))return Y("Ignoring provided UID: ".concat(e," because it is not a valid UUIDv4")),void(this.uid=_e());this.uid=e,null===(t=this.verifier)||void 0===t||t.refreshFeatures(),Re(this.uid)},e.prototype.enableWunderkind=function(e){!function(e){var t=e.src,n=e.id,i=document.createElement("script");i.src=t,i.async=!0,n&&i.setAttribute("id",n),document.getElementsByTagName("head")[0].appendChild(i)}({src:"".concat(document.location.protocol,"//tag.wknd.ai/").concat(e,"/i.js"),id:"wunderkind-script"})},e.prototype.setLoggedInStatus=function(e){var t,n;this.loggedInStatus=e?Tn.LOGGED_IN:Tn.LOGGED_OUT,null===(t=this.verifier)||void 0===t||t.refreshFeatures(),null===(n=this.geolocation)||void 0===n||n.setLocation(this.premiumUser,this.verifier,this.loggedInStatus)},e.prototype.setPremiumUser=function(e){var t,n,i,r;void 0===e&&(e="premium"),this.premiumUser=!0,this.premiumUserTag=e,this.eventsTracker.premiumUser("set",e),this.persistPremiumUser&&(n=this.uid,i=e,(r=JSON.parse(anaStorage.getItem(C)||"{}"))[n]=i,anaStorage.setItem(C,JSON.stringify(r))),null===(t=this.geolocation)||void 0===t||t.setLocation(this.premiumUser,this.verifier,this.loggedInStatus),this.createdSlots.forEach((function(e){e.removeSlot()}))},e.prototype.removePremiumUser=function(){var e,t,n;this.premiumUser=!1,this.eventsTracker.premiumUser("remove",this.premiumUserTag),this.premiumUserTag=null,this.persistPremiumUser&&(t=this.uid,delete(n=JSON.parse(anaStorage.getItem(C)||"{}"))[t],anaStorage.setItem(C,JSON.stringify(n))),null===(e=this.geolocation)||void 0===e||e.setLocation(this.premiumUser,this.verifier,this.loggedInStatus),this.createdSlots.forEach((function(e){e.refresh()}))},e.prototype.createSlot=function(e,t){return Sn(this,void 0,void 0,(function(){var n,i,r,o=this;return Dn(this,(function(a){switch(a.label){case 0:return[4,se(t.elementID)];case 1:a.sent(),setTimeout((function(){"done"!==n&&(n||(n="timeout"),o.eventsTracker.slotCreationFailed(t.adUnitID,S,n))}),5e3),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.gdprManager.tcResolver];case 3:return a.sent(),i=this.createInternalSlot(e,t),n="done",[2,i];case 4:return r=a.sent(),n=r,[3,5];case 5:return[2]}}))}))},e.prototype.showConsentPrompt=function(){var e=window.googlefc;null==e||e.callbackQueue.push(e.showRevocationMessage)},e.prototype.createInternalSlot=function(e,t){var n=null;switch(e){case ge.GOOGLE:this.lightMode&&Y("making google banner slots in light mode seems sketchy"),n=new Mt(this,t),this.createdGoogleSlots.push(n);break;case ge.ANA:this.lightMode||Y("making a lightmode slot without the SDK in lightmode seems sketchy"),n=new _t(this,t);break;default:throw Error("Specified slot type is not supported: ".concat(e))}return this.eventsTracker.slotCreated(t.adUnitID,S),this.createdSlots.push(n),n},e.prototype.createVideoSlot=function(e,t){return Sn(this,void 0,void 0,(function(){var n;return Dn(this,(function(i){switch(i.label){case 0:return[4,se(t.elementID)];case 1:return i.sent(),[4,this.gdprManager.tcResolver];case 2:return i.sent(),n=new zt(this,e,t),this.eventsTracker.slotCreated(t.adUnitID,"video"),this.createdVideoContainers.push(n),[2,n]}}))}))},e.prototype.hasFocus=function(){return document.hasFocus()||this.internalHasFocus},Object.defineProperty(e,"version",{get:function(){return"5.23.0"},enumerable:!1,configurable:!0}),e.prototype.updateGlobalTargeting=function(e){var t;(this.globalTargeting=An(An({},this.globalTargeting),e),this.lightMode)||(t=this.globalTargeting)&&Object.keys(t).length&&st((function(){Object.keys(t).forEach((function(e){googletag.pubads().setTargeting(e,t[e])}))}))},e.prototype.clearGlobalTargeting=function(e){if(void 0===e&&(e=[]),e.length)for(var t in this.globalTargeting)e.includes(t)&&delete this.globalTargeting[t];else this.globalTargeting={};this.lightMode||function(e){void 0===e&&(e=[]),e.length?st((function(){e.forEach((function(e){googletag.pubads().clearTargeting(e)}))})):st((function(){googletag.pubads().clearTargeting()}))}(e)},e.prototype.syncUserCookies=function(){var e=this;if(this.syncCookies&&!this.premiumUser){if(!this.propertyId)throw Error("propertyId is needed to initialize SDK");var t=H();return this.gdprManager.tcResolver.then((function(){Ne({propertyId:t,uid:e.uid})}))}},e.prototype.getBannerSlot=function(e){var t=null;return this.createdSlots.forEach((function(n){n.elementID!==e&&0!==e.indexOf(n.elementID)||(t=n)})),t},e.prototype.onScroll=function(){Pn([],document.querySelectorAll("div.assembly-semi-sticky-container"),!0).forEach((function(e){try{var t=e.children[0],n=e.getBoundingClientRect(),i=t.getBoundingClientRect().height;if(i>304)return t.style.position="relative",void(t.style.marginTop="0px");n.top<=0&&n.top>i-n.height?(t.style.position="fixed",t.style.top=0,t.style.bottom="auto",t.style.marginTop="0px"):n.top<0&&n.top<i-n.height?(t.style.position="relative",t.style.marginTop=n.height-i+"px"):(t.style.position="relative",t.style.marginTop="0px")}catch(e){console.error(e)}}))},e.prototype.setUserEmail=function(e){this.userEmail=e,ut(this)},e.prototype.setUnifiedId=function(e){return void 0===e&&(e=!1),Sn(this,void 0,void 0,(function(){return Dn(this,(function(t){switch(t.label){case 0:return this.unifiedIdEnabled?te(this.userEmail)&&!e?[2]:this.userEmail&&this.loggedInStatus===Tn.LOGGED_IN?[4,Et(this.uid,this.userEmail)]:[3,2]:[2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.getUserIdentity=function(){var e=X("ml_em");if(e)return Y("IDENTITY: medialabcookie found ".concat(e)),{email:e,envelope:null};if(this.userEmail)return Y("IDENTITY: userEmail found ".concat(e)),{email:this.userEmail,envelope:null};var t=X("lr_env");if(t)return Y("IDENTITY: liveramp envelope found', ".concat(t)),{email:null,envelope:t};var n=X(_);if(n)return Y("IDENTITY: rtis envelope found ".concat(n)),{email:null,envelope:n};var i=X(R);return Y("IDENTITY:rtis envelope not found"),i||(Z(R,1,.5),bt.rtis((function(e){Y("IDENTITY: rtis envelope response, ".concat(e)),Z(_,e,21600)}))),Y("IDENTITY: no envelope found"),{email:null,envelope:null}},e}();!function(e){e.VideoMp4="video/mp4",e.VideoOgg="video/ogg"}(kn||(kn={})),"loading"!==document.readyState?setTimeout(on,0):document.addEventListener("DOMContentLoaded",on),window.ANAWeb=Rn,window.SlotTypeEnum=ge,Rn.SlotTypeEnum=ge,Object.defineProperty(Rn,"uid",{get:function(){return _e()}}),Object.defineProperty(Rn,"sessionId",{get:function(){return Ye()}}),Rn.AdPosition=He,Rn.ContentDeliveryMethod=Ke,Rn.PlaybackCessationMode=We,Rn.PlaybackMethod=je,Rn.StartDelay=Fe,Rn.VideoApiFramework=ze,Rn.VideoLinearity=qe,Rn.VideoPlacementType=Ge,Rn.VideoPlayerType=ve,Rn.VideoProtocol=Je,Rn.Mime=kn})(),i})()));
// MediaLab Inc.